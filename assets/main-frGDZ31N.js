(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();function _0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Of={exports:{}},Tr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function cE(){if(Zg)return Tr;Zg=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:d,ref:o!==void 0?o:null,props:u}}return Tr.Fragment=e,Tr.jsx=i,Tr.jsxs=i,Tr}var $g;function uE(){return $g||($g=1,Of.exports=cE()),Of.exports}var _=uE(),kf={exports:{}},le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function fE(){if(Jg)return le;Jg=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.iterator;function x(S){return S===null||typeof S!="object"?null:(S=E&&S[E]||S["@@iterator"],typeof S=="function"?S:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,J={};function re(S,j,te){this.props=S,this.context=j,this.refs=J,this.updater=te||R}re.prototype.isReactComponent={},re.prototype.setState=function(S,j){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,j,"setState")},re.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function I(){}I.prototype=re.prototype;function D(S,j,te){this.props=S,this.context=j,this.refs=J,this.updater=te||R}var U=D.prototype=new I;U.constructor=D,P(U,re.prototype),U.isPureReactComponent=!0;var H=Array.isArray,z={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function Se(S,j,te,$,G,_e){return te=_e.ref,{$$typeof:s,type:S,key:j,ref:te!==void 0?te:null,props:_e}}function je(S,j){return Se(S.type,j,void 0,void 0,void 0,S.props)}function W(S){return typeof S=="object"&&S!==null&&S.$$typeof===s}function oe(S){var j={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(te){return j[te]})}var ve=/\/+/g;function Fe(S,j){return typeof S=="object"&&S!==null&&S.key!=null?oe(""+S.key):j.toString(36)}function Qe(){}function _t(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(Qe,Qe):(S.status="pending",S.then(function(j){S.status==="pending"&&(S.status="fulfilled",S.value=j)},function(j){S.status==="pending"&&(S.status="rejected",S.reason=j)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function X(S,j,te,$,G){var _e=typeof S;(_e==="undefined"||_e==="boolean")&&(S=null);var ce=!1;if(S===null)ce=!0;else switch(_e){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(S.$$typeof){case s:case e:ce=!0;break;case b:return ce=S._init,X(ce(S._payload),j,te,$,G)}}if(ce)return G=G(S),ce=$===""?"."+Fe(S,0):$,H(G)?(te="",ce!=null&&(te=ce.replace(ve,"$&/")+"/"),X(G,j,te,"",function(We){return We})):G!=null&&(W(G)&&(G=je(G,te+(G.key==null||S&&S.key===G.key?"":(""+G.key).replace(ve,"$&/")+"/")+ce)),j.push(G)),1;ce=0;var yt=$===""?".":$+":";if(H(S))for(var Te=0;Te<S.length;Te++)$=S[Te],_e=yt+Fe($,Te),ce+=X($,j,te,_e,G);else if(Te=x(S),typeof Te=="function")for(S=Te.call(S),Te=0;!($=S.next()).done;)$=$.value,_e=yt+Fe($,Te++),ce+=X($,j,te,_e,G);else if(_e==="object"){if(typeof S.then=="function")return X(_t(S),j,te,$,G);throw j=String(S),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return ce}function B(S,j,te){if(S==null)return S;var $=[],G=0;return X(S,$,"","",function(_e){return j.call(te,_e,G++)}),$}function Q(S){if(S._status===-1){var j=S._result;j=j(),j.then(function(te){(S._status===0||S._status===-1)&&(S._status=1,S._result=te)},function(te){(S._status===0||S._status===-1)&&(S._status=2,S._result=te)}),S._status===-1&&(S._status=0,S._result=j)}if(S._status===1)return S._result.default;throw S._result}var F=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function V(){}return le.Children={map:B,forEach:function(S,j,te){B(S,function(){j.apply(this,arguments)},te)},count:function(S){var j=0;return B(S,function(){j++}),j},toArray:function(S){return B(S,function(j){return j})||[]},only:function(S){if(!W(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},le.Component=re,le.Fragment=i,le.Profiler=o,le.PureComponent=D,le.StrictMode=r,le.Suspense=g,le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,le.act=function(){throw Error("act(...) is not supported in production builds of React.")},le.cache=function(S){return function(){return S.apply(null,arguments)}},le.cloneElement=function(S,j,te){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var $=P({},S.props),G=S.key,_e=void 0;if(j!=null)for(ce in j.ref!==void 0&&(_e=void 0),j.key!==void 0&&(G=""+j.key),j)!ee.call(j,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&j.ref===void 0||($[ce]=j[ce]);var ce=arguments.length-2;if(ce===1)$.children=te;else if(1<ce){for(var yt=Array(ce),Te=0;Te<ce;Te++)yt[Te]=arguments[Te+2];$.children=yt}return Se(S.type,G,void 0,void 0,_e,$)},le.createContext=function(S){return S={$$typeof:d,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:u,_context:S},S},le.createElement=function(S,j,te){var $,G={},_e=null;if(j!=null)for($ in j.key!==void 0&&(_e=""+j.key),j)ee.call(j,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(G[$]=j[$]);var ce=arguments.length-2;if(ce===1)G.children=te;else if(1<ce){for(var yt=Array(ce),Te=0;Te<ce;Te++)yt[Te]=arguments[Te+2];G.children=yt}if(S&&S.defaultProps)for($ in ce=S.defaultProps,ce)G[$]===void 0&&(G[$]=ce[$]);return Se(S,_e,void 0,void 0,null,G)},le.createRef=function(){return{current:null}},le.forwardRef=function(S){return{$$typeof:m,render:S}},le.isValidElement=W,le.lazy=function(S){return{$$typeof:b,_payload:{_status:-1,_result:S},_init:Q}},le.memo=function(S,j){return{$$typeof:p,type:S,compare:j===void 0?null:j}},le.startTransition=function(S){var j=z.T,te={};z.T=te;try{var $=S(),G=z.S;G!==null&&G(te,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(V,F)}catch(_e){F(_e)}finally{z.T=j}},le.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},le.use=function(S){return z.H.use(S)},le.useActionState=function(S,j,te){return z.H.useActionState(S,j,te)},le.useCallback=function(S,j){return z.H.useCallback(S,j)},le.useContext=function(S){return z.H.useContext(S)},le.useDebugValue=function(){},le.useDeferredValue=function(S,j){return z.H.useDeferredValue(S,j)},le.useEffect=function(S,j){return z.H.useEffect(S,j)},le.useId=function(){return z.H.useId()},le.useImperativeHandle=function(S,j,te){return z.H.useImperativeHandle(S,j,te)},le.useInsertionEffect=function(S,j){return z.H.useInsertionEffect(S,j)},le.useLayoutEffect=function(S,j){return z.H.useLayoutEffect(S,j)},le.useMemo=function(S,j){return z.H.useMemo(S,j)},le.useOptimistic=function(S,j){return z.H.useOptimistic(S,j)},le.useReducer=function(S,j,te){return z.H.useReducer(S,j,te)},le.useRef=function(S){return z.H.useRef(S)},le.useState=function(S){return z.H.useState(S)},le.useSyncExternalStore=function(S,j,te){return z.H.useSyncExternalStore(S,j,te)},le.useTransition=function(){return z.H.useTransition()},le.version="19.0.0",le}var e_;function Ed(){return e_||(e_=1,kf.exports=fE()),kf.exports}var we=Ed();const dE=_0(we);var Mf={exports:{}},wr={},Df={exports:{}},If={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function hE(){return t_||(t_=1,(function(s){function e(B,Q){var F=B.length;B.push(Q);e:for(;0<F;){var V=F-1>>>1,S=B[V];if(0<o(S,Q))B[V]=Q,B[F]=S,F=V;else break e}}function i(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],F=B.pop();if(F!==Q){B[0]=F;e:for(var V=0,S=B.length,j=S>>>1;V<j;){var te=2*(V+1)-1,$=B[te],G=te+1,_e=B[G];if(0>o($,F))G<S&&0>o(_e,$)?(B[V]=_e,B[G]=F,V=G):(B[V]=$,B[te]=F,V=te);else if(G<S&&0>o(_e,F))B[V]=_e,B[G]=F,V=G;else break e}}return Q}function o(B,Q){var F=B.sortIndex-Q.sortIndex;return F!==0?F:B.id-Q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var g=[],p=[],b=1,E=null,x=3,R=!1,P=!1,J=!1,re=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function U(B){for(var Q=i(p);Q!==null;){if(Q.callback===null)r(p);else if(Q.startTime<=B)r(p),Q.sortIndex=Q.expirationTime,e(g,Q);else break;Q=i(p)}}function H(B){if(J=!1,U(B),!P)if(i(g)!==null)P=!0,_t();else{var Q=i(p);Q!==null&&X(H,Q.startTime-B)}}var z=!1,ee=-1,Se=5,je=-1;function W(){return!(s.unstable_now()-je<Se)}function oe(){if(z){var B=s.unstable_now();je=B;var Q=!0;try{e:{P=!1,J&&(J=!1,I(ee),ee=-1),R=!0;var F=x;try{t:{for(U(B),E=i(g);E!==null&&!(E.expirationTime>B&&W());){var V=E.callback;if(typeof V=="function"){E.callback=null,x=E.priorityLevel;var S=V(E.expirationTime<=B);if(B=s.unstable_now(),typeof S=="function"){E.callback=S,U(B),Q=!0;break t}E===i(g)&&r(g),U(B)}else r(g);E=i(g)}if(E!==null)Q=!0;else{var j=i(p);j!==null&&X(H,j.startTime-B),Q=!1}}break e}finally{E=null,x=F,R=!1}Q=void 0}}finally{Q?ve():z=!1}}}var ve;if(typeof D=="function")ve=function(){D(oe)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,Qe=Fe.port2;Fe.port1.onmessage=oe,ve=function(){Qe.postMessage(null)}}else ve=function(){re(oe,0)};function _t(){z||(z=!0,ve())}function X(B,Q){ee=re(function(){B(s.unstable_now())},Q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(B){B.callback=null},s.unstable_continueExecution=function(){P||R||(P=!0,_t())},s.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<B?Math.floor(1e3/B):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_getFirstCallbackNode=function(){return i(g)},s.unstable_next=function(B){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var F=x;x=Q;try{return B()}finally{x=F}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var F=x;x=B;try{return Q()}finally{x=F}},s.unstable_scheduleCallback=function(B,Q,F){var V=s.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?V+F:V):F=V,B){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=F+S,B={id:b++,callback:Q,priorityLevel:B,startTime:F,expirationTime:S,sortIndex:-1},F>V?(B.sortIndex=F,e(p,B),i(g)===null&&B===i(p)&&(J?(I(ee),ee=-1):J=!0,X(H,F-V))):(B.sortIndex=S,e(g,B),P||R||(P=!0,_t())),B},s.unstable_shouldYield=W,s.unstable_wrapCallback=function(B){var Q=x;return function(){var F=x;x=Q;try{return B.apply(this,arguments)}finally{x=F}}}})(If)),If}var n_;function mE(){return n_||(n_=1,Df.exports=hE()),Df.exports}var Lf={exports:{}},gt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function pE(){if(i_)return gt;i_=1;var s=Ed();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:p,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gt.createPortal=function(g,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,b)},gt.flushSync=function(g){var p=d.T,b=r.p;try{if(d.T=null,r.p=2,g)return g()}finally{d.T=p,r.p=b,r.d.f()}},gt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},gt.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},gt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var b=p.as,E=m(b,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:x,fetchPriority:R}):b==="script"&&r.d.X(g,{crossOrigin:E,integrity:x,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},gt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},gt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,E=m(b,p.crossOrigin);r.d.L(g,b,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},gt.preloadModule=function(g,p){if(typeof g=="string")if(p){var b=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},gt.requestFormReset=function(g){r.d.r(g)},gt.unstable_batchedUpdates=function(g,p){return g(p)},gt.useFormState=function(g,p,b){return d.H.useFormState(g,p,b)},gt.useFormStatus=function(){return d.H.useHostTransitionStatus()},gt.version="19.0.0",gt}var s_;function gE(){if(s_)return Lf.exports;s_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Lf.exports=pE(),Lf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function _E(){if(a_)return wr;a_=1;var s=mE(),e=Ed(),i=gE();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var u=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),R=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),H=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function ee(t){return t===null||typeof t!="object"?null:(t=z&&t[z]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Symbol.for("react.client.reference");function je(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Se?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case g:return"Fragment";case m:return"Portal";case b:return"Profiler";case p:return"StrictMode";case J:return"Suspense";case re:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R:return(t.displayName||"Context")+".Provider";case x:return(t._context.displayName||"Context")+".Consumer";case P:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return n=t.displayName||null,n!==null?n:je(t.type)||"Memo";case D:n=t._payload,t=t._init;try{return je(t(n))}catch{}}return null}var W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=Object.assign,ve,Fe;function Qe(t){if(ve===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);ve=n&&n[1]||"",Fe=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+t+Fe}var _t=!1;function X(t,n){if(!t||_t)return"";_t=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var L=function(){throw Error()};if(Object.defineProperty(L.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(L,[])}catch(O){var A=O}Reflect.construct(t,[],L)}else{try{L.call()}catch(O){A=O}t.call(L.prototype)}}else{try{throw Error()}catch(O){A=O}(L=t())&&typeof L.catch=="function"&&L.catch(function(){})}}catch(O){if(O&&A&&typeof O.stack=="string")return[O.stack,A.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),h=f[0],y=f[1];if(h&&y){var v=h.split(`
`),w=y.split(`
`);for(c=l=0;l<v.length&&!v[l].includes("DetermineComponentFrameRoot");)l++;for(;c<w.length&&!w[c].includes("DetermineComponentFrameRoot");)c++;if(l===v.length||c===w.length)for(l=v.length-1,c=w.length-1;1<=l&&0<=c&&v[l]!==w[c];)c--;for(;1<=l&&0<=c;l--,c--)if(v[l]!==w[c]){if(l!==1||c!==1)do if(l--,c--,0>c||v[l]!==w[c]){var k=`
`+v[l].replace(" at new "," at ");return t.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",t.displayName)),k}while(1<=l&&0<=c);break}}}finally{_t=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Qe(a):""}function B(t){switch(t.tag){case 26:case 27:case 5:return Qe(t.type);case 16:return Qe("Lazy");case 13:return Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return t=X(t.type,!1),t;case 11:return t=X(t.type.render,!1),t;case 1:return t=X(t.type,!0),t;default:return""}}function Q(t){try{var n="";do n+=B(t),t=t.return;while(t);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function F(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function V(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function S(t){if(F(t)!==t)throw Error(r(188))}function j(t){var n=t.alternate;if(!n){if(n=F(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,l=n;;){var c=a.return;if(c===null)break;var f=c.alternate;if(f===null){if(l=c.return,l!==null){a=l;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===a)return S(c),t;if(f===l)return S(c),n;f=f.sibling}throw Error(r(188))}if(a.return!==l.return)a=c,l=f;else{for(var h=!1,y=c.child;y;){if(y===a){h=!0,a=c,l=f;break}if(y===l){h=!0,l=c,a=f;break}y=y.sibling}if(!h){for(y=f.child;y;){if(y===a){h=!0,a=f,l=c;break}if(y===l){h=!0,l=f,a=c;break}y=y.sibling}if(!h)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function te(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=te(t),n!==null)return n;t=t.sibling}return null}var $=Array.isArray,G=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},ce=[],yt=-1;function Te(t){return{current:t}}function We(t){0>yt||(t.current=ce[yt],ce[yt]=null,yt--)}function Ue(t,n){yt++,ce[yt]=t.current,t.current=n}var ln=Te(null),Na=Te(null),Yn=Te(null),ll=Te(null);function ol(t,n){switch(Ue(Yn,n),Ue(Na,t),Ue(ln,null),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)&&(n=n.namespaceURI)?Cg(n):0;break;default:if(t=t===8?n.parentNode:n,n=t.tagName,t=t.namespaceURI)t=Cg(t),n=Ng(t,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}We(ln),Ue(ln,n)}function bs(){We(ln),We(Na),We(Yn)}function bc(t){t.memoizedState!==null&&Ue(ll,t);var n=ln.current,a=Ng(n,t.type);n!==a&&(Ue(Na,t),Ue(ln,a))}function cl(t){Na.current===t&&(We(ln),We(Na)),ll.current===t&&(We(ll),vr._currentValue=_e)}var Ec=Object.prototype.hasOwnProperty,xc=s.unstable_scheduleCallback,Sc=s.unstable_cancelCallback,Pv=s.unstable_shouldYield,qv=s.unstable_requestPaint,on=s.unstable_now,Vv=s.unstable_getCurrentPriorityLevel,ph=s.unstable_ImmediatePriority,gh=s.unstable_UserBlockingPriority,ul=s.unstable_NormalPriority,Gv=s.unstable_LowPriority,_h=s.unstable_IdlePriority,Yv=s.log,Fv=s.unstable_setDisableYieldValue,Aa=null,Ot=null;function Qv(t){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Aa,t,void 0,(t.current.flags&128)===128)}catch{}}function Fn(t){if(typeof Yv=="function"&&Fv(t),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(Aa,t)}catch{}}var kt=Math.clz32?Math.clz32:Wv,Xv=Math.log,Kv=Math.LN2;function Wv(t){return t>>>=0,t===0?32:31-(Xv(t)/Kv|0)|0}var fl=128,dl=4194304;function Ui(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function hl(t,n){var a=t.pendingLanes;if(a===0)return 0;var l=0,c=t.suspendedLanes,f=t.pingedLanes,h=t.warmLanes;t=t.finishedLanes!==0;var y=a&134217727;return y!==0?(a=y&~c,a!==0?l=Ui(a):(f&=y,f!==0?l=Ui(f):t||(h=y&~h,h!==0&&(l=Ui(h))))):(y=a&~c,y!==0?l=Ui(y):f!==0?l=Ui(f):t||(h=a&~h,h!==0&&(l=Ui(h)))),l===0?0:n!==0&&n!==l&&(n&c)===0&&(c=l&-l,h=n&-n,c>=h||c===32&&(h&4194176)!==0)?n:l}function Ra(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Zv(t,n){switch(t){case 1:case 2:case 4:case 8:return n+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yh(){var t=fl;return fl<<=1,(fl&4194176)===0&&(fl=128),t}function vh(){var t=dl;return dl<<=1,(dl&62914560)===0&&(dl=4194304),t}function Tc(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function Oa(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $v(t,n,a,l,c,f){var h=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var y=t.entanglements,v=t.expirationTimes,w=t.hiddenUpdates;for(a=h&~a;0<a;){var k=31-kt(a),L=1<<k;y[k]=0,v[k]=-1;var A=w[k];if(A!==null)for(w[k]=null,k=0;k<A.length;k++){var O=A[k];O!==null&&(O.lane&=-536870913)}a&=~L}l!==0&&bh(t,l,0),f!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=f&~(h&~n))}function bh(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-kt(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194218}function Eh(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-kt(a),c=1<<l;c&n|t[l]&n&&(t[l]|=n),a&=~c}}function xh(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Sh(){var t=G.p;return t!==0?t:(t=window.event,t===void 0?32:Yg(t.type))}function Jv(t,n){var a=G.p;try{return G.p=t,n()}finally{G.p=a}}var Qn=Math.random().toString(36).slice(2),mt="__reactFiber$"+Qn,wt="__reactProps$"+Qn,Es="__reactContainer$"+Qn,wc="__reactEvents$"+Qn,e1="__reactListeners$"+Qn,t1="__reactHandles$"+Qn,Th="__reactResources$"+Qn,ka="__reactMarker$"+Qn;function Cc(t){delete t[mt],delete t[wt],delete t[wc],delete t[e1],delete t[t1]}function ji(t){var n=t[mt];if(n)return n;for(var a=t.parentNode;a;){if(n=a[Es]||a[mt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Og(t);t!==null;){if(a=t[mt])return a;t=Og(t)}return n}t=a,a=t.parentNode}return null}function xs(t){if(t=t[mt]||t[Es]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function Ma(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function Ss(t){var n=t[Th];return n||(n=t[Th]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function it(t){t[ka]=!0}var wh=new Set,Ch={};function zi(t,n){Ts(t,n),Ts(t+"Capture",n)}function Ts(t,n){for(Ch[t]=n,t=0;t<n.length;t++)wh.add(n[t])}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),n1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nh={},Ah={};function i1(t){return Ec.call(Ah,t)?!0:Ec.call(Nh,t)?!1:n1.test(t)?Ah[t]=!0:(Nh[t]=!0,!1)}function ml(t,n,a){if(i1(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function pl(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function bn(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function jt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rh(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function s1(t){var n=Rh(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(h){l=""+h,f.call(this,h)}}),Object.defineProperty(t,n,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(h){l=""+h},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function gl(t){t._valueTracker||(t._valueTracker=s1(t))}function Oh(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Rh(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function _l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var a1=/[\n"\\]/g;function zt(t){return t.replace(a1,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Nc(t,n,a,l,c,f,h,y){t.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?t.type=h:t.removeAttribute("type"),n!=null?h==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+jt(n)):t.value!==""+jt(n)&&(t.value=""+jt(n)):h!=="submit"&&h!=="reset"||t.removeAttribute("value"),n!=null?Ac(t,h,jt(n)):a!=null?Ac(t,h,jt(a)):l!=null&&t.removeAttribute("value"),c==null&&f!=null&&(t.defaultChecked=!!f),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.name=""+jt(y):t.removeAttribute("name")}function kh(t,n,a,l,c,f,h,y){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;a=a!=null?""+jt(a):"",n=n!=null?""+jt(n):a,y||n===t.value||(t.value=n),t.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=y?t.checked:!!l,t.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.name=h)}function Ac(t,n,a){n==="number"&&_l(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ws(t,n,a,l){if(t=t.options,n){n={};for(var c=0;c<a.length;c++)n["$"+a[c]]=!0;for(a=0;a<t.length;a++)c=n.hasOwnProperty("$"+t[a].value),t[a].selected!==c&&(t[a].selected=c),c&&l&&(t[a].defaultSelected=!0)}else{for(a=""+jt(a),n=null,c=0;c<t.length;c++){if(t[c].value===a){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function Mh(t,n,a){if(n!=null&&(n=""+jt(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+jt(a):""}function Dh(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if($(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=jt(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Cs(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var r1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ih(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||r1.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function Lh(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&a[c]!==l&&Ih(t,c,l)}else for(var f in n)n.hasOwnProperty(f)&&Ih(t,f,n[f])}function Rc(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),o1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yl(t){return o1.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Oc=null;function kc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ns=null,As=null;function Uh(t){var n=xs(t);if(n&&(t=n.stateNode)){var a=t[wt]||null;e:switch(t=n.stateNode,n.type){case"input":if(Nc(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+zt(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var c=l[wt]||null;if(!c)throw Error(r(90));Nc(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&Oh(l)}break e;case"textarea":Mh(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&ws(t,!!a.multiple,n,!1)}}}var Mc=!1;function jh(t,n,a){if(Mc)return t(n,a);Mc=!0;try{var l=t(n);return l}finally{if(Mc=!1,(Ns!==null||As!==null)&&(to(),Ns&&(n=Ns,t=As,As=Ns=null,Uh(n),t)))for(n=0;n<t.length;n++)Uh(t[n])}}function Da(t,n){var a=t.stateNode;if(a===null)return null;var l=a[wt]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Dc=!1;if(vn)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){Dc=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{Dc=!1}var Xn=null,Ic=null,vl=null;function zh(){if(vl)return vl;var t,n=Ic,a=n.length,l,c="value"in Xn?Xn.value:Xn.textContent,f=c.length;for(t=0;t<a&&n[t]===c[t];t++);var h=a-t;for(l=1;l<=h&&n[a-l]===c[f-l];l++);return vl=c.slice(t,1<l?1-l:void 0)}function bl(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function El(){return!0}function Hh(){return!1}function Ct(t){function n(a,l,c,f,h){this._reactName=a,this._targetInst=c,this.type=l,this.nativeEvent=f,this.target=h,this.currentTarget=null;for(var y in t)t.hasOwnProperty(y)&&(a=t[y],this[y]=a?a(f):f[y]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?El:Hh,this.isPropagationStopped=Hh,this}return oe(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),n}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=Ct(Hi),La=oe({},Hi,{view:0,detail:0}),c1=Ct(La),Lc,Uc,Ua,Sl=oe({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ua&&(Ua&&t.type==="mousemove"?(Lc=t.screenX-Ua.screenX,Uc=t.screenY-Ua.screenY):Uc=Lc=0,Ua=t),Lc)},movementY:function(t){return"movementY"in t?t.movementY:Uc}}),Bh=Ct(Sl),u1=oe({},Sl,{dataTransfer:0}),f1=Ct(u1),d1=oe({},La,{relatedTarget:0}),jc=Ct(d1),h1=oe({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),m1=Ct(h1),p1=oe({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),g1=Ct(p1),_1=oe({},Hi,{data:0}),Ph=Ct(_1),y1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E1(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=b1[t])?!!n[t]:!1}function zc(){return E1}var x1=oe({},La,{key:function(t){if(t.key){var n=y1[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=bl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?v1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zc,charCode:function(t){return t.type==="keypress"?bl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),S1=Ct(x1),T1=oe({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qh=Ct(T1),w1=oe({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zc}),C1=Ct(w1),N1=oe({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A1=Ct(N1),R1=oe({},Sl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),O1=Ct(R1),k1=oe({},Hi,{newState:0,oldState:0}),M1=Ct(k1),D1=[9,13,27,32],Hc=vn&&"CompositionEvent"in window,ja=null;vn&&"documentMode"in document&&(ja=document.documentMode);var I1=vn&&"TextEvent"in window&&!ja,Vh=vn&&(!Hc||ja&&8<ja&&11>=ja),Gh=" ",Yh=!1;function Fh(t,n){switch(t){case"keyup":return D1.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rs=!1;function L1(t,n){switch(t){case"compositionend":return Qh(n);case"keypress":return n.which!==32?null:(Yh=!0,Gh);case"textInput":return t=n.data,t===Gh&&Yh?null:t;default:return null}}function U1(t,n){if(Rs)return t==="compositionend"||!Hc&&Fh(t,n)?(t=zh(),vl=Ic=Xn=null,Rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Vh&&n.locale!=="ko"?null:n.data;default:return null}}var j1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!j1[t.type]:n==="textarea"}function Kh(t,n,a,l){Ns?As?As.push(l):As=[l]:Ns=l,n=ro(n,"onChange"),0<n.length&&(a=new xl("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var za=null,Ha=null;function z1(t){Eg(t,0)}function Tl(t){var n=Ma(t);if(Oh(n))return t}function Wh(t,n){if(t==="change")return n}var Zh=!1;if(vn){var Bc;if(vn){var Pc="oninput"in document;if(!Pc){var $h=document.createElement("div");$h.setAttribute("oninput","return;"),Pc=typeof $h.oninput=="function"}Bc=Pc}else Bc=!1;Zh=Bc&&(!document.documentMode||9<document.documentMode)}function Jh(){za&&(za.detachEvent("onpropertychange",em),Ha=za=null)}function em(t){if(t.propertyName==="value"&&Tl(Ha)){var n=[];Kh(n,Ha,t,kc(t)),jh(z1,n)}}function H1(t,n,a){t==="focusin"?(Jh(),za=n,Ha=a,za.attachEvent("onpropertychange",em)):t==="focusout"&&Jh()}function B1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tl(Ha)}function P1(t,n){if(t==="click")return Tl(n)}function q1(t,n){if(t==="input"||t==="change")return Tl(n)}function V1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Mt=typeof Object.is=="function"?Object.is:V1;function Ba(t,n){if(Mt(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var c=a[l];if(!Ec.call(n,c)||!Mt(t[c],n[c]))return!1}return!0}function tm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nm(t,n){var a=tm(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=tm(a)}}function im(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?im(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function sm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=_l(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=_l(t.document)}return n}function qc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function G1(t,n){var a=sm(n);n=t.focusedElem;var l=t.selectionRange;if(a!==n&&n&&n.ownerDocument&&im(n.ownerDocument.documentElement,n)){if(l!==null&&qc(n)){if(t=l.start,a=l.end,a===void 0&&(a=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(a,n.value.length);else if(a=(t=n.ownerDocument||document)&&t.defaultView||window,a.getSelection){a=a.getSelection();var c=n.textContent.length,f=Math.min(l.start,c);l=l.end===void 0?f:Math.min(l.end,c),!a.extend&&f>l&&(c=l,l=f,f=c),c=nm(n,f);var h=nm(n,l);c&&h&&(a.rangeCount!==1||a.anchorNode!==c.node||a.anchorOffset!==c.offset||a.focusNode!==h.node||a.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),a.removeAllRanges(),f>l?(a.addRange(t),a.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),a.addRange(t)))}}for(t=[],a=n;a=a.parentNode;)a.nodeType===1&&t.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)a=t[n],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Y1=vn&&"documentMode"in document&&11>=document.documentMode,Os=null,Vc=null,Pa=null,Gc=!1;function am(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gc||Os==null||Os!==_l(l)||(l=Os,"selectionStart"in l&&qc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Pa&&Ba(Pa,l)||(Pa=l,l=ro(Vc,"onSelect"),0<l.length&&(n=new xl("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=Os)))}function Bi(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var ks={animationend:Bi("Animation","AnimationEnd"),animationiteration:Bi("Animation","AnimationIteration"),animationstart:Bi("Animation","AnimationStart"),transitionrun:Bi("Transition","TransitionRun"),transitionstart:Bi("Transition","TransitionStart"),transitioncancel:Bi("Transition","TransitionCancel"),transitionend:Bi("Transition","TransitionEnd")},Yc={},rm={};vn&&(rm=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function Pi(t){if(Yc[t])return Yc[t];if(!ks[t])return t;var n=ks[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in rm)return Yc[t]=n[a];return t}var lm=Pi("animationend"),om=Pi("animationiteration"),cm=Pi("animationstart"),F1=Pi("transitionrun"),Q1=Pi("transitionstart"),X1=Pi("transitioncancel"),um=Pi("transitionend"),fm=new Map,dm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Zt(t,n){fm.set(t,n),zi(n,[t])}var Ht=[],Ms=0,Fc=0;function wl(){for(var t=Ms,n=Fc=Ms=0;n<t;){var a=Ht[n];Ht[n++]=null;var l=Ht[n];Ht[n++]=null;var c=Ht[n];Ht[n++]=null;var f=Ht[n];if(Ht[n++]=null,l!==null&&c!==null){var h=l.pending;h===null?c.next=c:(c.next=h.next,h.next=c),l.pending=c}f!==0&&hm(a,c,f)}}function Cl(t,n,a,l){Ht[Ms++]=t,Ht[Ms++]=n,Ht[Ms++]=a,Ht[Ms++]=l,Fc|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Qc(t,n,a,l){return Cl(t,n,a,l),Nl(t)}function Kn(t,n){return Cl(t,null,null,n),Nl(t)}function hm(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var c=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(c=!0)),t=f,f=f.return;c&&n!==null&&t.tag===3&&(f=t.stateNode,c=31-kt(a),f=f.hiddenUpdates,t=f[c],t===null?f[c]=[n]:t.push(n),n.lane=a|536870912)}function Nl(t){if(50<dr)throw dr=0,Ju=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Ds={},mm=new WeakMap;function Bt(t,n){if(typeof t=="object"&&t!==null){var a=mm.get(t);return a!==void 0?a:(n={value:t,source:n,stack:Q(n)},mm.set(t,n),n)}return{value:t,source:n,stack:Q(n)}}var Is=[],Ls=0,Al=null,Rl=0,Pt=[],qt=0,qi=null,En=1,xn="";function Vi(t,n){Is[Ls++]=Rl,Is[Ls++]=Al,Al=t,Rl=n}function pm(t,n,a){Pt[qt++]=En,Pt[qt++]=xn,Pt[qt++]=qi,qi=t;var l=En;t=xn;var c=32-kt(l)-1;l&=~(1<<c),a+=1;var f=32-kt(n)+c;if(30<f){var h=c-c%5;f=(l&(1<<h)-1).toString(32),l>>=h,c-=h,En=1<<32-kt(n)+c|a<<c|l,xn=f+t}else En=1<<f|a<<c|l,xn=t}function Xc(t){t.return!==null&&(Vi(t,1),pm(t,1,0))}function Kc(t){for(;t===Al;)Al=Is[--Ls],Is[Ls]=null,Rl=Is[--Ls],Is[Ls]=null;for(;t===qi;)qi=Pt[--qt],Pt[qt]=null,xn=Pt[--qt],Pt[qt]=null,En=Pt[--qt],Pt[qt]=null}var vt=null,ft=null,be=!1,$t=null,cn=!1,Wc=Error(r(519));function Gi(t){var n=Error(r(418,""));throw Ga(Bt(n,t)),Wc}function gm(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[mt]=t,n[wt]=l,a){case"dialog":ge("cancel",n),ge("close",n);break;case"iframe":case"object":case"embed":ge("load",n);break;case"video":case"audio":for(a=0;a<mr.length;a++)ge(mr[a],n);break;case"source":ge("error",n);break;case"img":case"image":case"link":ge("error",n),ge("load",n);break;case"details":ge("toggle",n);break;case"input":ge("invalid",n),kh(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),gl(n);break;case"select":ge("invalid",n);break;case"textarea":ge("invalid",n),Dh(n,l.value,l.defaultValue,l.children),gl(n)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||wg(n.textContent,a)?(l.popover!=null&&(ge("beforetoggle",n),ge("toggle",n)),l.onScroll!=null&&ge("scroll",n),l.onScrollEnd!=null&&ge("scrollend",n),l.onClick!=null&&(n.onclick=lo),n=!0):n=!1,n||Gi(t)}function _m(t){for(vt=t.return;vt;)switch(vt.tag){case 3:case 27:cn=!0;return;case 5:case 13:cn=!1;return;default:vt=vt.return}}function qa(t){if(t!==vt)return!1;if(!be)return _m(t),be=!0,!1;var n=!1,a;if((a=t.tag!==3&&t.tag!==27)&&((a=t.tag===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||_f(t.type,t.memoizedProps)),a=!a),a&&(n=!0),n&&ft&&Gi(t),_m(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(n===0){ft=en(t.nextSibling);break e}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;t=t.nextSibling}ft=null}}else ft=vt?en(t.stateNode.nextSibling):null;return!0}function Va(){ft=vt=null,be=!1}function Ga(t){$t===null?$t=[t]:$t.push(t)}var Ya=Error(r(460)),ym=Error(r(474)),Zc={then:function(){}};function vm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ol(){}function bm(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(Ol,Ol),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,t===Ya?Error(r(483)):t;default:if(typeof n.status=="string")n.then(Ol,Ol);else{if(t=De,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,t===Ya?Error(r(483)):t}throw Fa=n,Ya}}var Fa=null;function Em(){if(Fa===null)throw Error(r(459));var t=Fa;return Fa=null,t}var Us=null,Qa=0;function kl(t){var n=Qa;return Qa+=1,Us===null&&(Us=[]),bm(Us,t,n)}function Xa(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Ml(t,n){throw n.$$typeof===u?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function xm(t){var n=t._init;return n(t._payload)}function Sm(t){function n(C,T){if(t){var N=C.deletions;N===null?(C.deletions=[T],C.flags|=16):N.push(T)}}function a(C,T){if(!t)return null;for(;T!==null;)n(C,T),T=T.sibling;return null}function l(C){for(var T=new Map;C!==null;)C.key!==null?T.set(C.key,C):T.set(C.index,C),C=C.sibling;return T}function c(C,T){return C=li(C,T),C.index=0,C.sibling=null,C}function f(C,T,N){return C.index=N,t?(N=C.alternate,N!==null?(N=N.index,N<T?(C.flags|=33554434,T):N):(C.flags|=33554434,T)):(C.flags|=1048576,T)}function h(C){return t&&C.alternate===null&&(C.flags|=33554434),C}function y(C,T,N,M){return T===null||T.tag!==6?(T=Yu(N,C.mode,M),T.return=C,T):(T=c(T,N),T.return=C,T)}function v(C,T,N,M){var Y=N.type;return Y===g?k(C,T,N.props.children,M,N.key):T!==null&&(T.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===D&&xm(Y)===T.type)?(T=c(T,N.props),Xa(T,N),T.return=C,T):(T=Wl(N.type,N.key,N.props,null,C.mode,M),Xa(T,N),T.return=C,T)}function w(C,T,N,M){return T===null||T.tag!==4||T.stateNode.containerInfo!==N.containerInfo||T.stateNode.implementation!==N.implementation?(T=Fu(N,C.mode,M),T.return=C,T):(T=c(T,N.children||[]),T.return=C,T)}function k(C,T,N,M,Y){return T===null||T.tag!==7?(T=es(N,C.mode,M,Y),T.return=C,T):(T=c(T,N),T.return=C,T)}function L(C,T,N){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Yu(""+T,C.mode,N),T.return=C,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case d:return N=Wl(T.type,T.key,T.props,null,C.mode,N),Xa(N,T),N.return=C,N;case m:return T=Fu(T,C.mode,N),T.return=C,T;case D:var M=T._init;return T=M(T._payload),L(C,T,N)}if($(T)||ee(T))return T=es(T,C.mode,N,null),T.return=C,T;if(typeof T.then=="function")return L(C,kl(T),N);if(T.$$typeof===R)return L(C,Ql(C,T),N);Ml(C,T)}return null}function A(C,T,N,M){var Y=T!==null?T.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return Y!==null?null:y(C,T,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case d:return N.key===Y?v(C,T,N,M):null;case m:return N.key===Y?w(C,T,N,M):null;case D:return Y=N._init,N=Y(N._payload),A(C,T,N,M)}if($(N)||ee(N))return Y!==null?null:k(C,T,N,M,null);if(typeof N.then=="function")return A(C,T,kl(N),M);if(N.$$typeof===R)return A(C,T,Ql(C,N),M);Ml(C,N)}return null}function O(C,T,N,M,Y){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return C=C.get(N)||null,y(T,C,""+M,Y);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case d:return C=C.get(M.key===null?N:M.key)||null,v(T,C,M,Y);case m:return C=C.get(M.key===null?N:M.key)||null,w(T,C,M,Y);case D:var de=M._init;return M=de(M._payload),O(C,T,N,M,Y)}if($(M)||ee(M))return C=C.get(N)||null,k(T,C,M,Y,null);if(typeof M.then=="function")return O(C,T,N,kl(M),Y);if(M.$$typeof===R)return O(C,T,N,Ql(T,M),Y);Ml(T,M)}return null}function K(C,T,N,M){for(var Y=null,de=null,Z=T,ne=T=0,rt=null;Z!==null&&ne<N.length;ne++){Z.index>ne?(rt=Z,Z=null):rt=Z.sibling;var Ee=A(C,Z,N[ne],M);if(Ee===null){Z===null&&(Z=rt);break}t&&Z&&Ee.alternate===null&&n(C,Z),T=f(Ee,T,ne),de===null?Y=Ee:de.sibling=Ee,de=Ee,Z=rt}if(ne===N.length)return a(C,Z),be&&Vi(C,ne),Y;if(Z===null){for(;ne<N.length;ne++)Z=L(C,N[ne],M),Z!==null&&(T=f(Z,T,ne),de===null?Y=Z:de.sibling=Z,de=Z);return be&&Vi(C,ne),Y}for(Z=l(Z);ne<N.length;ne++)rt=O(Z,C,ne,N[ne],M),rt!==null&&(t&&rt.alternate!==null&&Z.delete(rt.key===null?ne:rt.key),T=f(rt,T,ne),de===null?Y=rt:de.sibling=rt,de=rt);return t&&Z.forEach(function(mi){return n(C,mi)}),be&&Vi(C,ne),Y}function ae(C,T,N,M){if(N==null)throw Error(r(151));for(var Y=null,de=null,Z=T,ne=T=0,rt=null,Ee=N.next();Z!==null&&!Ee.done;ne++,Ee=N.next()){Z.index>ne?(rt=Z,Z=null):rt=Z.sibling;var mi=A(C,Z,Ee.value,M);if(mi===null){Z===null&&(Z=rt);break}t&&Z&&mi.alternate===null&&n(C,Z),T=f(mi,T,ne),de===null?Y=mi:de.sibling=mi,de=mi,Z=rt}if(Ee.done)return a(C,Z),be&&Vi(C,ne),Y;if(Z===null){for(;!Ee.done;ne++,Ee=N.next())Ee=L(C,Ee.value,M),Ee!==null&&(T=f(Ee,T,ne),de===null?Y=Ee:de.sibling=Ee,de=Ee);return be&&Vi(C,ne),Y}for(Z=l(Z);!Ee.done;ne++,Ee=N.next())Ee=O(Z,C,ne,Ee.value,M),Ee!==null&&(t&&Ee.alternate!==null&&Z.delete(Ee.key===null?ne:Ee.key),T=f(Ee,T,ne),de===null?Y=Ee:de.sibling=Ee,de=Ee);return t&&Z.forEach(function(oE){return n(C,oE)}),be&&Vi(C,ne),Y}function Ge(C,T,N,M){if(typeof N=="object"&&N!==null&&N.type===g&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case d:e:{for(var Y=N.key;T!==null;){if(T.key===Y){if(Y=N.type,Y===g){if(T.tag===7){a(C,T.sibling),M=c(T,N.props.children),M.return=C,C=M;break e}}else if(T.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===D&&xm(Y)===T.type){a(C,T.sibling),M=c(T,N.props),Xa(M,N),M.return=C,C=M;break e}a(C,T);break}else n(C,T);T=T.sibling}N.type===g?(M=es(N.props.children,C.mode,M,N.key),M.return=C,C=M):(M=Wl(N.type,N.key,N.props,null,C.mode,M),Xa(M,N),M.return=C,C=M)}return h(C);case m:e:{for(Y=N.key;T!==null;){if(T.key===Y)if(T.tag===4&&T.stateNode.containerInfo===N.containerInfo&&T.stateNode.implementation===N.implementation){a(C,T.sibling),M=c(T,N.children||[]),M.return=C,C=M;break e}else{a(C,T);break}else n(C,T);T=T.sibling}M=Fu(N,C.mode,M),M.return=C,C=M}return h(C);case D:return Y=N._init,N=Y(N._payload),Ge(C,T,N,M)}if($(N))return K(C,T,N,M);if(ee(N)){if(Y=ee(N),typeof Y!="function")throw Error(r(150));return N=Y.call(N),ae(C,T,N,M)}if(typeof N.then=="function")return Ge(C,T,kl(N),M);if(N.$$typeof===R)return Ge(C,T,Ql(C,N),M);Ml(C,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,T!==null&&T.tag===6?(a(C,T.sibling),M=c(T,N),M.return=C,C=M):(a(C,T),M=Yu(N,C.mode,M),M.return=C,C=M),h(C)):a(C,T)}return function(C,T,N,M){try{Qa=0;var Y=Ge(C,T,N,M);return Us=null,Y}catch(Z){if(Z===Ya)throw Z;var de=Ft(29,Z,null,C.mode);return de.lanes=M,de.return=C,de}finally{}}}var Yi=Sm(!0),Tm=Sm(!1),js=Te(null),Dl=Te(0);function wm(t,n){t=Dn,Ue(Dl,t),Ue(js,n),Dn=t|n.baseLanes}function $c(){Ue(Dl,Dn),Ue(js,js.current)}function Jc(){Dn=Dl.current,We(js),We(Dl)}var Vt=Te(null),un=null;function Wn(t){var n=t.alternate;Ue(et,et.current&1),Ue(Vt,t),un===null&&(n===null||js.current!==null||n.memoizedState!==null)&&(un=t)}function Cm(t){if(t.tag===22){if(Ue(et,et.current),Ue(Vt,t),un===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(un=t)}}else Zn()}function Zn(){Ue(et,et.current),Ue(Vt,Vt.current)}function Sn(t){We(Vt),un===t&&(un=null),We(et)}var et=Te(0);function Il(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var K1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},W1=s.unstable_scheduleCallback,Z1=s.unstable_NormalPriority,tt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function eu(){return{controller:new K1,data:new Map,refCount:0}}function Ka(t){t.refCount--,t.refCount===0&&W1(Z1,function(){t.controller.abort()})}var Wa=null,tu=0,zs=0,Hs=null;function $1(t,n){if(Wa===null){var a=Wa=[];tu=0,zs=of(),Hs={status:"pending",value:void 0,then:function(l){a.push(l)}}}return tu++,n.then(Nm,Nm),n}function Nm(){if(--tu===0&&Wa!==null){Hs!==null&&(Hs.status="fulfilled");var t=Wa;Wa=null,zs=0,Hs=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function J1(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<a.length;c++)(0,a[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),l}var Am=W.S;W.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&$1(t,n),Am!==null&&Am(t,n)};var Fi=Te(null);function nu(){var t=Fi.current;return t!==null?t:De.pooledCache}function Ll(t,n){n===null?Ue(Fi,Fi.current):Ue(Fi,n.pool)}function Rm(){var t=nu();return t===null?null:{parent:tt._currentValue,pool:t}}var $n=0,ue=null,Ne=null,Ze=null,Ul=!1,Bs=!1,Qi=!1,jl=0,Za=0,Ps=null,eb=0;function Xe(){throw Error(r(321))}function iu(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Mt(t[a],n[a]))return!1;return!0}function su(t,n,a,l,c,f){return $n=f,ue=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,W.H=t===null||t.memoizedState===null?Xi:Jn,Qi=!1,f=a(l,c),Qi=!1,Bs&&(f=km(n,a,l,c)),Om(t),f}function Om(t){W.H=fn;var n=Ne!==null&&Ne.next!==null;if($n=0,Ze=Ne=ue=null,Ul=!1,Za=0,Ps=null,n)throw Error(r(300));t===null||st||(t=t.dependencies,t!==null&&Fl(t)&&(st=!0))}function km(t,n,a,l){ue=t;var c=0;do{if(Bs&&(Ps=null),Za=0,Bs=!1,25<=c)throw Error(r(301));if(c+=1,Ze=Ne=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}W.H=Ki,f=n(a,l)}while(Bs);return f}function tb(){var t=W.H,n=t.useState()[0];return n=typeof n.then=="function"?$a(n):n,t=t.useState()[0],(Ne!==null?Ne.memoizedState:null)!==t&&(ue.flags|=1024),n}function au(){var t=jl!==0;return jl=0,t}function ru(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function lu(t){if(Ul){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Ul=!1}$n=0,Ze=Ne=ue=null,Bs=!1,Za=jl=0,Ps=null}function Nt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?ue.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function $e(){if(Ne===null){var t=ue.alternate;t=t!==null?t.memoizedState:null}else t=Ne.next;var n=Ze===null?ue.memoizedState:Ze.next;if(n!==null)Ze=n,Ne=t;else{if(t===null)throw ue.alternate===null?Error(r(467)):Error(r(310));Ne=t,t={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},Ze===null?ue.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}var zl;zl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function $a(t){var n=Za;return Za+=1,Ps===null&&(Ps=[]),t=bm(Ps,t,n),n=ue,(Ze===null?n.memoizedState:Ze.next)===null&&(n=n.alternate,W.H=n===null||n.memoizedState===null?Xi:Jn),t}function Hl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return $a(t);if(t.$$typeof===R)return pt(t)}throw Error(r(438,String(t)))}function ou(t){var n=null,a=ue.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=ue.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=zl(),ue.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=H;return n.index++,a}function Tn(t,n){return typeof n=="function"?n(t):n}function Bl(t){var n=$e();return cu(n,Ne,t)}function cu(t,n,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var c=t.baseQueue,f=l.pending;if(f!==null){if(c!==null){var h=c.next;c.next=f.next,f.next=h}n.baseQueue=c=f,l.pending=null}if(f=t.baseState,c===null)t.memoizedState=f;else{n=c.next;var y=h=null,v=null,w=n,k=!1;do{var L=w.lane&-536870913;if(L!==w.lane?(ye&L)===L:($n&L)===L){var A=w.revertLane;if(A===0)v!==null&&(v=v.next={lane:0,revertLane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),L===zs&&(k=!0);else if(($n&A)===A){w=w.next,A===zs&&(k=!0);continue}else L={lane:0,revertLane:w.revertLane,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},v===null?(y=v=L,h=f):v=v.next=L,ue.lanes|=A,oi|=A;L=w.action,Qi&&a(f,L),f=w.hasEagerState?w.eagerState:a(f,L)}else A={lane:L,revertLane:w.revertLane,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},v===null?(y=v=A,h=f):v=v.next=A,ue.lanes|=L,oi|=L;w=w.next}while(w!==null&&w!==n);if(v===null?h=f:v.next=y,!Mt(f,t.memoizedState)&&(st=!0,k&&(a=Hs,a!==null)))throw a;t.memoizedState=f,t.baseState=h,t.baseQueue=v,l.lastRenderedState=f}return c===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function uu(t){var n=$e(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,c=a.pending,f=n.memoizedState;if(c!==null){a.pending=null;var h=c=c.next;do f=t(f,h.action),h=h.next;while(h!==c);Mt(f,n.memoizedState)||(st=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,l]}function Mm(t,n,a){var l=ue,c=$e(),f=be;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=n();var h=!Mt((Ne||c).memoizedState,a);if(h&&(c.memoizedState=a,st=!0),c=c.queue,hu(Lm.bind(null,l,c,t),[t]),c.getSnapshot!==n||h||Ze!==null&&Ze.memoizedState.tag&1){if(l.flags|=2048,qs(9,Im.bind(null,l,c,a,n),{destroy:void 0},null),De===null)throw Error(r(349));f||($n&60)!==0||Dm(l,n,a)}return a}function Dm(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=ue.updateQueue,n===null?(n=zl(),ue.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Im(t,n,a,l){n.value=a,n.getSnapshot=l,Um(n)&&jm(t)}function Lm(t,n,a){return a(function(){Um(n)&&jm(t)})}function Um(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Mt(t,a)}catch{return!0}}function jm(t){var n=Kn(t,2);n!==null&&bt(n,t,2)}function fu(t){var n=Nt();if(typeof t=="function"){var a=t;if(t=a(),Qi){Fn(!0);try{a()}finally{Fn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:t},n}function zm(t,n,a,l){return t.baseState=a,cu(t,Ne,typeof l=="function"?l:Tn)}function nb(t,n,a,l,c){if(Vl(t))throw Error(r(485));if(t=n.action,t!==null){var f={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){f.listeners.push(h)}};W.T!==null?a(!0):f.isTransition=!1,l(f),a=n.pending,a===null?(f.next=n.pending=f,Hm(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Hm(t,n){var a=n.action,l=n.payload,c=t.state;if(n.isTransition){var f=W.T,h={};W.T=h;try{var y=a(c,l),v=W.S;v!==null&&v(h,y),Bm(t,n,y)}catch(w){du(t,n,w)}finally{W.T=f}}else try{f=a(c,l),Bm(t,n,f)}catch(w){du(t,n,w)}}function Bm(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Pm(t,n,l)},function(l){return du(t,n,l)}):Pm(t,n,a)}function Pm(t,n,a){n.status="fulfilled",n.value=a,qm(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Hm(t,a)))}function du(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,qm(n),n=n.next;while(n!==l)}t.action=null}function qm(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Vm(t,n){return n}function Gm(t,n){if(be){var a=De.formState;if(a!==null){e:{var l=ue;if(be){if(ft){t:{for(var c=ft,f=cn;c.nodeType!==8;){if(!f){c=null;break t}if(c=en(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){ft=en(c.nextSibling),l=c.data==="F!";break e}}Gi(l)}l=!1}l&&(n=a[0])}}return a=Nt(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vm,lastRenderedState:n},a.queue=l,a=op.bind(null,ue,l),l.dispatch=a,l=fu(!1),f=yu.bind(null,ue,!1,l.queue),l=Nt(),c={state:n,dispatch:null,action:t,pending:null},l.queue=c,a=nb.bind(null,ue,c,f,a),c.dispatch=a,l.memoizedState=t,[n,a,!1]}function Ym(t){var n=$e();return Fm(n,Ne,t)}function Fm(t,n,a){n=cu(t,n,Vm)[0],t=Bl(Tn)[0],n=typeof n=="object"&&n!==null&&typeof n.then=="function"?$a(n):n;var l=$e(),c=l.queue,f=c.dispatch;return a!==l.memoizedState&&(ue.flags|=2048,qs(9,ib.bind(null,c,a),{destroy:void 0},null)),[n,f,t]}function ib(t,n){t.action=n}function Qm(t){var n=$e(),a=Ne;if(a!==null)return Fm(n,a,t);$e(),n=n.memoizedState,a=$e();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function qs(t,n,a,l){return t={tag:t,create:n,inst:a,deps:l,next:null},n=ue.updateQueue,n===null&&(n=zl(),ue.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Xm(){return $e().memoizedState}function Pl(t,n,a,l){var c=Nt();ue.flags|=t,c.memoizedState=qs(1|n,a,{destroy:void 0},l===void 0?null:l)}function ql(t,n,a,l){var c=$e();l=l===void 0?null:l;var f=c.memoizedState.inst;Ne!==null&&l!==null&&iu(l,Ne.memoizedState.deps)?c.memoizedState=qs(n,a,f,l):(ue.flags|=t,c.memoizedState=qs(1|n,a,f,l))}function Km(t,n){Pl(8390656,8,t,n)}function hu(t,n){ql(2048,8,t,n)}function Wm(t,n){return ql(4,2,t,n)}function Zm(t,n){return ql(4,4,t,n)}function $m(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Jm(t,n,a){a=a!=null?a.concat([t]):null,ql(4,4,$m.bind(null,n,t),a)}function mu(){}function ep(t,n){var a=$e();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&iu(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function tp(t,n){var a=$e();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&iu(n,l[1]))return l[0];if(l=t(),Qi){Fn(!0);try{t()}finally{Fn(!1)}}return a.memoizedState=[l,n],l}function pu(t,n,a){return a===void 0||($n&1073741824)!==0?t.memoizedState=n:(t.memoizedState=a,t=ig(),ue.lanes|=t,oi|=t,a)}function np(t,n,a,l){return Mt(a,n)?a:js.current!==null?(t=pu(t,a,l),Mt(t,n)||(st=!0),t):($n&42)===0?(st=!0,t.memoizedState=a):(t=ig(),ue.lanes|=t,oi|=t,n)}function ip(t,n,a,l,c){var f=G.p;G.p=f!==0&&8>f?f:8;var h=W.T,y={};W.T=y,yu(t,!1,n,a);try{var v=c(),w=W.S;if(w!==null&&w(y,v),v!==null&&typeof v=="object"&&typeof v.then=="function"){var k=J1(v,l);Ja(t,n,k,Ut(t))}else Ja(t,n,l,Ut(t))}catch(L){Ja(t,n,{then:function(){},status:"rejected",reason:L},Ut())}finally{G.p=f,W.T=h}}function sb(){}function gu(t,n,a,l){if(t.tag!==5)throw Error(r(476));var c=sp(t).queue;ip(t,c,n,_e,a===null?sb:function(){return ap(t),a(l)})}function sp(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:_e},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function ap(t){var n=sp(t).next.queue;Ja(t,n,{},Ut())}function _u(){return pt(vr)}function rp(){return $e().memoizedState}function lp(){return $e().memoizedState}function ab(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Ut();t=ni(a);var l=ii(n,t,a);l!==null&&(bt(l,n,a),nr(l,n,a)),n={cache:eu()},t.payload=n;return}n=n.return}}function rb(t,n,a){var l=Ut();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Vl(t)?cp(n,a):(a=Qc(t,n,a,l),a!==null&&(bt(a,t,l),up(a,n,l)))}function op(t,n,a){var l=Ut();Ja(t,n,a,l)}function Ja(t,n,a,l){var c={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Vl(t))cp(n,c);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var h=n.lastRenderedState,y=f(h,a);if(c.hasEagerState=!0,c.eagerState=y,Mt(y,h))return Cl(t,n,c,0),De===null&&wl(),!1}catch{}finally{}if(a=Qc(t,n,c,l),a!==null)return bt(a,t,l),up(a,n,l),!0}return!1}function yu(t,n,a,l){if(l={lane:2,revertLane:of(),action:l,hasEagerState:!1,eagerState:null,next:null},Vl(t)){if(n)throw Error(r(479))}else n=Qc(t,a,l,2),n!==null&&bt(n,t,2)}function Vl(t){var n=t.alternate;return t===ue||n!==null&&n===ue}function cp(t,n){Bs=Ul=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function up(t,n,a){if((a&4194176)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Eh(t,a)}}var fn={readContext:pt,use:Hl,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe};fn.useCacheRefresh=Xe,fn.useMemoCache=Xe,fn.useHostTransitionStatus=Xe,fn.useFormState=Xe,fn.useActionState=Xe,fn.useOptimistic=Xe;var Xi={readContext:pt,use:Hl,useCallback:function(t,n){return Nt().memoizedState=[t,n===void 0?null:n],t},useContext:pt,useEffect:Km,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,Pl(4194308,4,$m.bind(null,n,t),a)},useLayoutEffect:function(t,n){return Pl(4194308,4,t,n)},useInsertionEffect:function(t,n){Pl(4,2,t,n)},useMemo:function(t,n){var a=Nt();n=n===void 0?null:n;var l=t();if(Qi){Fn(!0);try{t()}finally{Fn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=Nt();if(a!==void 0){var c=a(n);if(Qi){Fn(!0);try{a(n)}finally{Fn(!1)}}}else c=n;return l.memoizedState=l.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},l.queue=t,t=t.dispatch=rb.bind(null,ue,t),[l.memoizedState,t]},useRef:function(t){var n=Nt();return t={current:t},n.memoizedState=t},useState:function(t){t=fu(t);var n=t.queue,a=op.bind(null,ue,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:mu,useDeferredValue:function(t,n){var a=Nt();return pu(a,t,n)},useTransition:function(){var t=fu(!1);return t=ip.bind(null,ue,t.queue,!0,!1),Nt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=ue,c=Nt();if(be){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),De===null)throw Error(r(349));(ye&60)!==0||Dm(l,n,a)}c.memoizedState=a;var f={value:a,getSnapshot:n};return c.queue=f,Km(Lm.bind(null,l,f,t),[t]),l.flags|=2048,qs(9,Im.bind(null,l,f,a,n),{destroy:void 0},null),a},useId:function(){var t=Nt(),n=De.identifierPrefix;if(be){var a=xn,l=En;a=(l&~(1<<32-kt(l)-1)).toString(32)+a,n=":"+n+"R"+a,a=jl++,0<a&&(n+="H"+a.toString(32)),n+=":"}else a=eb++,n=":"+n+"r"+a.toString(32)+":";return t.memoizedState=n},useCacheRefresh:function(){return Nt().memoizedState=ab.bind(null,ue)}};Xi.useMemoCache=ou,Xi.useHostTransitionStatus=_u,Xi.useFormState=Gm,Xi.useActionState=Gm,Xi.useOptimistic=function(t){var n=Nt();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=yu.bind(null,ue,!0,a),a.dispatch=n,[t,n]};var Jn={readContext:pt,use:Hl,useCallback:ep,useContext:pt,useEffect:hu,useImperativeHandle:Jm,useInsertionEffect:Wm,useLayoutEffect:Zm,useMemo:tp,useReducer:Bl,useRef:Xm,useState:function(){return Bl(Tn)},useDebugValue:mu,useDeferredValue:function(t,n){var a=$e();return np(a,Ne.memoizedState,t,n)},useTransition:function(){var t=Bl(Tn)[0],n=$e().memoizedState;return[typeof t=="boolean"?t:$a(t),n]},useSyncExternalStore:Mm,useId:rp};Jn.useCacheRefresh=lp,Jn.useMemoCache=ou,Jn.useHostTransitionStatus=_u,Jn.useFormState=Ym,Jn.useActionState=Ym,Jn.useOptimistic=function(t,n){var a=$e();return zm(a,Ne,t,n)};var Ki={readContext:pt,use:Hl,useCallback:ep,useContext:pt,useEffect:hu,useImperativeHandle:Jm,useInsertionEffect:Wm,useLayoutEffect:Zm,useMemo:tp,useReducer:uu,useRef:Xm,useState:function(){return uu(Tn)},useDebugValue:mu,useDeferredValue:function(t,n){var a=$e();return Ne===null?pu(a,t,n):np(a,Ne.memoizedState,t,n)},useTransition:function(){var t=uu(Tn)[0],n=$e().memoizedState;return[typeof t=="boolean"?t:$a(t),n]},useSyncExternalStore:Mm,useId:rp};Ki.useCacheRefresh=lp,Ki.useMemoCache=ou,Ki.useHostTransitionStatus=_u,Ki.useFormState=Qm,Ki.useActionState=Qm,Ki.useOptimistic=function(t,n){var a=$e();return Ne!==null?zm(a,Ne,t,n):(a.baseState=t,[t,a.queue.dispatch])};function vu(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:oe({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var bu={isMounted:function(t){return(t=t._reactInternals)?F(t)===t:!1},enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Ut(),c=ni(l);c.payload=n,a!=null&&(c.callback=a),n=ii(t,c,l),n!==null&&(bt(n,t,l),nr(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Ut(),c=ni(l);c.tag=1,c.payload=n,a!=null&&(c.callback=a),n=ii(t,c,l),n!==null&&(bt(n,t,l),nr(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Ut(),l=ni(a);l.tag=2,n!=null&&(l.callback=n),n=ii(t,l,a),n!==null&&(bt(n,t,a),nr(n,t,a))}};function fp(t,n,a,l,c,f,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,h):n.prototype&&n.prototype.isPureReactComponent?!Ba(a,l)||!Ba(c,f):!0}function dp(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&bu.enqueueReplaceState(n,n.state,null)}function Wi(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=oe({},a));for(var c in t)a[c]===void 0&&(a[c]=t[c])}return a}var Gl=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function hp(t){Gl(t)}function mp(t){console.error(t)}function pp(t){Gl(t)}function Yl(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function gp(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Eu(t,n,a){return a=ni(a),a.tag=3,a.payload={element:null},a.callback=function(){Yl(t,n)},a}function _p(t){return t=ni(t),t.tag=3,t}function yp(t,n,a,l){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var f=l.value;t.payload=function(){return c(f)},t.callback=function(){gp(n,a,l)}}var h=a.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(t.callback=function(){gp(n,a,l),typeof c!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var y=l.stack;this.componentDidCatch(l.value,{componentStack:y!==null?y:""})})}function lb(t,n,a,l,c){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&tr(n,a,c,!0),a=Vt.current,a!==null){switch(a.tag){case 13:return un===null?nf():a.alternate===null&&Ve===0&&(Ve=3),a.flags&=-257,a.flags|=65536,a.lanes=c,l===Zc?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),af(t,l,c)),!1;case 22:return a.flags|=65536,l===Zc?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),af(t,l,c)),!1}throw Error(r(435,a.tag))}return af(t,l,c),nf(),!1}if(be)return n=Vt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==Wc&&(t=Error(r(422),{cause:l}),Ga(Bt(t,a)))):(l!==Wc&&(n=Error(r(423),{cause:l}),Ga(Bt(n,a))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,l=Bt(l,a),c=Eu(t.stateNode,l,c),Uu(t,c),Ve!==4&&(Ve=2)),!1;var f=Error(r(520),{cause:l});if(f=Bt(f,a),ur===null?ur=[f]:ur.push(f),Ve!==4&&(Ve=2),n===null)return!0;l=Bt(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=c&-c,a.lanes|=t,t=Eu(a.stateNode,l,t),Uu(a,t),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ci===null||!ci.has(f))))return a.flags|=65536,c&=-c,a.lanes|=c,c=_p(c),yp(c,t,a,l),Uu(a,c),!1}a=a.return}while(a!==null);return!1}var vp=Error(r(461)),st=!1;function dt(t,n,a,l){n.child=t===null?Tm(n,null,a,l):Yi(n,t.child,a,l)}function bp(t,n,a,l,c){a=a.render;var f=n.ref;if("ref"in l){var h={};for(var y in l)y!=="ref"&&(h[y]=l[y])}else h=l;return $i(n),l=su(t,n,a,h,f,c),y=au(),t!==null&&!st?(ru(t,n,c),wn(t,n,c)):(be&&y&&Xc(n),n.flags|=1,dt(t,n,l,c),n.child)}function Ep(t,n,a,l,c){if(t===null){var f=a.type;return typeof f=="function"&&!Gu(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,xp(t,n,f,l,c)):(t=Wl(a.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!Ou(t,c)){var h=f.memoizedProps;if(a=a.compare,a=a!==null?a:Ba,a(h,l)&&t.ref===n.ref)return wn(t,n,c)}return n.flags|=1,t=li(f,l),t.ref=n.ref,t.return=n,n.child=t}function xp(t,n,a,l,c){if(t!==null){var f=t.memoizedProps;if(Ba(f,l)&&t.ref===n.ref)if(st=!1,n.pendingProps=l=f,Ou(t,c))(t.flags&131072)!==0&&(st=!0);else return n.lanes=t.lanes,wn(t,n,c)}return xu(t,n,a,l,c)}function Sp(t,n,a){var l=n.pendingProps,c=l.children,f=(n.stateNode._pendingVisibility&2)!==0,h=t!==null?t.memoizedState:null;if(er(t,n),l.mode==="hidden"||f){if((n.flags&128)!==0){if(l=h!==null?h.baseLanes|a:a,t!==null){for(c=n.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~l}else n.childLanes=0,n.child=null;return Tp(t,n,l,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ll(n,h!==null?h.cachePool:null),h!==null?wm(n,h):$c(),Cm(n);else return n.lanes=n.childLanes=536870912,Tp(t,n,h!==null?h.baseLanes|a:a,a)}else h!==null?(Ll(n,h.cachePool),wm(n,h),Zn(),n.memoizedState=null):(t!==null&&Ll(n,null),$c(),Zn());return dt(t,n,c,a),n.child}function Tp(t,n,a,l){var c=nu();return c=c===null?null:{parent:tt._currentValue,pool:c},n.memoizedState={baseLanes:a,cachePool:c},t!==null&&Ll(n,null),$c(),Cm(n),t!==null&&tr(t,n,l,!0),null}function er(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=2097664)}}function xu(t,n,a,l,c){return $i(n),a=su(t,n,a,l,void 0,c),l=au(),t!==null&&!st?(ru(t,n,c),wn(t,n,c)):(be&&l&&Xc(n),n.flags|=1,dt(t,n,a,c),n.child)}function wp(t,n,a,l,c,f){return $i(n),n.updateQueue=null,a=km(n,l,a,c),Om(t),l=au(),t!==null&&!st?(ru(t,n,f),wn(t,n,f)):(be&&l&&Xc(n),n.flags|=1,dt(t,n,a,f),n.child)}function Cp(t,n,a,l,c){if($i(n),n.stateNode===null){var f=Ds,h=a.contextType;typeof h=="object"&&h!==null&&(f=pt(h)),f=new a(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=bu,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},Iu(n),h=a.contextType,f.context=typeof h=="object"&&h!==null?pt(h):Ds,f.state=n.memoizedState,h=a.getDerivedStateFromProps,typeof h=="function"&&(vu(n,a,h,l),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(h=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),h!==f.state&&bu.enqueueReplaceState(f,f.state,null),sr(n,l,f,c),ir(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){f=n.stateNode;var y=n.memoizedProps,v=Wi(a,y);f.props=v;var w=f.context,k=a.contextType;h=Ds,typeof k=="object"&&k!==null&&(h=pt(k));var L=a.getDerivedStateFromProps;k=typeof L=="function"||typeof f.getSnapshotBeforeUpdate=="function",y=n.pendingProps!==y,k||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y||w!==h)&&dp(n,f,l,h),ti=!1;var A=n.memoizedState;f.state=A,sr(n,l,f,c),ir(),w=n.memoizedState,y||A!==w||ti?(typeof L=="function"&&(vu(n,a,L,l),w=n.memoizedState),(v=ti||fp(n,a,v,l,A,w,h))?(k||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=w),f.props=l,f.state=w,f.context=h,l=v):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,Lu(t,n),h=n.memoizedProps,k=Wi(a,h),f.props=k,L=n.pendingProps,A=f.context,w=a.contextType,v=Ds,typeof w=="object"&&w!==null&&(v=pt(w)),y=a.getDerivedStateFromProps,(w=typeof y=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(h!==L||A!==v)&&dp(n,f,l,v),ti=!1,A=n.memoizedState,f.state=A,sr(n,l,f,c),ir();var O=n.memoizedState;h!==L||A!==O||ti||t!==null&&t.dependencies!==null&&Fl(t.dependencies)?(typeof y=="function"&&(vu(n,a,y,l),O=n.memoizedState),(k=ti||fp(n,a,k,l,A,O,v)||t!==null&&t.dependencies!==null&&Fl(t.dependencies))?(w||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,O,v),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,O,v)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||h===t.memoizedProps&&A===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&A===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=O),f.props=l,f.state=O,f.context=v,l=k):(typeof f.componentDidUpdate!="function"||h===t.memoizedProps&&A===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&A===t.memoizedState||(n.flags|=1024),l=!1)}return f=l,er(t,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&l?(n.child=Yi(n,t.child,null,c),n.child=Yi(n,null,a,c)):dt(t,n,a,c),n.memoizedState=f.state,t=n.child):t=wn(t,n,c),t}function Np(t,n,a,l){return Va(),n.flags|=256,dt(t,n,a,l),n.child}var Su={dehydrated:null,treeContext:null,retryLane:0};function Tu(t){return{baseLanes:t,cachePool:Rm()}}function wu(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=Qt),t}function Ap(t,n,a){var l=n.pendingProps,c=!1,f=(n.flags&128)!==0,h;if((h=f)||(h=t!==null&&t.memoizedState===null?!1:(et.current&2)!==0),h&&(c=!0,n.flags&=-129),h=(n.flags&32)!==0,n.flags&=-33,t===null){if(be){if(c?Wn(n):Zn(),be){var y=ft,v;if(v=y){e:{for(v=y,y=cn;v.nodeType!==8;){if(!y){y=null;break e}if(v=en(v.nextSibling),v===null){y=null;break e}}y=v}y!==null?(n.memoizedState={dehydrated:y,treeContext:qi!==null?{id:En,overflow:xn}:null,retryLane:536870912},v=Ft(18,null,null,0),v.stateNode=y,v.return=n,n.child=v,vt=n,ft=null,v=!0):v=!1}v||Gi(n)}if(y=n.memoizedState,y!==null&&(y=y.dehydrated,y!==null))return y.data==="$!"?n.lanes=16:n.lanes=536870912,null;Sn(n)}return y=l.children,l=l.fallback,c?(Zn(),c=n.mode,y=Nu({mode:"hidden",children:y},c),l=es(l,c,a,null),y.return=n,l.return=n,y.sibling=l,n.child=y,c=n.child,c.memoizedState=Tu(a),c.childLanes=wu(t,h,a),n.memoizedState=Su,l):(Wn(n),Cu(n,y))}if(v=t.memoizedState,v!==null&&(y=v.dehydrated,y!==null)){if(f)n.flags&256?(Wn(n),n.flags&=-257,n=Au(t,n,a)):n.memoizedState!==null?(Zn(),n.child=t.child,n.flags|=128,n=null):(Zn(),c=l.fallback,y=n.mode,l=Nu({mode:"visible",children:l.children},y),c=es(c,y,a,null),c.flags|=2,l.return=n,c.return=n,l.sibling=c,n.child=l,Yi(n,t.child,null,a),l=n.child,l.memoizedState=Tu(a),l.childLanes=wu(t,h,a),n.memoizedState=Su,n=c);else if(Wn(n),y.data==="$!"){if(h=y.nextSibling&&y.nextSibling.dataset,h)var w=h.dgst;h=w,l=Error(r(419)),l.stack="",l.digest=h,Ga({value:l,source:null,stack:null}),n=Au(t,n,a)}else if(st||tr(t,n,a,!1),h=(a&t.childLanes)!==0,st||h){if(h=De,h!==null){if(l=a&-a,(l&42)!==0)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=(l&(h.suspendedLanes|a))!==0?0:l,l!==0&&l!==v.retryLane)throw v.retryLane=l,Kn(t,l),bt(h,t,l),vp}y.data==="$?"||nf(),n=Au(t,n,a)}else y.data==="$?"?(n.flags|=128,n.child=t.child,n=xb.bind(null,t),y._reactRetry=n,n=null):(t=v.treeContext,ft=en(y.nextSibling),vt=n,be=!0,$t=null,cn=!1,t!==null&&(Pt[qt++]=En,Pt[qt++]=xn,Pt[qt++]=qi,En=t.id,xn=t.overflow,qi=n),n=Cu(n,l.children),n.flags|=4096);return n}return c?(Zn(),c=l.fallback,y=n.mode,v=t.child,w=v.sibling,l=li(v,{mode:"hidden",children:l.children}),l.subtreeFlags=v.subtreeFlags&31457280,w!==null?c=li(w,c):(c=es(c,y,a,null),c.flags|=2),c.return=n,l.return=n,l.sibling=c,n.child=l,l=c,c=n.child,y=t.child.memoizedState,y===null?y=Tu(a):(v=y.cachePool,v!==null?(w=tt._currentValue,v=v.parent!==w?{parent:w,pool:w}:v):v=Rm(),y={baseLanes:y.baseLanes|a,cachePool:v}),c.memoizedState=y,c.childLanes=wu(t,h,a),n.memoizedState=Su,l):(Wn(n),a=t.child,t=a.sibling,a=li(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(h=n.deletions,h===null?(n.deletions=[t],n.flags|=16):h.push(t)),n.child=a,n.memoizedState=null,a)}function Cu(t,n){return n=Nu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Nu(t,n){return eg(t,n,0,null)}function Au(t,n,a){return Yi(n,t.child,null,a),t=Cu(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Rp(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Mu(t.return,n,a)}function Ru(t,n,a,l,c){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=c)}function Op(t,n,a){var l=n.pendingProps,c=l.revealOrder,f=l.tail;if(dt(t,n,l.children,a),l=et.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rp(t,a,n);else if(t.tag===19)Rp(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(Ue(et,l),c){case"forwards":for(a=n.child,c=null;a!==null;)t=a.alternate,t!==null&&Il(t)===null&&(c=a),a=a.sibling;a=c,a===null?(c=n.child,n.child=null):(c=a.sibling,a.sibling=null),Ru(n,!1,c,a,f);break;case"backwards":for(a=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&Il(t)===null){n.child=c;break}t=c.sibling,c.sibling=a,a=c,c=t}Ru(n,!0,a,null,f);break;case"together":Ru(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function wn(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),oi|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(tr(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=li(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=li(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function Ou(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Fl(t)))}function ob(t,n,a){switch(n.tag){case 3:ol(n,n.stateNode.containerInfo),ei(n,tt,t.memoizedState.cache),Va();break;case 27:case 5:bc(n);break;case 4:ol(n,n.stateNode.containerInfo);break;case 10:ei(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Wn(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Ap(t,n,a):(Wn(n),t=wn(t,n,a),t!==null?t.sibling:null);Wn(n);break;case 19:var c=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(tr(t,n,a,!1),l=(a&n.childLanes)!==0),c){if(l)return Op(t,n,a);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Ue(et,et.current),l)break;return null;case 22:case 23:return n.lanes=0,Sp(t,n,a);case 24:ei(n,tt,t.memoizedState.cache)}return wn(t,n,a)}function kp(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)st=!0;else{if(!Ou(t,a)&&(n.flags&128)===0)return st=!1,ob(t,n,a);st=(t.flags&131072)!==0}else st=!1,be&&(n.flags&1048576)!==0&&pm(n,Rl,n.index);switch(n.lanes=0,n.tag){case 16:e:{t=n.pendingProps;var l=n.elementType,c=l._init;if(l=c(l._payload),n.type=l,typeof l=="function")Gu(l)?(t=Wi(l,t),n.tag=1,n=Cp(null,n,l,t,a)):(n.tag=0,n=xu(null,n,l,t,a));else{if(l!=null){if(c=l.$$typeof,c===P){n.tag=11,n=bp(null,n,l,t,a);break e}else if(c===I){n.tag=14,n=Ep(null,n,l,t,a);break e}}throw n=je(l)||l,Error(r(306,n,""))}}return n;case 0:return xu(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,c=Wi(l,n.pendingProps),Cp(t,n,l,c,a);case 3:e:{if(ol(n,n.stateNode.containerInfo),t===null)throw Error(r(387));var f=n.pendingProps;c=n.memoizedState,l=c.element,Lu(t,n),sr(n,f,null,a);var h=n.memoizedState;if(f=h.cache,ei(n,tt,f),f!==c.cache&&Du(n,[tt],a,!0),ir(),f=h.element,c.isDehydrated)if(c={element:f,isDehydrated:!1,cache:h.cache},n.updateQueue.baseState=c,n.memoizedState=c,n.flags&256){n=Np(t,n,f,a);break e}else if(f!==l){l=Bt(Error(r(424)),n),Ga(l),n=Np(t,n,f,a);break e}else for(ft=en(n.stateNode.containerInfo.firstChild),vt=n,be=!0,$t=null,cn=!0,a=Tm(n,null,f,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Va(),f===l){n=wn(t,n,a);break e}dt(t,n,f,a)}n=n.child}return n;case 26:return er(t,n),t===null?(a=Ig(n.type,null,n.pendingProps,null))?n.memoizedState=a:be||(a=n.type,t=n.pendingProps,l=oo(Yn.current).createElement(a),l[mt]=n,l[wt]=t,ht(l,a,t),it(l),n.stateNode=l):n.memoizedState=Ig(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return bc(n),t===null&&be&&(l=n.stateNode=kg(n.type,n.pendingProps,Yn.current),vt=n,cn=!0,ft=en(l.firstChild)),l=n.pendingProps.children,t!==null||be?dt(t,n,l,a):n.child=Yi(n,null,l,a),er(t,n),n.child;case 5:return t===null&&be&&((c=l=ft)&&(l=zb(l,n.type,n.pendingProps,cn),l!==null?(n.stateNode=l,vt=n,ft=en(l.firstChild),cn=!1,c=!0):c=!1),c||Gi(n)),bc(n),c=n.type,f=n.pendingProps,h=t!==null?t.memoizedProps:null,l=f.children,_f(c,f)?l=null:h!==null&&_f(c,h)&&(n.flags|=32),n.memoizedState!==null&&(c=su(t,n,tb,null,null,a),vr._currentValue=c),er(t,n),dt(t,n,l,a),n.child;case 6:return t===null&&be&&((t=a=ft)&&(a=Hb(a,n.pendingProps,cn),a!==null?(n.stateNode=a,vt=n,ft=null,t=!0):t=!1),t||Gi(n)),null;case 13:return Ap(t,n,a);case 4:return ol(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Yi(n,null,l,a):dt(t,n,l,a),n.child;case 11:return bp(t,n,n.type,n.pendingProps,a);case 7:return dt(t,n,n.pendingProps,a),n.child;case 8:return dt(t,n,n.pendingProps.children,a),n.child;case 12:return dt(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,ei(n,n.type,l.value),dt(t,n,l.children,a),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,$i(n),c=pt(c),l=l(c),n.flags|=1,dt(t,n,l,a),n.child;case 14:return Ep(t,n,n.type,n.pendingProps,a);case 15:return xp(t,n,n.type,n.pendingProps,a);case 19:return Op(t,n,a);case 22:return Sp(t,n,a);case 24:return $i(n),l=pt(tt),t===null?(c=nu(),c===null&&(c=De,f=eu(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=a),c=f),n.memoizedState={parent:l,cache:c},Iu(n),ei(n,tt,c)):((t.lanes&a)!==0&&(Lu(t,n),sr(n,null,null,a),ir()),c=t.memoizedState,f=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),ei(n,tt,l)):(l=f.cache,ei(n,tt,l),l!==c.cache&&Du(n,[tt],a,!0))),dt(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}var ku=Te(null),Zi=null,Cn=null;function ei(t,n,a){Ue(ku,n._currentValue),n._currentValue=a}function Nn(t){t._currentValue=ku.current,We(ku)}function Mu(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Du(t,n,a,l){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var f=c.dependencies;if(f!==null){var h=c.child;f=f.firstContext;e:for(;f!==null;){var y=f;f=c;for(var v=0;v<n.length;v++)if(y.context===n[v]){f.lanes|=a,y=f.alternate,y!==null&&(y.lanes|=a),Mu(f.return,a,t),l||(h=null);break e}f=y.next}}else if(c.tag===18){if(h=c.return,h===null)throw Error(r(341));h.lanes|=a,f=h.alternate,f!==null&&(f.lanes|=a),Mu(h,a,t),h=null}else h=c.child;if(h!==null)h.return=c;else for(h=c;h!==null;){if(h===t){h=null;break}if(c=h.sibling,c!==null){c.return=h.return,h=c;break}h=h.return}c=h}}function tr(t,n,a,l){t=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var h=c.alternate;if(h===null)throw Error(r(387));if(h=h.memoizedProps,h!==null){var y=c.type;Mt(c.pendingProps.value,h.value)||(t!==null?t.push(y):t=[y])}}else if(c===ll.current){if(h=c.alternate,h===null)throw Error(r(387));h.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(vr):t=[vr])}c=c.return}t!==null&&Du(n,t,a,l),n.flags|=262144}function Fl(t){for(t=t.firstContext;t!==null;){if(!Mt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function $i(t){Zi=t,Cn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function pt(t){return Mp(Zi,t)}function Ql(t,n){return Zi===null&&$i(t),Mp(t,n)}function Mp(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Cn===null){if(t===null)throw Error(r(308));Cn=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Cn=Cn.next=n;return a}var ti=!1;function Iu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lu(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ni(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ii(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(He&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=Nl(t),hm(t,null,a),n}return Cl(t,l,n,a),Nl(t)}function nr(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194176)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Eh(t,a)}}function Uu(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var c=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var h={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?c=f=h:f=f.next=h,a=a.next}while(a!==null);f===null?c=f=n:f=f.next=n}else c=f=n;a={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var ju=!1;function ir(){if(ju){var t=Hs;if(t!==null)throw t}}function sr(t,n,a,l){ju=!1;var c=t.updateQueue;ti=!1;var f=c.firstBaseUpdate,h=c.lastBaseUpdate,y=c.shared.pending;if(y!==null){c.shared.pending=null;var v=y,w=v.next;v.next=null,h===null?f=w:h.next=w,h=v;var k=t.alternate;k!==null&&(k=k.updateQueue,y=k.lastBaseUpdate,y!==h&&(y===null?k.firstBaseUpdate=w:y.next=w,k.lastBaseUpdate=v))}if(f!==null){var L=c.baseState;h=0,k=w=v=null,y=f;do{var A=y.lane&-536870913,O=A!==y.lane;if(O?(ye&A)===A:(l&A)===A){A!==0&&A===zs&&(ju=!0),k!==null&&(k=k.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var K=t,ae=y;A=n;var Ge=a;switch(ae.tag){case 1:if(K=ae.payload,typeof K=="function"){L=K.call(Ge,L,A);break e}L=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=ae.payload,A=typeof K=="function"?K.call(Ge,L,A):K,A==null)break e;L=oe({},L,A);break e;case 2:ti=!0}}A=y.callback,A!==null&&(t.flags|=64,O&&(t.flags|=8192),O=c.callbacks,O===null?c.callbacks=[A]:O.push(A))}else O={lane:A,tag:y.tag,payload:y.payload,callback:y.callback,next:null},k===null?(w=k=O,v=L):k=k.next=O,h|=A;if(y=y.next,y===null){if(y=c.shared.pending,y===null)break;O=y,y=O.next,O.next=null,c.lastBaseUpdate=O,c.shared.pending=null}}while(!0);k===null&&(v=L),c.baseState=v,c.firstBaseUpdate=w,c.lastBaseUpdate=k,f===null&&(c.shared.lanes=0),oi|=h,t.lanes=h,t.memoizedState=L}}function Dp(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function Ip(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Dp(a[t],n)}function ar(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var c=l.next;a=c;do{if((a.tag&t)===t){l=void 0;var f=a.create,h=a.inst;l=f(),h.destroy=l}a=a.next}while(a!==c)}}catch(y){ke(n,n.return,y)}}function si(t,n,a){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&t)===t){var h=l.inst,y=h.destroy;if(y!==void 0){h.destroy=void 0,c=n;var v=a;try{y()}catch(w){ke(c,v,w)}}}l=l.next}while(l!==f)}}catch(w){ke(n,n.return,w)}}function Lp(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Ip(n,a)}catch(l){ke(t,t.return,l)}}}function Up(t,n,a){a.props=Wi(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ke(t,n,l)}}function Ji(t,n){try{var a=t.ref;if(a!==null){var l=t.stateNode;switch(t.tag){case 26:case 27:case 5:var c=l;break;default:c=l}typeof a=="function"?t.refCleanup=a(c):a.current=c}}catch(f){ke(t,n,f)}}function Dt(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(c){ke(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){ke(t,n,c)}else a.current=null}function jp(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(c){ke(t,t.return,c)}}function zp(t,n,a){try{var l=t.stateNode;Db(l,t.type,a,n),l[wt]=n}catch(c){ke(t,t.return,c)}}function Hp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function zu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.nodeType===8?a.parentNode.insertBefore(t,n):a.insertBefore(t,n):(a.nodeType===8?(n=a.parentNode,n.insertBefore(t,a)):(n=a,n.appendChild(t)),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=lo));else if(l!==4&&l!==27&&(t=t.child,t!==null))for(Hu(t,n,a),t=t.sibling;t!==null;)Hu(t,n,a),t=t.sibling}function Xl(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&l!==27&&(t=t.child,t!==null))for(Xl(t,n,a),t=t.sibling;t!==null;)Xl(t,n,a),t=t.sibling}var An=!1,qe=!1,Bu=!1,Bp=typeof WeakSet=="function"?WeakSet:Set,at=null,Pp=!1;function cb(t,n){if(t=t.containerInfo,pf=po,t=sm(t),qc(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var h=0,y=-1,v=-1,w=0,k=0,L=t,A=null;t:for(;;){for(var O;L!==a||c!==0&&L.nodeType!==3||(y=h+c),L!==f||l!==0&&L.nodeType!==3||(v=h+l),L.nodeType===3&&(h+=L.nodeValue.length),(O=L.firstChild)!==null;)A=L,L=O;for(;;){if(L===t)break t;if(A===a&&++w===c&&(y=h),A===f&&++k===l&&(v=h),(O=L.nextSibling)!==null)break;L=A,A=L.parentNode}L=O}a=y===-1||v===-1?null:{start:y,end:v}}else a=null}a=a||{start:0,end:0}}else a=null;for(gf={focusedElem:t,selectionRange:a},po=!1,at=n;at!==null;)if(n=at,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,at=t;else for(;at!==null;){switch(n=at,f=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=n,c=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var K=Wi(a.type,c,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(K,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(ae){ke(a,a.return,ae)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)bf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":bf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,at=t;break}at=n.return}return K=Pp,Pp=!1,K}function qp(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:On(t,a),l&4&&ar(5,a);break;case 1:if(On(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(y){ke(a,a.return,y)}else{var c=Wi(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(y){ke(a,a.return,y)}}l&64&&Lp(a),l&512&&Ji(a,a.return);break;case 3:if(On(t,a),l&64&&(l=a.updateQueue,l!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Ip(l,t)}catch(y){ke(a,a.return,y)}}break;case 26:On(t,a),l&512&&Ji(a,a.return);break;case 27:case 5:On(t,a),n===null&&l&4&&jp(a),l&512&&Ji(a,a.return);break;case 12:On(t,a);break;case 13:On(t,a),l&4&&Yp(t,a);break;case 22:if(c=a.memoizedState!==null||An,!c){n=n!==null&&n.memoizedState!==null||qe;var f=An,h=qe;An=c,(qe=n)&&!h?ai(t,a,(a.subtreeFlags&8772)!==0):On(t,a),An=f,qe=h}l&512&&(a.memoizedProps.mode==="manual"?Ji(a,a.return):Dt(a,a.return));break;default:On(t,a)}}function Vp(t){var n=t.alternate;n!==null&&(t.alternate=null,Vp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Cc(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Je=null,It=!1;function Rn(t,n,a){for(a=a.child;a!==null;)Gp(t,n,a),a=a.sibling}function Gp(t,n,a){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Aa,a)}catch{}switch(a.tag){case 26:qe||Dt(a,n),Rn(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:qe||Dt(a,n);var l=Je,c=It;for(Je=a.stateNode,Rn(t,n,a),a=a.stateNode,n=a.attributes;n.length;)a.removeAttributeNode(n[0]);Cc(a),Je=l,It=c;break;case 5:qe||Dt(a,n);case 6:c=Je;var f=It;if(Je=null,Rn(t,n,a),Je=c,It=f,Je!==null)if(It)try{t=Je,l=a.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)}catch(h){ke(a,n,h)}else try{Je.removeChild(a.stateNode)}catch(h){ke(a,n,h)}break;case 18:Je!==null&&(It?(n=Je,a=a.stateNode,n.nodeType===8?vf(n.parentNode,a):n.nodeType===1&&vf(n,a),Sr(n)):vf(Je,a.stateNode));break;case 4:l=Je,c=It,Je=a.stateNode.containerInfo,It=!0,Rn(t,n,a),Je=l,It=c;break;case 0:case 11:case 14:case 15:qe||si(2,a,n),qe||si(4,a,n),Rn(t,n,a);break;case 1:qe||(Dt(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Up(a,n,l)),Rn(t,n,a);break;case 21:Rn(t,n,a);break;case 22:qe||Dt(a,n),qe=(l=qe)||a.memoizedState!==null,Rn(t,n,a),qe=l;break;default:Rn(t,n,a)}}function Yp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Sr(t)}catch(a){ke(n,n.return,a)}}function ub(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Bp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Bp),n;default:throw Error(r(435,t.tag))}}function Pu(t,n){var a=ub(t);n.forEach(function(l){var c=Sb.bind(null,t,l);a.has(l)||(a.add(l),l.then(c,c))})}function Gt(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var c=a[l],f=t,h=n,y=h;e:for(;y!==null;){switch(y.tag){case 27:case 5:Je=y.stateNode,It=!1;break e;case 3:Je=y.stateNode.containerInfo,It=!0;break e;case 4:Je=y.stateNode.containerInfo,It=!0;break e}y=y.return}if(Je===null)throw Error(r(160));Gp(f,h,c),Je=null,It=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Fp(n,t),n=n.sibling}var Jt=null;function Fp(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Gt(n,t),Yt(t),l&4&&(si(3,t,t.return),ar(3,t),si(5,t,t.return));break;case 1:Gt(n,t),Yt(t),l&512&&(qe||a===null||Dt(a,a.return)),l&64&&An&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var c=Jt;if(Gt(n,t),Yt(t),l&512&&(qe||a===null||Dt(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":f=c.getElementsByTagName("title")[0],(!f||f[ka]||f[mt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(l),c.head.insertBefore(f,c.querySelector("head > title"))),ht(f,l,a),f[mt]=t,it(f),l=f;break e;case"link":var h=jg("link","href",c).get(l+(a.href||""));if(h){for(var y=0;y<h.length;y++)if(f=h[y],f.getAttribute("href")===(a.href==null?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){h.splice(y,1);break t}}f=c.createElement(l),ht(f,l,a),c.head.appendChild(f);break;case"meta":if(h=jg("meta","content",c).get(l+(a.content||""))){for(y=0;y<h.length;y++)if(f=h[y],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){h.splice(y,1);break t}}f=c.createElement(l),ht(f,l,a),c.head.appendChild(f);break;default:throw Error(r(468,l))}f[mt]=t,it(f),l=f}t.stateNode=l}else zg(c,t.type,t.stateNode);else t.stateNode=Ug(c,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?zg(c,t.type,t.stateNode):Ug(c,l,t.memoizedProps)):l===null&&t.stateNode!==null&&zp(t,t.memoizedProps,a.memoizedProps)}break;case 27:if(l&4&&t.alternate===null){c=t.stateNode,f=t.memoizedProps;try{for(var v=c.firstChild;v;){var w=v.nextSibling,k=v.nodeName;v[ka]||k==="HEAD"||k==="BODY"||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&v.rel.toLowerCase()==="stylesheet"||c.removeChild(v),v=w}for(var L=t.type,A=c.attributes;A.length;)c.removeAttributeNode(A[0]);ht(c,L,f),c[mt]=t,c[wt]=f}catch(K){ke(t,t.return,K)}}case 5:if(Gt(n,t),Yt(t),l&512&&(qe||a===null||Dt(a,a.return)),t.flags&32){c=t.stateNode;try{Cs(c,"")}catch(K){ke(t,t.return,K)}}l&4&&t.stateNode!=null&&(c=t.memoizedProps,zp(t,c,a!==null?a.memoizedProps:c)),l&1024&&(Bu=!0);break;case 6:if(Gt(n,t),Yt(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(K){ke(t,t.return,K)}}break;case 3:if(fo=null,c=Jt,Jt=co(n.containerInfo),Gt(n,t),Jt=c,Yt(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Sr(n.containerInfo)}catch(K){ke(t,t.return,K)}Bu&&(Bu=!1,Qp(t));break;case 4:l=Jt,Jt=co(t.stateNode.containerInfo),Gt(n,t),Yt(t),Jt=l;break;case 12:Gt(n,t),Yt(t);break;case 13:Gt(n,t),Yt(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Wu=on()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Pu(t,l)));break;case 22:if(l&512&&(qe||a===null||Dt(a,a.return)),v=t.memoizedState!==null,w=a!==null&&a.memoizedState!==null,k=An,L=qe,An=k||v,qe=L||w,Gt(n,t),qe=L,An=k,Yt(t),n=t.stateNode,n._current=t,n._visibility&=-3,n._visibility|=n._pendingVisibility&2,l&8192&&(n._visibility=v?n._visibility&-2:n._visibility|1,v&&(n=An||qe,a===null||w||n||Vs(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(a=null,n=t;;){if(n.tag===5||n.tag===26||n.tag===27){if(a===null){w=a=n;try{if(c=w.stateNode,v)f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{h=w.stateNode,y=w.memoizedProps.style;var O=y!=null&&y.hasOwnProperty("display")?y.display:null;h.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(K){ke(w,w.return,K)}}}else if(n.tag===6){if(a===null){w=n;try{w.stateNode.nodeValue=v?"":w.memoizedProps}catch(K){ke(w,w.return,K)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Pu(t,a))));break;case 19:Gt(n,t),Yt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Pu(t,l)));break;case 21:break;default:Gt(n,t),Yt(t)}}function Yt(t){var n=t.flags;if(n&2){try{if(t.tag!==27){e:{for(var a=t.return;a!==null;){if(Hp(a)){var l=a;break e}a=a.return}throw Error(r(160))}switch(l.tag){case 27:var c=l.stateNode,f=zu(t);Xl(t,f,c);break;case 5:var h=l.stateNode;l.flags&32&&(Cs(h,""),l.flags&=-33);var y=zu(t);Xl(t,y,h);break;case 3:case 4:var v=l.stateNode.containerInfo,w=zu(t);Hu(t,w,v);break;default:throw Error(r(161))}}}catch(k){ke(t,t.return,k)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Qp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Qp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function On(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)qp(t,n.alternate,n),n=n.sibling}function Vs(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:si(4,n,n.return),Vs(n);break;case 1:Dt(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Up(n,n.return,a),Vs(n);break;case 26:case 27:case 5:Dt(n,n.return),Vs(n);break;case 22:Dt(n,n.return),n.memoizedState===null&&Vs(n);break;default:Vs(n)}t=t.sibling}}function ai(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=t,f=n,h=f.flags;switch(f.tag){case 0:case 11:case 15:ai(c,f,a),ar(4,f);break;case 1:if(ai(c,f,a),l=f,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(w){ke(l,l.return,w)}if(l=f,c=l.updateQueue,c!==null){var y=l.stateNode;try{var v=c.shared.hiddenCallbacks;if(v!==null)for(c.shared.hiddenCallbacks=null,c=0;c<v.length;c++)Dp(v[c],y)}catch(w){ke(l,l.return,w)}}a&&h&64&&Lp(f),Ji(f,f.return);break;case 26:case 27:case 5:ai(c,f,a),a&&l===null&&h&4&&jp(f),Ji(f,f.return);break;case 12:ai(c,f,a);break;case 13:ai(c,f,a),a&&h&4&&Yp(c,f);break;case 22:f.memoizedState===null&&ai(c,f,a),Ji(f,f.return);break;default:ai(c,f,a)}n=n.sibling}}function qu(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ka(a))}function Vu(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ka(t))}function ri(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Xp(t,n,a,l),n=n.sibling}function Xp(t,n,a,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:ri(t,n,a,l),c&2048&&ar(9,n);break;case 3:ri(t,n,a,l),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ka(t)));break;case 12:if(c&2048){ri(t,n,a,l),t=n.stateNode;try{var f=n.memoizedProps,h=f.id,y=f.onPostCommit;typeof y=="function"&&y(h,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(v){ke(n,n.return,v)}}else ri(t,n,a,l);break;case 23:break;case 22:f=n.stateNode,n.memoizedState!==null?f._visibility&4?ri(t,n,a,l):rr(t,n):f._visibility&4?ri(t,n,a,l):(f._visibility|=4,Gs(t,n,a,l,(n.subtreeFlags&10256)!==0)),c&2048&&qu(n.alternate,n);break;case 24:ri(t,n,a,l),c&2048&&Vu(n.alternate,n);break;default:ri(t,n,a,l)}}function Gs(t,n,a,l,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=t,h=n,y=a,v=l,w=h.flags;switch(h.tag){case 0:case 11:case 15:Gs(f,h,y,v,c),ar(8,h);break;case 23:break;case 22:var k=h.stateNode;h.memoizedState!==null?k._visibility&4?Gs(f,h,y,v,c):rr(f,h):(k._visibility|=4,Gs(f,h,y,v,c)),c&&w&2048&&qu(h.alternate,h);break;case 24:Gs(f,h,y,v,c),c&&w&2048&&Vu(h.alternate,h);break;default:Gs(f,h,y,v,c)}n=n.sibling}}function rr(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,c=l.flags;switch(l.tag){case 22:rr(a,l),c&2048&&qu(l.alternate,l);break;case 24:rr(a,l),c&2048&&Vu(l.alternate,l);break;default:rr(a,l)}n=n.sibling}}var lr=8192;function Ys(t){if(t.subtreeFlags&lr)for(t=t.child;t!==null;)Kp(t),t=t.sibling}function Kp(t){switch(t.tag){case 26:Ys(t),t.flags&lr&&t.memoizedState!==null&&$b(Jt,t.memoizedState,t.memoizedProps);break;case 5:Ys(t);break;case 3:case 4:var n=Jt;Jt=co(t.stateNode.containerInfo),Ys(t),Jt=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=lr,lr=16777216,Ys(t),lr=n):Ys(t));break;default:Ys(t)}}function Wp(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function or(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];at=l,$p(l,t)}Wp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zp(t),t=t.sibling}function Zp(t){switch(t.tag){case 0:case 11:case 15:or(t),t.flags&2048&&si(9,t,t.return);break;case 3:or(t);break;case 12:or(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&4&&(t.return===null||t.return.tag!==13)?(n._visibility&=-5,Kl(t)):or(t);break;default:or(t)}}function Kl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];at=l,$p(l,t)}Wp(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:si(8,n,n.return),Kl(n);break;case 22:a=n.stateNode,a._visibility&4&&(a._visibility&=-5,Kl(n));break;default:Kl(n)}t=t.sibling}}function $p(t,n){for(;at!==null;){var a=at;switch(a.tag){case 0:case 11:case 15:si(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ka(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,at=l;else e:for(a=t;at!==null;){l=at;var c=l.sibling,f=l.return;if(Vp(l),l===a){at=null;break e}if(c!==null){c.return=f,at=c;break e}at=f}}}function fb(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,n,a,l){return new fb(t,n,a,l)}function Gu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function li(t,n){var a=t.alternate;return a===null?(a=Ft(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&31457280,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Jp(t,n){t.flags&=31457282;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Wl(t,n,a,l,c,f){var h=0;if(l=t,typeof t=="function")Gu(t)&&(h=1);else if(typeof t=="string")h=Wb(t,a,ln.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case g:return es(a.children,c,f,n);case p:h=8,c|=24;break;case b:return t=Ft(12,a,n,c|2),t.elementType=b,t.lanes=f,t;case J:return t=Ft(13,a,n,c),t.elementType=J,t.lanes=f,t;case re:return t=Ft(19,a,n,c),t.elementType=re,t.lanes=f,t;case U:return eg(a,c,f,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E:case R:h=10;break e;case x:h=9;break e;case P:h=11;break e;case I:h=14;break e;case D:h=16,l=null;break e}h=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return n=Ft(h,a,n,c),n.elementType=t,n.type=l,n.lanes=f,n}function es(t,n,a,l){return t=Ft(7,t,l,n),t.lanes=a,t}function eg(t,n,a,l){t=Ft(22,t,l,n),t.elementType=U,t.lanes=a;var c={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var f=c._current;if(f===null)throw Error(r(456));if((c._pendingVisibility&2)===0){var h=Kn(f,2);h!==null&&(c._pendingVisibility|=2,bt(h,f,2))}},attach:function(){var f=c._current;if(f===null)throw Error(r(456));if((c._pendingVisibility&2)!==0){var h=Kn(f,2);h!==null&&(c._pendingVisibility&=-3,bt(h,f,2))}}};return t.stateNode=c,t}function Yu(t,n,a){return t=Ft(6,t,null,n),t.lanes=a,t}function Fu(t,n,a){return n=Ft(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function kn(t){t.flags|=4}function tg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Hg(n)){if(n=Vt.current,n!==null&&((ye&4194176)===ye?un!==null:(ye&62914560)!==ye&&(ye&536870912)===0||n!==un))throw Fa=Zc,ym;t.flags|=8192}}function Zl(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?vh():536870912,t.lanes|=n,Qs|=n)}function cr(t,n){if(!be)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ze(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var c=t.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags&31457280,l|=c.flags&31457280,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function db(t,n,a){var l=n.pendingProps;switch(Kc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(n),null;case 1:return ze(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Nn(tt),bs(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(qa(n)?kn(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,$t!==null&&(ef($t),$t=null))),ze(n),null;case 26:return a=n.memoizedState,t===null?(kn(n),a!==null?(ze(n),tg(n,a)):(ze(n),n.flags&=-16777217)):a?a!==t.memoizedState?(kn(n),ze(n),tg(n,a)):(ze(n),n.flags&=-16777217):(t.memoizedProps!==l&&kn(n),ze(n),n.flags&=-16777217),null;case 27:cl(n),a=Yn.current;var c=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&kn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return ze(n),null}t=ln.current,qa(n)?gm(n):(t=kg(c,l,a),n.stateNode=t,kn(n))}return ze(n),null;case 5:if(cl(n),a=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&kn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return ze(n),null}if(t=ln.current,qa(n))gm(n);else{switch(c=oo(Yn.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?c.createElement(a,{is:l.is}):c.createElement(a)}}t[mt]=n,t[wt]=l;e:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break e;for(;c.sibling===null;){if(c.return===null||c.return===n)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=t;e:switch(ht(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&kn(n)}}return ze(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&kn(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(t=Yn.current,qa(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,c=vt,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}t[mt]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||wg(t.nodeValue,a)),t||Gi(n)}else t=oo(t).createTextNode(l),t[mt]=n,n.stateNode=t}return ze(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=qa(n),l!==null&&l.dehydrated!==null){if(t===null){if(!c)throw Error(r(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));c[mt]=n}else Va(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ze(n),c=!1}else $t!==null&&(ef($t),$t=null),c=!0;if(!c)return n.flags&256?(Sn(n),n):(Sn(n),null)}if(Sn(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==c&&(l.flags|=2048)}return a!==t&&a&&(n.child.flags|=8192),Zl(n,n.updateQueue),ze(n),null;case 4:return bs(),t===null&&df(n.stateNode.containerInfo),ze(n),null;case 10:return Nn(n.type),ze(n),null;case 19:if(We(et),c=n.memoizedState,c===null)return ze(n),null;if(l=(n.flags&128)!==0,f=c.rendering,f===null)if(l)cr(c,!1);else{if(Ve!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=Il(t),f!==null){for(n.flags|=128,cr(c,!1),t=f.updateQueue,n.updateQueue=t,Zl(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)Jp(a,t),a=a.sibling;return Ue(et,et.current&1|2),n.child}t=t.sibling}c.tail!==null&&on()>$l&&(n.flags|=128,l=!0,cr(c,!1),n.lanes=4194304)}else{if(!l)if(t=Il(f),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,Zl(n,t),cr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!be)return ze(n),null}else 2*on()-c.renderingStartTime>$l&&a!==536870912&&(n.flags|=128,l=!0,cr(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(t=c.last,t!==null?t.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=on(),n.sibling=null,t=et.current,Ue(et,l?t&1|2:t&1),n):(ze(n),null);case 22:case 23:return Sn(n),Jc(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(ze(n),n.subtreeFlags&6&&(n.flags|=8192)):ze(n),a=n.updateQueue,a!==null&&Zl(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&We(Fi),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Nn(tt),ze(n),null;case 25:return null}throw Error(r(156,n.tag))}function hb(t,n){switch(Kc(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Nn(tt),bs(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return cl(n),null;case 13:if(Sn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Va()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return We(et),null;case 4:return bs(),null;case 10:return Nn(n.type),null;case 22:case 23:return Sn(n),Jc(),t!==null&&We(Fi),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Nn(tt),null;case 25:return null;default:return null}}function ng(t,n){switch(Kc(n),n.tag){case 3:Nn(tt),bs();break;case 26:case 27:case 5:cl(n);break;case 4:bs();break;case 13:Sn(n);break;case 19:We(et);break;case 10:Nn(n.type);break;case 22:case 23:Sn(n),Jc(),t!==null&&We(Fi);break;case 24:Nn(tt)}}var mb={getCacheForType:function(t){var n=pt(tt),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a}},pb=typeof WeakMap=="function"?WeakMap:Map,He=0,De=null,pe=null,ye=0,Ie=0,Lt=null,Mn=!1,Fs=!1,Qu=!1,Dn=0,Ve=0,oi=0,ts=0,Xu=0,Qt=0,Qs=0,ur=null,dn=null,Ku=!1,Wu=0,$l=1/0,Jl=null,ci=null,eo=!1,ns=null,fr=0,Zu=0,$u=null,dr=0,Ju=null;function Ut(){if((He&2)!==0&&ye!==0)return ye&-ye;if(W.T!==null){var t=zs;return t!==0?t:of()}return Sh()}function ig(){Qt===0&&(Qt=(ye&536870912)===0||be?yh():536870912);var t=Vt.current;return t!==null&&(t.flags|=32),Qt}function bt(t,n,a){(t===De&&Ie===2||t.cancelPendingCommit!==null)&&(Xs(t,0),In(t,ye,Qt,!1)),Oa(t,a),((He&2)===0||t!==De)&&(t===De&&((He&2)===0&&(ts|=a),Ve===4&&In(t,ye,Qt,!1)),hn(t))}function sg(t,n,a){if((He&6)!==0)throw Error(r(327));var l=!a&&(n&60)===0&&(n&t.expiredLanes)===0||Ra(t,n),c=l?yb(t,n):sf(t,n,!0),f=l;do{if(c===0){Fs&&!l&&In(t,n,0,!1);break}else if(c===6)In(t,n,0,!Mn);else{if(a=t.current.alternate,f&&!gb(a)){c=sf(t,n,!1),f=!1;continue}if(c===2){if(f=n,t.errorRecoveryDisabledLanes&f)var h=0;else h=t.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){n=h;e:{var y=t;c=ur;var v=y.current.memoizedState.isDehydrated;if(v&&(Xs(y,h).flags|=256),h=sf(y,h,!1),h!==2){if(Qu&&!v){y.errorRecoveryDisabledLanes|=f,ts|=f,c=4;break e}f=dn,dn=c,f!==null&&ef(f)}c=h}if(f=!1,c!==2)continue}}if(c===1){Xs(t,0),In(t,n,0,!0);break}e:{switch(l=t,c){case 0:case 1:throw Error(r(345));case 4:if((n&4194176)===n){In(l,n,Qt,!Mn);break e}break;case 2:dn=null;break;case 3:case 5:break;default:throw Error(r(329))}if(l.finishedWork=a,l.finishedLanes=n,(n&62914560)===n&&(f=Wu+300-on(),10<f)){if(In(l,n,Qt,!Mn),hl(l,0)!==0)break e;l.timeoutHandle=Ag(ag.bind(null,l,a,dn,Jl,Ku,n,Qt,ts,Qs,Mn,2,-0,0),f);break e}ag(l,a,dn,Jl,Ku,n,Qt,ts,Qs,Mn,0,-0,0)}}break}while(!0);hn(t)}function ef(t){dn===null?dn=t:dn.push.apply(dn,t)}function ag(t,n,a,l,c,f,h,y,v,w,k,L,A){var O=n.subtreeFlags;if((O&8192||(O&16785408)===16785408)&&(yr={stylesheets:null,count:0,unsuspend:Zb},Kp(n),n=Jb(),n!==null)){t.cancelPendingCommit=n(dg.bind(null,t,a,l,c,h,y,v,1,L,A)),In(t,f,h,!w);return}dg(t,a,l,c,h,y,v,k,L,A)}function gb(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var c=a[l],f=c.getSnapshot;c=c.value;try{if(!Mt(f(),c))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function In(t,n,a,l){n&=~Xu,n&=~ts,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var c=n;0<c;){var f=31-kt(c),h=1<<f;l[f]=-1,c&=~h}a!==0&&bh(t,a,n)}function to(){return(He&6)===0?(hr(0),!1):!0}function tf(){if(pe!==null){if(Ie===0)var t=pe.return;else t=pe,Cn=Zi=null,lu(t),Us=null,Qa=0,t=pe;for(;t!==null;)ng(t.alternate,t),t=t.return;pe=null}}function Xs(t,n){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Lb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),tf(),De=t,pe=a=li(t.current,null),ye=n,Ie=0,Lt=null,Mn=!1,Fs=Ra(t,n),Qu=!1,Qs=Qt=Xu=ts=oi=Ve=0,dn=ur=null,Ku=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var c=31-kt(l),f=1<<c;n|=t[c],l&=~f}return Dn=n,wl(),a}function rg(t,n){ue=null,W.H=fn,n===Ya?(n=Em(),Ie=3):n===ym?(n=Em(),Ie=4):Ie=n===vp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Lt=n,pe===null&&(Ve=1,Yl(t,Bt(n,t.current)))}function lg(){var t=W.H;return W.H=fn,t===null?fn:t}function og(){var t=W.A;return W.A=mb,t}function nf(){Ve=4,Mn||(ye&4194176)!==ye&&Vt.current!==null||(Fs=!0),(oi&134217727)===0&&(ts&134217727)===0||De===null||In(De,ye,Qt,!1)}function sf(t,n,a){var l=He;He|=2;var c=lg(),f=og();(De!==t||ye!==n)&&(Jl=null,Xs(t,n)),n=!1;var h=Ve;e:do try{if(Ie!==0&&pe!==null){var y=pe,v=Lt;switch(Ie){case 8:tf(),h=6;break e;case 3:case 2:case 6:Vt.current===null&&(n=!0);var w=Ie;if(Ie=0,Lt=null,Ks(t,y,v,w),a&&Fs){h=0;break e}break;default:w=Ie,Ie=0,Lt=null,Ks(t,y,v,w)}}_b(),h=Ve;break}catch(k){rg(t,k)}while(!0);return n&&t.shellSuspendCounter++,Cn=Zi=null,He=l,W.H=c,W.A=f,pe===null&&(De=null,ye=0,wl()),h}function _b(){for(;pe!==null;)cg(pe)}function yb(t,n){var a=He;He|=2;var l=lg(),c=og();De!==t||ye!==n?(Jl=null,$l=on()+500,Xs(t,n)):Fs=Ra(t,n);e:do try{if(Ie!==0&&pe!==null){n=pe;var f=Lt;t:switch(Ie){case 1:Ie=0,Lt=null,Ks(t,n,f,1);break;case 2:if(vm(f)){Ie=0,Lt=null,ug(n);break}n=function(){Ie===2&&De===t&&(Ie=7),hn(t)},f.then(n,n);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:vm(f)?(Ie=0,Lt=null,ug(n)):(Ie=0,Lt=null,Ks(t,n,f,7));break;case 5:var h=null;switch(pe.tag){case 26:h=pe.memoizedState;case 5:case 27:var y=pe;if(!h||Hg(h)){Ie=0,Lt=null;var v=y.sibling;if(v!==null)pe=v;else{var w=y.return;w!==null?(pe=w,no(w)):pe=null}break t}}Ie=0,Lt=null,Ks(t,n,f,5);break;case 6:Ie=0,Lt=null,Ks(t,n,f,6);break;case 8:tf(),Ve=6;break e;default:throw Error(r(462))}}vb();break}catch(k){rg(t,k)}while(!0);return Cn=Zi=null,W.H=l,W.A=c,He=a,pe!==null?0:(De=null,ye=0,wl(),Ve)}function vb(){for(;pe!==null&&!Pv();)cg(pe)}function cg(t){var n=kp(t.alternate,t,Dn);t.memoizedProps=t.pendingProps,n===null?no(t):pe=n}function ug(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=wp(a,n,n.pendingProps,n.type,void 0,ye);break;case 11:n=wp(a,n,n.pendingProps,n.type.render,n.ref,ye);break;case 5:lu(n);default:ng(a,n),n=pe=Jp(n,Dn),n=kp(a,n,Dn)}t.memoizedProps=t.pendingProps,n===null?no(t):pe=n}function Ks(t,n,a,l){Cn=Zi=null,lu(n),Us=null,Qa=0;var c=n.return;try{if(lb(t,c,n,a,ye)){Ve=1,Yl(t,Bt(a,t.current)),pe=null;return}}catch(f){if(c!==null)throw pe=c,f;Ve=1,Yl(t,Bt(a,t.current)),pe=null;return}n.flags&32768?(be||l===1?t=!0:Fs||(ye&536870912)!==0?t=!1:(Mn=t=!0,(l===2||l===3||l===6)&&(l=Vt.current,l!==null&&l.tag===13&&(l.flags|=16384))),fg(n,t)):no(n)}function no(t){var n=t;do{if((n.flags&32768)!==0){fg(n,Mn);return}t=n.return;var a=db(n.alternate,n,Dn);if(a!==null){pe=a;return}if(n=n.sibling,n!==null){pe=n;return}pe=n=t}while(n!==null);Ve===0&&(Ve=5)}function fg(t,n){do{var a=hb(t.alternate,t);if(a!==null){a.flags&=32767,pe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){pe=t;return}pe=t=a}while(t!==null);Ve=6,pe=null}function dg(t,n,a,l,c,f,h,y,v,w){var k=W.T,L=G.p;try{G.p=2,W.T=null,bb(t,n,a,l,L,c,f,h,y,v,w)}finally{W.T=k,G.p=L}}function bb(t,n,a,l,c,f,h,y){do Ws();while(ns!==null);if((He&6)!==0)throw Error(r(327));var v=t.finishedWork;if(l=t.finishedLanes,v===null)return null;if(t.finishedWork=null,t.finishedLanes=0,v===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var w=v.lanes|v.childLanes;if(w|=Fc,$v(t,l,w,f,h,y),t===De&&(pe=De=null,ye=0),(v.subtreeFlags&10256)===0&&(v.flags&10256)===0||eo||(eo=!0,Zu=w,$u=a,Tb(ul,function(){return Ws(),null})),a=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||a?(a=W.T,W.T=null,f=G.p,G.p=2,h=He,He|=4,cb(t,v),Fp(v,t),G1(gf,t.containerInfo),po=!!pf,gf=pf=null,t.current=v,qp(t,v.alternate,v),qv(),He=h,G.p=f,W.T=a):t.current=v,eo?(eo=!1,ns=t,fr=l):hg(t,w),w=t.pendingLanes,w===0&&(ci=null),Qv(v.stateNode),hn(t),n!==null)for(c=t.onRecoverableError,v=0;v<n.length;v++)w=n[v],c(w.value,{componentStack:w.stack});return(fr&3)!==0&&Ws(),w=t.pendingLanes,(l&4194218)!==0&&(w&42)!==0?t===Ju?dr++:(dr=0,Ju=t):dr=0,hr(0),null}function hg(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Ka(n)))}function Ws(){if(ns!==null){var t=ns,n=Zu;Zu=0;var a=xh(fr),l=W.T,c=G.p;try{if(G.p=32>a?32:a,W.T=null,ns===null)var f=!1;else{a=$u,$u=null;var h=ns,y=fr;if(ns=null,fr=0,(He&6)!==0)throw Error(r(331));var v=He;if(He|=4,Zp(h.current),Xp(h,h.current,y,a),He=v,hr(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Aa,h)}catch{}f=!0}return f}finally{G.p=c,W.T=l,hg(t,n)}}return!1}function mg(t,n,a){n=Bt(a,n),n=Eu(t.stateNode,n,2),t=ii(t,n,2),t!==null&&(Oa(t,2),hn(t))}function ke(t,n,a){if(t.tag===3)mg(t,t,a);else for(;n!==null;){if(n.tag===3){mg(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ci===null||!ci.has(l))){t=Bt(a,t),a=_p(2),l=ii(n,a,2),l!==null&&(yp(a,l,n,t),Oa(l,2),hn(l));break}}n=n.return}}function af(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new pb;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(a)||(Qu=!0,c.add(a),t=Eb.bind(null,t,n,a),n.then(t,t))}function Eb(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,De===t&&(ye&a)===a&&(Ve===4||Ve===3&&(ye&62914560)===ye&&300>on()-Wu?(He&2)===0&&Xs(t,0):Xu|=a,Qs===ye&&(Qs=0)),hn(t)}function pg(t,n){n===0&&(n=vh()),t=Kn(t,n),t!==null&&(Oa(t,n),hn(t))}function xb(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),pg(t,a)}function Sb(t,n){var a=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(a=c.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),pg(t,a)}function Tb(t,n){return xc(t,n)}var io=null,Zs=null,rf=!1,so=!1,lf=!1,is=0;function hn(t){t!==Zs&&t.next===null&&(Zs===null?io=Zs=t:Zs=Zs.next=t),so=!0,rf||(rf=!0,Cb(wb))}function hr(t,n){if(!lf&&so){lf=!0;do for(var a=!1,l=io;l!==null;){if(t!==0){var c=l.pendingLanes;if(c===0)var f=0;else{var h=l.suspendedLanes,y=l.pingedLanes;f=(1<<31-kt(42|t)+1)-1,f&=c&~(h&~y),f=f&201326677?f&201326677|1:f?f|2:0}f!==0&&(a=!0,yg(l,f))}else f=ye,f=hl(l,l===De?f:0),(f&3)===0||Ra(l,f)||(a=!0,yg(l,f));l=l.next}while(a);lf=!1}}function wb(){so=rf=!1;var t=0;is!==0&&(Ib()&&(t=is),is=0);for(var n=on(),a=null,l=io;l!==null;){var c=l.next,f=gg(l,n);f===0?(l.next=null,a===null?io=c:a.next=c,c===null&&(Zs=a)):(a=l,(t!==0||(f&3)!==0)&&(so=!0)),l=c}hr(t)}function gg(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var h=31-kt(f),y=1<<h,v=c[h];v===-1?((y&a)===0||(y&l)!==0)&&(c[h]=Zv(y,n)):v<=n&&(t.expiredLanes|=y),f&=~y}if(n=De,a=ye,a=hl(t,t===n?a:0),l=t.callbackNode,a===0||t===n&&Ie===2||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Sc(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ra(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&Sc(l),xh(a)){case 2:case 8:a=gh;break;case 32:a=ul;break;case 268435456:a=_h;break;default:a=ul}return l=_g.bind(null,t),a=xc(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&Sc(l),t.callbackPriority=2,t.callbackNode=null,2}function _g(t,n){var a=t.callbackNode;if(Ws()&&t.callbackNode!==a)return null;var l=ye;return l=hl(t,t===De?l:0),l===0?null:(sg(t,l,n),gg(t,on()),t.callbackNode!=null&&t.callbackNode===a?_g.bind(null,t):null)}function yg(t,n){if(Ws())return null;sg(t,n,!0)}function Cb(t){Ub(function(){(He&6)!==0?xc(ph,t):t()})}function of(){return is===0&&(is=yh()),is}function vg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:yl(""+t)}function bg(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function Nb(t,n,a,l,c){if(n==="submit"&&a&&a.stateNode===c){var f=vg((c[wt]||null).action),h=l.submitter;h&&(n=(n=h[wt]||null)?vg(n.formAction):h.getAttribute("formAction"),n!==null&&(f=n,h=null));var y=new xl("action","action",null,l,c);t.push({event:y,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(is!==0){var v=h?bg(c,h):new FormData(c);gu(a,{pending:!0,data:v,method:c.method,action:f},null,v)}}else typeof f=="function"&&(y.preventDefault(),v=h?bg(c,h):new FormData(c),gu(a,{pending:!0,data:v,method:c.method,action:f},f,v))},currentTarget:c}]})}}for(var cf=0;cf<dm.length;cf++){var uf=dm[cf],Ab=uf.toLowerCase(),Rb=uf[0].toUpperCase()+uf.slice(1);Zt(Ab,"on"+Rb)}Zt(lm,"onAnimationEnd"),Zt(om,"onAnimationIteration"),Zt(cm,"onAnimationStart"),Zt("dblclick","onDoubleClick"),Zt("focusin","onFocus"),Zt("focusout","onBlur"),Zt(F1,"onTransitionRun"),Zt(Q1,"onTransitionStart"),Zt(X1,"onTransitionCancel"),Zt(um,"onTransitionEnd"),Ts("onMouseEnter",["mouseout","mouseover"]),Ts("onMouseLeave",["mouseout","mouseover"]),Ts("onPointerEnter",["pointerout","pointerover"]),Ts("onPointerLeave",["pointerout","pointerover"]),zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zi("onBeforeInput",["compositionend","keypress","textInput","paste"]),zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ob=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mr));function Eg(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],c=l.event;l=l.listeners;e:{var f=void 0;if(n)for(var h=l.length-1;0<=h;h--){var y=l[h],v=y.instance,w=y.currentTarget;if(y=y.listener,v!==f&&c.isPropagationStopped())break e;f=y,c.currentTarget=w;try{f(c)}catch(k){Gl(k)}c.currentTarget=null,f=v}else for(h=0;h<l.length;h++){if(y=l[h],v=y.instance,w=y.currentTarget,y=y.listener,v!==f&&c.isPropagationStopped())break e;f=y,c.currentTarget=w;try{f(c)}catch(k){Gl(k)}c.currentTarget=null,f=v}}}}function ge(t,n){var a=n[wc];a===void 0&&(a=n[wc]=new Set);var l=t+"__bubble";a.has(l)||(xg(n,t,2,!1),a.add(l))}function ff(t,n,a){var l=0;n&&(l|=4),xg(a,t,l,n)}var ao="_reactListening"+Math.random().toString(36).slice(2);function df(t){if(!t[ao]){t[ao]=!0,wh.forEach(function(a){a!=="selectionchange"&&(Ob.has(a)||ff(a,!1,t),ff(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[ao]||(n[ao]=!0,ff("selectionchange",!1,n))}}function xg(t,n,a,l){switch(Yg(n)){case 2:var c=nE;break;case 8:c=iE;break;default:c=wf}a=c.bind(null,n,a,t),c=void 0,!Dc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,a,{capture:!0,passive:c}):t.addEventListener(n,a,!0):c!==void 0?t.addEventListener(n,a,{passive:c}):t.addEventListener(n,a,!1)}function hf(t,n,a,l,c){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var y=l.stateNode.containerInfo;if(y===c||y.nodeType===8&&y.parentNode===c)break;if(h===4)for(h=l.return;h!==null;){var v=h.tag;if((v===3||v===4)&&(v=h.stateNode.containerInfo,v===c||v.nodeType===8&&v.parentNode===c))return;h=h.return}for(;y!==null;){if(h=ji(y),h===null)return;if(v=h.tag,v===5||v===6||v===26||v===27){l=f=h;continue e}y=y.parentNode}}l=l.return}jh(function(){var w=f,k=kc(a),L=[];e:{var A=fm.get(t);if(A!==void 0){var O=xl,K=t;switch(t){case"keypress":if(bl(a)===0)break e;case"keydown":case"keyup":O=S1;break;case"focusin":K="focus",O=jc;break;case"focusout":K="blur",O=jc;break;case"beforeblur":case"afterblur":O=jc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Bh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=f1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=C1;break;case lm:case om:case cm:O=m1;break;case um:O=A1;break;case"scroll":case"scrollend":O=c1;break;case"wheel":O=O1;break;case"copy":case"cut":case"paste":O=g1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=qh;break;case"toggle":case"beforetoggle":O=M1}var ae=(n&4)!==0,Ge=!ae&&(t==="scroll"||t==="scrollend"),C=ae?A!==null?A+"Capture":null:A;ae=[];for(var T=w,N;T!==null;){var M=T;if(N=M.stateNode,M=M.tag,M!==5&&M!==26&&M!==27||N===null||C===null||(M=Da(T,C),M!=null&&ae.push(pr(T,M,N))),Ge)break;T=T.return}0<ae.length&&(A=new O(A,K,null,a,k),L.push({event:A,listeners:ae}))}}if((n&7)===0){e:{if(A=t==="mouseover"||t==="pointerover",O=t==="mouseout"||t==="pointerout",A&&a!==Oc&&(K=a.relatedTarget||a.fromElement)&&(ji(K)||K[Es]))break e;if((O||A)&&(A=k.window===k?k:(A=k.ownerDocument)?A.defaultView||A.parentWindow:window,O?(K=a.relatedTarget||a.toElement,O=w,K=K?ji(K):null,K!==null&&(Ge=F(K),ae=K.tag,K!==Ge||ae!==5&&ae!==27&&ae!==6)&&(K=null)):(O=null,K=w),O!==K)){if(ae=Bh,M="onMouseLeave",C="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(ae=qh,M="onPointerLeave",C="onPointerEnter",T="pointer"),Ge=O==null?A:Ma(O),N=K==null?A:Ma(K),A=new ae(M,T+"leave",O,a,k),A.target=Ge,A.relatedTarget=N,M=null,ji(k)===w&&(ae=new ae(C,T+"enter",K,a,k),ae.target=N,ae.relatedTarget=Ge,M=ae),Ge=M,O&&K)t:{for(ae=O,C=K,T=0,N=ae;N;N=$s(N))T++;for(N=0,M=C;M;M=$s(M))N++;for(;0<T-N;)ae=$s(ae),T--;for(;0<N-T;)C=$s(C),N--;for(;T--;){if(ae===C||C!==null&&ae===C.alternate)break t;ae=$s(ae),C=$s(C)}ae=null}else ae=null;O!==null&&Sg(L,A,O,ae,!1),K!==null&&Ge!==null&&Sg(L,Ge,K,ae,!0)}}e:{if(A=w?Ma(w):window,O=A.nodeName&&A.nodeName.toLowerCase(),O==="select"||O==="input"&&A.type==="file")var Y=Wh;else if(Xh(A))if(Zh)Y=q1;else{Y=B1;var de=H1}else O=A.nodeName,!O||O.toLowerCase()!=="input"||A.type!=="checkbox"&&A.type!=="radio"?w&&Rc(w.elementType)&&(Y=Wh):Y=P1;if(Y&&(Y=Y(t,w))){Kh(L,Y,a,k);break e}de&&de(t,A,w),t==="focusout"&&w&&A.type==="number"&&w.memoizedProps.value!=null&&Ac(A,"number",A.value)}switch(de=w?Ma(w):window,t){case"focusin":(Xh(de)||de.contentEditable==="true")&&(Os=de,Vc=w,Pa=null);break;case"focusout":Pa=Vc=Os=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,am(L,a,k);break;case"selectionchange":if(Y1)break;case"keydown":case"keyup":am(L,a,k)}var Z;if(Hc)e:{switch(t){case"compositionstart":var ne="onCompositionStart";break e;case"compositionend":ne="onCompositionEnd";break e;case"compositionupdate":ne="onCompositionUpdate";break e}ne=void 0}else Rs?Fh(t,a)&&(ne="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ne="onCompositionStart");ne&&(Vh&&a.locale!=="ko"&&(Rs||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&Rs&&(Z=zh()):(Xn=k,Ic="value"in Xn?Xn.value:Xn.textContent,Rs=!0)),de=ro(w,ne),0<de.length&&(ne=new Ph(ne,t,null,a,k),L.push({event:ne,listeners:de}),Z?ne.data=Z:(Z=Qh(a),Z!==null&&(ne.data=Z)))),(Z=I1?L1(t,a):U1(t,a))&&(ne=ro(w,"onBeforeInput"),0<ne.length&&(de=new Ph("onBeforeInput","beforeinput",null,a,k),L.push({event:de,listeners:ne}),de.data=Z)),Nb(L,t,w,a,k)}Eg(L,n)})}function pr(t,n,a){return{instance:t,listener:n,currentTarget:a}}function ro(t,n){for(var a=n+"Capture",l=[];t!==null;){var c=t,f=c.stateNode;c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=Da(t,a),c!=null&&l.unshift(pr(t,c,f)),c=Da(t,n),c!=null&&l.push(pr(t,c,f))),t=t.return}return l}function $s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Sg(t,n,a,l,c){for(var f=n._reactName,h=[];a!==null&&a!==l;){var y=a,v=y.alternate,w=y.stateNode;if(y=y.tag,v!==null&&v===l)break;y!==5&&y!==26&&y!==27||w===null||(v=w,c?(w=Da(a,f),w!=null&&h.unshift(pr(a,w,v))):c||(w=Da(a,f),w!=null&&h.push(pr(a,w,v)))),a=a.return}h.length!==0&&t.push({event:n,listeners:h})}var kb=/\r\n?/g,Mb=/\u0000|\uFFFD/g;function Tg(t){return(typeof t=="string"?t:""+t).replace(kb,`
`).replace(Mb,"")}function wg(t,n){return n=Tg(n),Tg(t)===n}function lo(){}function Ae(t,n,a,l,c,f){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Cs(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Cs(t,""+l);break;case"className":pl(t,"class",l);break;case"tabIndex":pl(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":pl(t,a,l);break;case"style":Lh(t,l,f);break;case"data":if(n!=="object"){pl(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=yl(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&Ae(t,n,"name",c.name,c,null),Ae(t,n,"formEncType",c.formEncType,c,null),Ae(t,n,"formMethod",c.formMethod,c,null),Ae(t,n,"formTarget",c.formTarget,c,null)):(Ae(t,n,"encType",c.encType,c,null),Ae(t,n,"method",c.method,c,null),Ae(t,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=yl(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=lo);break;case"onScroll":l!=null&&ge("scroll",t);break;case"onScrollEnd":l!=null&&ge("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=yl(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ge("beforetoggle",t),ge("toggle",t),ml(t,"popover",l);break;case"xlinkActuate":bn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":bn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":bn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":bn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":bn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":bn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":bn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":bn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":bn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ml(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=l1.get(a)||a,ml(t,a,l))}}function mf(t,n,a,l,c,f){switch(a){case"style":Lh(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Cs(t,l):(typeof l=="number"||typeof l=="bigint")&&Cs(t,""+l);break;case"onScroll":l!=null&&ge("scroll",t);break;case"onScrollEnd":l!=null&&ge("scrollend",t);break;case"onClick":l!=null&&(t.onclick=lo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ch.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),n=a.slice(2,c?a.length-7:void 0),f=t[wt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(n,f,c),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,c);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ml(t,a,l)}}}function ht(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ge("error",t),ge("load",t);var l=!1,c=!1,f;for(f in a)if(a.hasOwnProperty(f)){var h=a[f];if(h!=null)switch(f){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Ae(t,n,f,h,a,null)}}c&&Ae(t,n,"srcSet",a.srcSet,a,null),l&&Ae(t,n,"src",a.src,a,null);return;case"input":ge("invalid",t);var y=f=h=c=null,v=null,w=null;for(l in a)if(a.hasOwnProperty(l)){var k=a[l];if(k!=null)switch(l){case"name":c=k;break;case"type":h=k;break;case"checked":v=k;break;case"defaultChecked":w=k;break;case"value":f=k;break;case"defaultValue":y=k;break;case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(137,n));break;default:Ae(t,n,l,k,a,null)}}kh(t,f,y,v,w,h,c,!1),gl(t);return;case"select":ge("invalid",t),l=h=f=null;for(c in a)if(a.hasOwnProperty(c)&&(y=a[c],y!=null))switch(c){case"value":f=y;break;case"defaultValue":h=y;break;case"multiple":l=y;default:Ae(t,n,c,y,a,null)}n=f,a=h,t.multiple=!!l,n!=null?ws(t,!!l,n,!1):a!=null&&ws(t,!!l,a,!0);return;case"textarea":ge("invalid",t),f=c=l=null;for(h in a)if(a.hasOwnProperty(h)&&(y=a[h],y!=null))switch(h){case"value":l=y;break;case"defaultValue":c=y;break;case"children":f=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:Ae(t,n,h,y,a,null)}Dh(t,l,c,f),gl(t);return;case"option":for(v in a)if(a.hasOwnProperty(v)&&(l=a[v],l!=null))switch(v){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ae(t,n,v,l,a,null)}return;case"dialog":ge("cancel",t),ge("close",t);break;case"iframe":case"object":ge("load",t);break;case"video":case"audio":for(l=0;l<mr.length;l++)ge(mr[l],t);break;case"image":ge("error",t),ge("load",t);break;case"details":ge("toggle",t);break;case"embed":case"source":case"link":ge("error",t),ge("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(w in a)if(a.hasOwnProperty(w)&&(l=a[w],l!=null))switch(w){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Ae(t,n,w,l,a,null)}return;default:if(Rc(n)){for(k in a)a.hasOwnProperty(k)&&(l=a[k],l!==void 0&&mf(t,n,k,l,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(l=a[y],l!=null&&Ae(t,n,y,l,a,null))}function Db(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,h=null,y=null,v=null,w=null,k=null;for(O in a){var L=a[O];if(a.hasOwnProperty(O)&&L!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":v=L;default:l.hasOwnProperty(O)||Ae(t,n,O,null,l,L)}}for(var A in l){var O=l[A];if(L=a[A],l.hasOwnProperty(A)&&(O!=null||L!=null))switch(A){case"type":f=O;break;case"name":c=O;break;case"checked":w=O;break;case"defaultChecked":k=O;break;case"value":h=O;break;case"defaultValue":y=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(137,n));break;default:O!==L&&Ae(t,n,A,O,l,L)}}Nc(t,h,y,v,w,k,f,c);return;case"select":O=h=y=A=null;for(f in a)if(v=a[f],a.hasOwnProperty(f)&&v!=null)switch(f){case"value":break;case"multiple":O=v;default:l.hasOwnProperty(f)||Ae(t,n,f,null,l,v)}for(c in l)if(f=l[c],v=a[c],l.hasOwnProperty(c)&&(f!=null||v!=null))switch(c){case"value":A=f;break;case"defaultValue":y=f;break;case"multiple":h=f;default:f!==v&&Ae(t,n,c,f,l,v)}n=y,a=h,l=O,A!=null?ws(t,!!a,A,!1):!!l!=!!a&&(n!=null?ws(t,!!a,n,!0):ws(t,!!a,a?[]:"",!1));return;case"textarea":O=A=null;for(y in a)if(c=a[y],a.hasOwnProperty(y)&&c!=null&&!l.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ae(t,n,y,null,l,c)}for(h in l)if(c=l[h],f=a[h],l.hasOwnProperty(h)&&(c!=null||f!=null))switch(h){case"value":A=c;break;case"defaultValue":O=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(r(91));break;default:c!==f&&Ae(t,n,h,c,l,f)}Mh(t,A,O);return;case"option":for(var K in a)if(A=a[K],a.hasOwnProperty(K)&&A!=null&&!l.hasOwnProperty(K))switch(K){case"selected":t.selected=!1;break;default:Ae(t,n,K,null,l,A)}for(v in l)if(A=l[v],O=a[v],l.hasOwnProperty(v)&&A!==O&&(A!=null||O!=null))switch(v){case"selected":t.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:Ae(t,n,v,A,l,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ae in a)A=a[ae],a.hasOwnProperty(ae)&&A!=null&&!l.hasOwnProperty(ae)&&Ae(t,n,ae,null,l,A);for(w in l)if(A=l[w],O=a[w],l.hasOwnProperty(w)&&A!==O&&(A!=null||O!=null))switch(w){case"children":case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(137,n));break;default:Ae(t,n,w,A,l,O)}return;default:if(Rc(n)){for(var Ge in a)A=a[Ge],a.hasOwnProperty(Ge)&&A!==void 0&&!l.hasOwnProperty(Ge)&&mf(t,n,Ge,void 0,l,A);for(k in l)A=l[k],O=a[k],!l.hasOwnProperty(k)||A===O||A===void 0&&O===void 0||mf(t,n,k,A,l,O);return}}for(var C in a)A=a[C],a.hasOwnProperty(C)&&A!=null&&!l.hasOwnProperty(C)&&Ae(t,n,C,null,l,A);for(L in l)A=l[L],O=a[L],!l.hasOwnProperty(L)||A===O||A==null&&O==null||Ae(t,n,L,A,l,O)}var pf=null,gf=null;function oo(t){return t.nodeType===9?t:t.ownerDocument}function Cg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ng(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function _f(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var yf=null;function Ib(){var t=window.event;return t&&t.type==="popstate"?t===yf?!1:(yf=t,!0):(yf=null,!1)}var Ag=typeof setTimeout=="function"?setTimeout:void 0,Lb=typeof clearTimeout=="function"?clearTimeout:void 0,Rg=typeof Promise=="function"?Promise:void 0,Ub=typeof queueMicrotask=="function"?queueMicrotask:typeof Rg<"u"?function(t){return Rg.resolve(null).then(t).catch(jb)}:Ag;function jb(t){setTimeout(function(){throw t})}function vf(t,n){var a=n,l=0;do{var c=a.nextSibling;if(t.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(l===0){t.removeChild(c),Sr(n);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=c}while(a);Sr(n)}function bf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":bf(a),Cc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function zb(t,n,a,l){for(;t.nodeType===1;){var c=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ka])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==c.rel||t.getAttribute("href")!==(c.href==null?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=en(t.nextSibling),t===null)break}return null}function Hb(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=en(t.nextSibling),t===null))return null;return t}function en(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}function Og(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return t;n--}else a==="/$"&&n++}t=t.previousSibling}return null}function kg(t,n,a){switch(n=oo(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}var Xt=new Map,Mg=new Set;function co(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var Ln=G.d;G.d={f:Bb,r:Pb,D:qb,C:Vb,L:Gb,m:Yb,X:Qb,S:Fb,M:Xb};function Bb(){var t=Ln.f(),n=to();return t||n}function Pb(t){var n=xs(t);n!==null&&n.tag===5&&n.type==="form"?ap(n):Ln.r(t)}var Js=typeof document>"u"?null:document;function Dg(t,n,a){var l=Js;if(l&&typeof n=="string"&&n){var c=zt(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Mg.has(c)||(Mg.add(c),t={rel:t,crossOrigin:a,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),ht(n,"link",t),it(n),l.head.appendChild(n)))}}function qb(t){Ln.D(t),Dg("dns-prefetch",t,null)}function Vb(t,n){Ln.C(t,n),Dg("preconnect",t,n)}function Gb(t,n,a){Ln.L(t,n,a);var l=Js;if(l&&t&&n){var c='link[rel="preload"][as="'+zt(n)+'"]';n==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+zt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+zt(a.imageSizes)+'"]')):c+='[href="'+zt(t)+'"]';var f=c;switch(n){case"style":f=ea(t);break;case"script":f=ta(t)}Xt.has(f)||(t=oe({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),Xt.set(f,t),l.querySelector(c)!==null||n==="style"&&l.querySelector(gr(f))||n==="script"&&l.querySelector(_r(f))||(n=l.createElement("link"),ht(n,"link",t),it(n),l.head.appendChild(n)))}}function Yb(t,n){Ln.m(t,n);var a=Js;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+zt(l)+'"][href="'+zt(t)+'"]',f=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ta(t)}if(!Xt.has(f)&&(t=oe({rel:"modulepreload",href:t},n),Xt.set(f,t),a.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(_r(f)))return}l=a.createElement("link"),ht(l,"link",t),it(l),a.head.appendChild(l)}}}function Fb(t,n,a){Ln.S(t,n,a);var l=Js;if(l&&t){var c=Ss(l).hoistableStyles,f=ea(t);n=n||"default";var h=c.get(f);if(!h){var y={loading:0,preload:null};if(h=l.querySelector(gr(f)))y.loading=5;else{t=oe({rel:"stylesheet",href:t,"data-precedence":n},a),(a=Xt.get(f))&&Ef(t,a);var v=h=l.createElement("link");it(v),ht(v,"link",t),v._p=new Promise(function(w,k){v.onload=w,v.onerror=k}),v.addEventListener("load",function(){y.loading|=1}),v.addEventListener("error",function(){y.loading|=2}),y.loading|=4,uo(h,n,l)}h={type:"stylesheet",instance:h,count:1,state:y},c.set(f,h)}}}function Qb(t,n){Ln.X(t,n);var a=Js;if(a&&t){var l=Ss(a).hoistableScripts,c=ta(t),f=l.get(c);f||(f=a.querySelector(_r(c)),f||(t=oe({src:t,async:!0},n),(n=Xt.get(c))&&xf(t,n),f=a.createElement("script"),it(f),ht(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function Xb(t,n){Ln.M(t,n);var a=Js;if(a&&t){var l=Ss(a).hoistableScripts,c=ta(t),f=l.get(c);f||(f=a.querySelector(_r(c)),f||(t=oe({src:t,async:!0,type:"module"},n),(n=Xt.get(c))&&xf(t,n),f=a.createElement("script"),it(f),ht(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function Ig(t,n,a,l){var c=(c=Yn.current)?co(c):null;if(!c)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=ea(a.href),a=Ss(c).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ea(a.href);var f=Ss(c).hoistableStyles,h=f.get(t);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,h),(f=c.querySelector(gr(t)))&&!f._p&&(h.instance=f,h.state.loading=5),Xt.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xt.set(t,a),f||Kb(c,t,a,h.state))),n&&l===null)throw Error(r(528,""));return h}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ta(a),a=Ss(c).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function ea(t){return'href="'+zt(t)+'"'}function gr(t){return'link[rel="stylesheet"]['+t+"]"}function Lg(t){return oe({},t,{"data-precedence":t.precedence,precedence:null})}function Kb(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),ht(n,"link",a),it(n),t.head.appendChild(n))}function ta(t){return'[src="'+zt(t)+'"]'}function _r(t){return"script[async]"+t}function Ug(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+zt(a.href)+'"]');if(l)return n.instance=l,it(l),l;var c=oe({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),it(l),ht(l,"style",c),uo(l,a.precedence,t),n.instance=l;case"stylesheet":c=ea(a.href);var f=t.querySelector(gr(c));if(f)return n.state.loading|=4,n.instance=f,it(f),f;l=Lg(a),(c=Xt.get(c))&&Ef(l,c),f=(t.ownerDocument||t).createElement("link"),it(f);var h=f;return h._p=new Promise(function(y,v){h.onload=y,h.onerror=v}),ht(f,"link",l),n.state.loading|=4,uo(f,a.precedence,t),n.instance=f;case"script":return f=ta(a.src),(c=t.querySelector(_r(f)))?(n.instance=c,it(c),c):(l=a,(c=Xt.get(f))&&(l=oe({},a),xf(l,c)),t=t.ownerDocument||t,c=t.createElement("script"),it(c),ht(c,"link",l),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,uo(l,a.precedence,t));return n.instance}function uo(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,f=c,h=0;h<l.length;h++){var y=l[h];if(y.dataset.precedence===n)f=y;else if(f!==c)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Ef(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function xf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var fo=null;function jg(t,n,a){if(fo===null){var l=new Map,c=fo=new Map;c.set(a,l)}else c=fo,l=c.get(a),l||(l=new Map,c.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),c=0;c<a.length;c++){var f=a[c];if(!(f[ka]||f[mt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var h=f.getAttribute(n)||"";h=t+h;var y=l.get(h);y?y.push(f):l.set(h,[f])}}return l}function zg(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function Wb(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Hg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var yr=null;function Zb(){}function $b(t,n,a){if(yr===null)throw Error(r(475));var l=yr;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=ea(a.href),f=t.querySelector(gr(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=ho.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=f,it(f);return}f=t.ownerDocument||t,a=Lg(a),(c=Xt.get(c))&&Ef(a,c),f=f.createElement("link"),it(f);var h=f;h._p=new Promise(function(y,v){h.onload=y,h.onerror=v}),ht(f,"link",a),n.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=ho.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function Jb(){if(yr===null)throw Error(r(475));var t=yr;return t.stylesheets&&t.count===0&&Sf(t,t.stylesheets),0<t.count?function(n){var a=setTimeout(function(){if(t.stylesheets&&Sf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a)}}:null}function ho(){if(this.count--,this.count===0){if(this.stylesheets)Sf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var mo=null;function Sf(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,mo=new Map,n.forEach(eE,t),mo=null,ho.call(t))}function eE(t,n){if(!(n.state.loading&4)){var a=mo.get(t);if(a)var l=a.get(null);else{a=new Map,mo.set(t,a);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var h=c[f];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(a.set(h.dataset.precedence,h),l=h)}l&&a.set(null,l)}c=n.instance,h=c.getAttribute("data-precedence"),f=a.get(h)||l,f===l&&a.set(null,c),a.set(h,c),this.count++,l=ho.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),f?f.parentNode.insertBefore(c,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var vr={$$typeof:R,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function tE(t,n,a,l,c,f,h,y){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tc(0),this.hiddenUpdates=Tc(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=y,this.incompleteTransitions=new Map}function Bg(t,n,a,l,c,f,h,y,v,w,k,L){return t=new tE(t,n,a,h,y,v,w,L),n=1,f===!0&&(n|=24),f=Ft(3,null,null,n),t.current=f,f.stateNode=t,n=eu(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:n},Iu(f),t}function Pg(t){return t?(t=Ds,t):Ds}function qg(t,n,a,l,c,f){c=Pg(c),l.context===null?l.context=c:l.pendingContext=c,l=ni(n),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=ii(t,l,n),a!==null&&(bt(a,t,n),nr(a,t,n))}function Vg(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Tf(t,n){Vg(t,n),(t=t.alternate)&&Vg(t,n)}function Gg(t){if(t.tag===13){var n=Kn(t,67108864);n!==null&&bt(n,t,67108864),Tf(t,67108864)}}var po=!0;function nE(t,n,a,l){var c=W.T;W.T=null;var f=G.p;try{G.p=2,wf(t,n,a,l)}finally{G.p=f,W.T=c}}function iE(t,n,a,l){var c=W.T;W.T=null;var f=G.p;try{G.p=8,wf(t,n,a,l)}finally{G.p=f,W.T=c}}function wf(t,n,a,l){if(po){var c=Cf(l);if(c===null)hf(t,n,l,go,a),Fg(t,l);else if(aE(c,t,n,a,l))l.stopPropagation();else if(Fg(t,l),n&4&&-1<sE.indexOf(t)){for(;c!==null;){var f=xs(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var h=Ui(f.pendingLanes);if(h!==0){var y=f;for(y.pendingLanes|=2,y.entangledLanes|=2;h;){var v=1<<31-kt(h);y.entanglements[1]|=v,h&=~v}hn(f),(He&6)===0&&($l=on()+500,hr(0))}}break;case 13:y=Kn(f,2),y!==null&&bt(y,f,2),to(),Tf(f,2)}if(f=Cf(l),f===null&&hf(t,n,l,go,a),f===c)break;c=f}c!==null&&l.stopPropagation()}else hf(t,n,l,null,a)}}function Cf(t){return t=kc(t),Nf(t)}var go=null;function Nf(t){if(go=null,t=ji(t),t!==null){var n=F(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=V(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return go=t,null}function Yg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vv()){case ph:return 2;case gh:return 8;case ul:case Gv:return 32;case _h:return 268435456;default:return 32}default:return 32}}var Af=!1,ui=null,fi=null,di=null,br=new Map,Er=new Map,hi=[],sE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fg(t,n){switch(t){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":fi=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":br.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(n.pointerId)}}function xr(t,n,a,l,c,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[c]},n!==null&&(n=xs(n),n!==null&&Gg(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function aE(t,n,a,l,c){switch(n){case"focusin":return ui=xr(ui,t,n,a,l,c),!0;case"dragenter":return fi=xr(fi,t,n,a,l,c),!0;case"mouseover":return di=xr(di,t,n,a,l,c),!0;case"pointerover":var f=c.pointerId;return br.set(f,xr(br.get(f)||null,t,n,a,l,c)),!0;case"gotpointercapture":return f=c.pointerId,Er.set(f,xr(Er.get(f)||null,t,n,a,l,c)),!0}return!1}function Qg(t){var n=ji(t.target);if(n!==null){var a=F(n);if(a!==null){if(n=a.tag,n===13){if(n=V(a),n!==null){t.blockedOn=n,Jv(t.priority,function(){if(a.tag===13){var l=Ut(),c=Kn(a,l);c!==null&&bt(c,a,l),Tf(a,l)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _o(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Cf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Oc=l,a.target.dispatchEvent(l),Oc=null}else return n=xs(a),n!==null&&Gg(n),t.blockedOn=a,!1;n.shift()}return!0}function Xg(t,n,a){_o(t)&&a.delete(n)}function rE(){Af=!1,ui!==null&&_o(ui)&&(ui=null),fi!==null&&_o(fi)&&(fi=null),di!==null&&_o(di)&&(di=null),br.forEach(Xg),Er.forEach(Xg)}function yo(t,n){t.blockedOn===n&&(t.blockedOn=null,Af||(Af=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,rE)))}var vo=null;function Kg(t){vo!==t&&(vo=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){vo===t&&(vo=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],c=t[n+2];if(typeof l!="function"){if(Nf(l||a)===null)continue;break}var f=xs(a);f!==null&&(t.splice(n,3),n-=3,gu(f,{pending:!0,data:c,method:a.method,action:l},l,c))}}))}function Sr(t){function n(v){return yo(v,t)}ui!==null&&yo(ui,t),fi!==null&&yo(fi,t),di!==null&&yo(di,t),br.forEach(n),Er.forEach(n);for(var a=0;a<hi.length;a++){var l=hi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<hi.length&&(a=hi[0],a.blockedOn===null);)Qg(a),a.blockedOn===null&&hi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var c=a[l],f=a[l+1],h=c[wt]||null;if(typeof f=="function")h||Kg(a);else if(h){var y=null;if(f&&f.hasAttribute("formAction")){if(c=f,h=f[wt]||null)y=h.formAction;else if(Nf(c)!==null)continue}else y=h.action;typeof y=="function"?a[l+1]=y:(a.splice(l,3),l-=3),Kg(a)}}}function Rf(t){this._internalRoot=t}bo.prototype.render=Rf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=Ut();qg(a,l,t,n,null,null)},bo.prototype.unmount=Rf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;t.tag===0&&Ws(),qg(t.current,2,null,t,null,null),to(),n[Es]=null}};function bo(t){this._internalRoot=t}bo.prototype.unstable_scheduleHydration=function(t){if(t){var n=Sh();t={blockedOn:null,target:t,priority:n};for(var a=0;a<hi.length&&n!==0&&n<hi[a].priority;a++);hi.splice(a,0,t),a===0&&Qg(t)}};var Wg=e.version;if(Wg!=="19.0.0")throw Error(r(527,Wg,"19.0.0"));G.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=j(n),t=t!==null?te(t):null,t=t===null?null:t.stateNode,t};var lE={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:W,findFiberByHostInstance:ji,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eo.isDisabled&&Eo.supportsFiber)try{Aa=Eo.inject(lE),Ot=Eo}catch{}}return wr.createRoot=function(t,n){if(!o(t))throw Error(r(299));var a=!1,l="",c=hp,f=mp,h=pp,y=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(h=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(y=n.unstable_transitionCallbacks)),n=Bg(t,1,!1,null,null,a,l,c,f,h,y,null),t[Es]=n.current,df(t.nodeType===8?t.parentNode:t),new Rf(n)},wr.hydrateRoot=function(t,n,a){if(!o(t))throw Error(r(299));var l=!1,c="",f=hp,h=mp,y=pp,v=null,w=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(v=a.unstable_transitionCallbacks),a.formState!==void 0&&(w=a.formState)),n=Bg(t,1,!0,n,a??null,l,c,f,h,y,v,w),n.context=Pg(null),a=n.current,l=Ut(),c=ni(l),c.callback=null,ii(a,c,l),n.current.lanes=l,Oa(n,l),hn(n),t[Es]=n.current,df(t),new bo(n)},wr.version="19.0.0",wr}var r_;function yE(){if(r_)return Mf.exports;r_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Mf.exports=_E(),Mf.exports}var vE=yE();const bE=_0(vE);var Ke=(s=>(s.EXPLORE="EXPLORE",s.BATTLE="BATTLE",s.CHARACTER="CHARACTER",s.PETS="PETS",s.BAG="BAG",s.ARENA="ARENA",s))(Ke||{});const _n=[{id:"s-normal",name:"",description:"",power:1,accuracy:98,type:"damage"},{id:"s-power-1",name:"",description:"",power:1.5,accuracy:80,type:"damage"},{id:"s-speed-1",name:"",description:"",power:1.8,accuracy:75,type:"damage"},{id:"s-def-1",name:"",description:"",power:2.2,accuracy:70,type:"damage"},{id:"s-bite",name:"",description:"",power:1.3,accuracy:90,type:"damage"},{id:"s-stomp",name:"",description:"",power:1.6,accuracy:85,type:"damage"}],At={UI:{AVATAR_HERO:"./images/ui/hero_avatar.png"},PETS:{STR_SLIME:"./images/pets/str_slime.png",DEF_SLIME:"./images/pets/def_slime.png",SPD_SLIME:"./images/pets/spd_slime.png"},MONSTERS:{SLIME:"./images/monsters/kebite.png",ULIULI:"./images/monsters/uliuli.png",WEIBER:"./images/monsters/weiber.png",OKALOS:"./images/monsters/okalos.png"},BOSSES:{SUB_KEBITE:"./images/bosses/sub_kebite.png",ANGRY_ULI:"./images/bosses/angry_uli.png",GIANT_WEIBER:"./images/bosses/giant_weiber.png",GUARDIAN:"./images/bosses/guardian.png",MECHA_DRAGON:"./images/bosses/mecha_dragon.png"}},Uf=s=>_n.find(e=>e.id===s)||_n[0],Co=[{id:"pet-template-1",name:"",species:"",level:1,exp:0,hp:120,maxHp:120,atk:25,def:15,spd:10,image:At.PETS.STR_SLIME,skills:[Uf("s-normal")],isActive:!0},{id:"pet-template-2",name:"",species:"",level:1,exp:0,hp:150,maxHp:150,atk:17,def:25,spd:8,image:At.PETS.DEF_SLIME,skills:[Uf("s-normal")],isActive:!1},{id:"pet-template-3",name:"",species:"",level:1,exp:0,hp:100,maxHp:100,atk:13,def:12,spd:25,image:At.PETS.SPD_SLIME,skills:[Uf("s-normal")],isActive:!1}],y0=[{id:"f-atk-1",name:"I",type:"fairy",description:" 5 %",effectType:"ATK_BOOST",effectValue:5,activationChance:70,rarity:"common"},{id:"f-def-1",name:"I",type:"fairy",description:" 5 %",effectType:"DEF_BOOST",effectValue:5,activationChance:70,rarity:"common"},{id:"f-spd-1",name:"I",type:"fairy",description:" 5 %",effectType:"SPD_BOOST",effectValue:5,activationChance:70,rarity:"common"},{id:"f-absorb-1",name:"",type:"fairy",description:"",effectType:"ABSORB",effectValue:100,activationChance:20,rarity:"common"},{id:"f-reflect-1",name:"",type:"fairy",description:"",effectType:"REFLECT",effectValue:100,activationChance:20,rarity:"common"}],ss=s=>_n.find(e=>e.id===s)||_n[0],EE=[{id:"m1",name:"",level:1,hp:50,maxHp:50,atk:8,def:5,spd:8,image:At.MONSTERS.SLIME,captureRate:.4,skills:[ss("s-normal")],spawnMaps:["",""]},{id:"m2",name:"",level:1,hp:60,maxHp:60,atk:7,def:12,spd:5,image:At.MONSTERS.ULIULI,captureRate:.35,skills:[ss("s-normal")],spawnMaps:["",""]},{id:"m3",name:"",level:3,hp:80,maxHp:80,atk:12,def:8,spd:15,image:At.MONSTERS.WEIBER,captureRate:.2,skills:[ss("s-normal"),ss("s-bite")],spawnMaps:["",""]},{id:"m4",name:"",level:5,hp:150,maxHp:150,atk:25,def:20,spd:12,image:At.MONSTERS.OKALOS,captureRate:.1,skills:[ss("s-normal"),ss("s-power-1"),ss("s-stomp")],spawnMaps:["",""]}],as=s=>_n.find(e=>e.id===s)||_n[0],xE=[{id:"sb-1",name:"",level:3,hp:120,maxHp:120,atk:18,def:10,spd:12,image:At.BOSSES.SUB_KEBITE,captureRate:.1,skills:[as("s-normal"),as("s-power-1")],spawnMaps:["",""],drops:[{itemId:"f-reflect-1",chance:100}]},{id:"sb-2",name:"",level:4,hp:150,maxHp:150,atk:15,def:25,spd:8,image:At.BOSSES.ANGRY_ULI,captureRate:.05,skills:[as("s-normal"),as("s-stomp")],spawnMaps:["",""],drops:[{itemId:"f-absorb-1",chance:100}]},{id:"sb-3",name:"",level:6,hp:200,maxHp:200,atk:28,def:18,spd:25,image:At.BOSSES.GIANT_WEIBER,captureRate:.02,skills:[as("s-normal"),as("s-speed-1"),as("s-bite")],spawnMaps:["",""],drops:[{itemId:"f-wind-1",chance:.25}]}],pi=s=>_n.find(e=>e.id===s)||_n[0],SE=[{id:"b-1",name:"",level:10,hp:500,maxHp:500,atk:45,def:35,spd:20,image:At.BOSSES.GUARDIAN,captureRate:0,skills:[pi("s-normal"),pi("s-power-1"),pi("s-stomp"),pi("s-def-1")],spawnMaps:[""],drops:[{itemId:"f-earth-1",chance:.4}]},{id:"b-2",name:"",level:15,hp:1200,maxHp:1200,atk:75,def:60,spd:40,image:At.BOSSES.MECHA_DRAGON,captureRate:0,skills:[pi("s-normal"),pi("s-speed-1"),pi("s-bite"),pi("s-def-1")],spawnMaps:[""],drops:[{itemId:"f-light-1",chance:.15}]}],TE=[{id:"m-1",name:"",type:"explore",description:"",minLevel:1},{id:"m-2",name:"",type:"explore",description:"",minLevel:1},{id:"m-3",name:"",type:"explore",description:"",minLevel:1},{id:"m-4",name:"",type:"explore",description:"",minLevel:1},{id:"m-5",name:"",type:"explore",description:"",minLevel:1}],wE=[...y0],CE=[y0[0]],NE={id:"player-1",name:"",equipment:{fairy:null}},jf=EE,AE=xE,RE=SE,rs=TE;/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v0=(...s)=>s.filter((e,i,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===i).join(" ").trim();/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=we.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:d,...m},g)=>we.createElement("svg",{ref:g,...kE,width:e,height:e,stroke:s,strokeWidth:r?Number(i)*24/Number(e):i,className:v0("lucide",o),...m},[...d.map(([p,b])=>we.createElement(p,b)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(s,e)=>{const i=we.forwardRef(({className:r,...o},u)=>we.createElement(ME,{ref:u,iconNode:e,className:v0(`lucide-${OE(s)}`,r),...o}));return i.displayName=`${s}`,i};/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],IE=Oe("BadgeCheck",DE);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],UE=Oe("Brain",LE);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],b0=Oe("ChevronLeft",jE);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],E0=Oe("ChevronRight",zE);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],BE=Oe("CircleAlert",HE);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],x0=Oe("CircleX",PE);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],VE=Oe("Compass",qE);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]],YE=Oe("Dog",GE);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],QE=Oe("Footprints",FE);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],KE=Oe("House",XE);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ZE=Oe("Info",WE);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],JE=Oe("LoaderCircle",$E);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],tx=Oe("Lock",ex);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Jf=Oe("Package",nx);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],sx=Oe("Plus",ix);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],S0=Oe("ShieldCheck",ax);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],T0=Oe("Shield",rx);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],cs=Oe("Sparkles",lx);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],cx=Oe("Star",ox);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],jr=Oe("Swords",ux);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],dx=Oe("Target",fx);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],mx=Oe("Timer",hx);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xd=Oe("Trash2",px);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],w0=Oe("TriangleAlert",gx);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],C0=Oe("Trophy",_x);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],vx=Oe("Users",yx);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],N0=Oe("X",bx);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],A0=Oe("Zap",Ex),xx=({onComplete:s})=>{const[e,i]=we.useState(1),[r,o]=we.useState(""),[u,d]=we.useState(Co[0].id),m=b=>{b.preventDefault(),r.trim()&&i(2)},g=()=>{s(r.trim(),u)},p=Co.find(b=>b.id===u);return _.jsxs("div",{className:"fixed inset-0 z-[100] bg-[#0f1115] flex items-center justify-center p-4",children:[_.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, #444 1px, transparent 0)",backgroundSize:"30px 30px"}}),_.jsxs("div",{className:"relative w-full max-w-lg bg-[#1a1c21] border-2 border-stone-800 rounded-[2.5rem] p-6 md:p-10 shadow-2xl animate-in fade-in zoom-in duration-500 overflow-y-auto max-h-[90vh]",children:[_.jsxs("div",{className:"text-center mt-6 mb-8",children:[_.jsx("h1",{className:"text-2xl font-black text-white tracking-widest uppercase mb-1",children:e===1?"":""}),_.jsxs("p",{className:"text-stone-500 text-[10px] font-bold tracking-widest uppercase opacity-70",children:["Step ",e," of 2"]})]}),e===1?_.jsxs("form",{onSubmit:m,className:"space-y-8",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsx("label",{className:"text-[10px] font-black text-stone-500 uppercase tracking-[0.2em] block text-center",children:""}),_.jsx("input",{type:"text",required:!0,autoFocus:!0,value:r,onChange:b=>o(b.target.value),placeholder:"...",className:"w-full bg-stone-900 border-2 border-stone-800 rounded-2xl px-6 py-4 text-center text-white font-bold placeholder:text-stone-700 focus:outline-none focus:border-orange-500 transition-colors"})]}),_.jsxs("button",{type:"submit",className:"w-full bg-stone-800 hover:bg-stone-700 text-white py-4 rounded-2xl font-black text-lg shadow-xl active:scale-95 transition-all flex items-center justify-center gap-3",children:[_.jsx("span",{children:"  "}),_.jsx(E0,{size:20})]})]}):_.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right duration-300",children:[_.jsx("div",{className:"grid grid-cols-3 gap-3",children:Co.map(b=>_.jsxs("button",{onClick:()=>d(b.id),className:`flex flex-col items-center p-2 rounded-xl border-2 transition-all ${u===b.id?"bg-orange-500/10 border-orange-500 scale-105":"bg-stone-900/50 border-stone-800 opacity-60"}`,children:[_.jsx("img",{src:b.image,className:"w-16 h-16 object-contain",alt:b.name}),_.jsx("span",{className:"text-[9px] font-black text-white mt-1 uppercase",children:b.name})]},b.id))}),p&&_.jsxs("div",{className:"bg-stone-900/80 rounded-2xl p-4 border border-stone-800 animate-in fade-in zoom-in duration-300",children:[_.jsx("div",{className:"flex items-center gap-4 mb-3",children:_.jsxs("div",{className:"text-left flex-1",children:[_.jsx("h3",{className:"text-white font-black uppercase text-lg",children:p.name}),_.jsx("p",{className:"text-stone-500 text-[10px] font-bold uppercase",children:p.species})]})}),_.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[_.jsxs("div",{className:"bg-black/20 p-2 rounded-lg text-center",children:[_.jsx("div",{className:"text-[8px] text-stone-500 font-bold uppercase",children:"ATK"}),_.jsx("div",{className:"text-sm font-black text-orange-400",children:p.atk})]}),_.jsxs("div",{className:"bg-black/20 p-2 rounded-lg text-center",children:[_.jsx("div",{className:"text-[8px] text-stone-500 font-bold uppercase",children:"DEF"}),_.jsx("div",{className:"text-sm font-black text-blue-400",children:p.def})]}),_.jsxs("div",{className:"bg-black/20 p-2 rounded-lg text-center",children:[_.jsx("div",{className:"text-[8px] text-stone-500 font-bold uppercase",children:"SPD"}),_.jsx("div",{className:"text-sm font-black text-cyan-400",children:p.spd})]})]})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsxs("button",{onClick:()=>i(1),className:"flex-1 bg-stone-900 border-2 border-stone-800 text-stone-400 py-4 rounded-2xl font-black text-lg active:scale-95 transition-all flex items-center justify-center gap-2",children:[_.jsx(b0,{size:20}),_.jsx("span",{children:""})]}),_.jsxs("button",{onClick:g,className:"flex-[2] bg-orange-600 hover:bg-orange-50 text-orange-950 py-4 rounded-2xl font-black text-lg shadow-[0_4px_20px_rgba(234,88,12,0.4)] active:scale-95 transition-all flex items-center justify-center gap-3 bg-gradient-to-r from-orange-600 to-orange-400 text-white",children:[_.jsx(S0,{size:24}),_.jsx("span",{children:" "})]})]})]})]})]})},Sx=({player:s,onClick:e,onDelete:i,disabled:r})=>{const o=At.UI.AVATAR_HERO;return _.jsx("div",{className:"flex items-center gap-4",children:_.jsxs("button",{onClick:e,disabled:r,className:`flex items-center space-x-4 bg-stone-900/60 p-2.5 pr-6 rounded-2xl border border-white/10 shadow-xl transition-all group relative ${r?"opacity-50 cursor-not-allowed":"hover:bg-stone-800 hover:scale-105 active:scale-95"}`,children:[r&&_.jsx("div",{className:"absolute -top-1.5 -right-1.5 bg-stone-800 border border-stone-600 rounded-full p-1.5 z-10 text-stone-400 shadow-lg",children:_.jsx(tx,{size:12})}),_.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 rounded-xl bg-stone-800 border-2 overflow-hidden shadow-2xl transition-all ${r?"border-stone-700":"border-stone-600 group-hover:border-orange-500"}`,children:_.jsx("img",{src:o,alt:"avatar",className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform"})}),_.jsxs("div",{className:"flex flex-col text-left",children:[_.jsx("div",{className:`font-black text-sm md:text-base tracking-widest uppercase ${r?"text-stone-500":"text-white"}`,children:s.name}),_.jsx("div",{className:"text-[10px] md:text-xs text-stone-500 font-black uppercase tracking-[0.2em] mt-0.5",children:"Character Management"})]})]})})},Tx=({battle:s,player:e,pet:i,currentMap:r,onAction:o,onExit:u})=>{const d=s.enemies[0],m=s.phase==="PLAYER_CHOICE",g=s.phase==="EXECUTION"||s.phase==="WAITING_FOR_OPPONENT",p=e.equipment.fairy,E=[{name:"",icon:cs,color:p?"text-orange-400":"text-stone-600",info:(()=>{if(!p)return"";const R=p.activationChance?` ( ${p.activationChance}%)`:"";switch(p.effectType){case"ATK_BOOST":return`${R}`;case"DEF_BOOST":return`${R}`;case"SPD_BOOST":return`${R}`;case"ABSORB":return`${R}`;case"REFLECT":return`${R}`;default:return`${R}`}})(),bgColor:"bg-orange-950/20"},...s.isPvP?[]:[{name:"",icon:dx,color:"text-blue-400",info:"",bgColor:"bg-blue-950/20"},{name:"",icon:QE,color:"text-red-400",info:"",bgColor:"bg-red-950/20"}]],x=[{name:"",icon:jr,color:"text-lime-400",info:"",bgColor:"bg-lime-950/20"},{name:"",icon:T0,color:"text-stone-400",info:"",bgColor:"bg-stone-800/20"}];if(s.winnerId){const R=s.winnerId==="player";return _.jsx("div",{className:"absolute inset-0 z-[100] bg-black/90 backdrop-blur-xl flex items-center justify-center p-6 animate-in fade-in zoom-in duration-500",children:_.jsxs("div",{className:"w-full max-w-sm bg-stone-900 border-2 border-stone-800 p-10 rounded-[3rem] text-center shadow-2xl relative overflow-hidden",children:[_.jsx("div",{className:`absolute top-0 left-0 w-full h-1.5 ${R?"bg-orange-500 shadow-[0_0_15px_rgba(249,115,22,0.5)]":"bg-red-600"}`}),_.jsx("div",{className:`w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-8 border-2 ${R?"bg-orange-500/10 border-orange-500 text-orange-500 animate-bounce":"bg-red-900/10 border-red-900 text-red-600"}`,children:R?_.jsx(C0,{size:48}):_.jsx(x0,{size:48})}),_.jsx("h2",{className:"text-4xl font-black text-white mb-4 tracking-widest uppercase italic",children:R?"VICTORY":"DEFEAT"}),_.jsx("p",{className:"text-stone-500 text-sm font-black uppercase tracking-[0.3em] mb-10",children:R?"":""}),_.jsxs("button",{onClick:u,className:"w-full py-5 bg-stone-800 hover:bg-stone-700 text-white rounded-2xl font-black text-lg tracking-widest uppercase transition-all shadow-xl active:scale-95 flex items-center justify-center gap-3",children:[_.jsx(KE,{size:20}),""]})]})})}return _.jsxs("div",{className:"relative w-full h-full flex flex-col bg-[#0f1115] overflow-hidden",children:[_.jsxs("div",{className:"flex-1 min-h-0 relative perspective-[1200px] overflow-hidden transition-all duration-700",children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#1a1c21] to-[#0f1115]"}),_.jsx("div",{className:"absolute inset-x-0 bottom-0 h-1/2 bg-stone-900/30 skew-x-[-20deg] opacity-50 blur-xl"}),d&&_.jsx("div",{className:"absolute transition-all duration-700 transform scale-125",style:{top:"45%",left:"15%"},children:_.jsxs("div",{className:"relative flex flex-col items-center group",children:[_.jsxs("div",{className:"mt-5 absolute -top-20 flex flex-col items-center w-48",children:[_.jsxs("div",{className:"bg-black/80 px-4 py-1 rounded-full mb-2 border border-red-900/30 flex items-center gap-2 shadow-2xl",children:[_.jsx("span",{className:"text-[10px] md:text-xs font-black text-red-500 uppercase tracking-widest",children:s.isPvP?"":""}),_.jsxs("span",{className:"text-xs md:text-sm font-black text-white",children:[d.name," ",_.jsxs("span",{className:"text-stone-500",children:["Lv.",d.level]})]})]}),_.jsx("div",{className:"w-3/4 h-3 bg-stone-950 rounded-full border border-white/10 p-0.5 shadow-inner",children:_.jsx("div",{className:"h-full bg-gradient-to-r from-red-600 to-red-400 rounded-full transition-all duration-500 shadow-[0_0_15px_rgba(220,38,38,0.6)]",style:{width:`${d.hp/d.maxHp*100}%`}})})]}),_.jsx("div",{className:"absolute -bottom-6 w-32 h-10 bg-black/50 rounded-[100%] blur-md -z-10"}),_.jsx("img",{src:d.image,className:"w-36 h-36 md:w-36 md:h-36 object-contain drop-shadow-2xl",alt:"enemy"})]})}),i&&_.jsx("div",{className:"absolute transition-all duration-700 transform scale-125",style:{top:"45%",left:"60%"},children:_.jsxs("div",{className:"relative flex flex-col items-center group",children:[_.jsxs("div",{className:"mt-5 absolute -top-20 flex flex-col items-center w-48",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[_.jsx("div",{className:"bg-black/80 px-4 py-1 rounded-full border border-lime-900/30 shadow-2xl",children:_.jsxs("span",{className:"text-xs md:text-sm font-black text-white",children:[i.name," ",_.jsxs("span",{className:"text-lime-500",children:["Lv.",i.level]})]})}),p&&_.jsx("div",{className:"bg-orange-600/30 p-1.5 rounded-lg border border-orange-500/40 animate-pulse",children:_.jsx(cs,{size:14,className:"text-orange-500"})})]}),_.jsx("div",{className:"w-3/4 h-3 bg-stone-950 rounded-full border border-white/10 p-0.5 shadow-inner",children:_.jsx("div",{className:"h-full bg-gradient-to-r from-lime-600 to-emerald-400 rounded-full transition-all duration-500 shadow-[0_0_15px_rgba(101,163,13,0.6)]",style:{width:`${i.hp/i.maxHp*100}%`}})})]}),_.jsx("div",{className:"absolute -bottom-8 w-40 h-12 bg-black/60 rounded-[100%] blur-xl -z-10"}),_.jsx("img",{src:i.image,className:"w-36 h-36 md:w-36 md:h-36 object-contain drop-shadow-[0_30px_50px_rgba(0,0,0,0.6)]",alt:"pet"})]})})]}),_.jsx("div",{className:"flex-none bg-[#16181d] border-t border-white/10 p-6 md:p-8 relative z-50",children:_.jsx("div",{className:"max-w-2xl mx-auto",children:g?_.jsx("div",{className:"h-32 flex flex-col items-center justify-center gap-6",children:_.jsxs("div",{className:"flex items-center gap-6",children:[_.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-orange-500 animate-ping"}),_.jsx("span",{className:"text-sm md:text-base font-black text-stone-500 uppercase tracking-[0.5em]",children:s.phase==="WAITING_FOR_OPPONENT"?"":""}),_.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-orange-500 animate-ping"})]})}):_.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsx("span",{className:"text-xs md:text-sm font-black text-stone-500 uppercase tracking-widest",children:m?"":""}),_.jsxs("span",{className:"text-xs md:text-sm font-bold text-stone-700 tracking-widest uppercase",children:["TURN ",s.turnCount]})]}),_.jsx("div",{className:"grid grid-cols-2 gap-4",children:(m?E:x).map(R=>_.jsxs("button",{onClick:()=>o(m?"player":"pet",R.name,R.skill),className:`group relative flex items-center gap-6 px-6 py-5 rounded-3xl ${R.bgColor} border border-white/10 hover:border-white/30 hover:bg-white/5 active:scale-95 transition-all text-left overflow-hidden shadow-2xl`,children:[_.jsx("div",{className:`p-3 rounded-2xl bg-black/50 ${R.color} group-hover:scale-110 transition-transform shadow-lg`,children:_.jsx(R.icon,{size:28})}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"font-black text-base md:text-lg text-white tracking-wide uppercase",children:R.name}),_.jsx("span",{className:"text-[11px] md:text-xs font-bold text-stone-500 uppercase tracking-widest mt-0.5",children:R.info})]}),_.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/5 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"})]},R.name))})]})})})]})},wx=({player:s,onDeleteCharacter:e})=>{const[i,r]=we.useState(!1),o=At.UI.AVATAR_HERO;return _.jsxs("div",{className:"w-full h-full bg-[#1e1e1e] p-4 md:p-8 overflow-y-auto custom-scrollbar animate-in fade-in duration-500",children:[_.jsx("div",{className:"max-w-4xl mx-auto flex flex-col items-center text-center",children:_.jsxs("div",{className:"w-full max-w-sm bg-stone-900/50 rounded-3xl border-2 border-stone-800 p-6 md:p-12 shadow-inner mb-8 relative",children:[_.jsxs("div",{className:"relative mb-6",children:[_.jsx("div",{className:"absolute inset-0 bg-orange-500/5 blur-3xl rounded-full"}),_.jsx("img",{src:o,alt:"Character Sprite",className:"w-40 h-40 md:w-64 md:h-64 object-contain relative z-10 drop-shadow-2xl mx-auto"})]}),_.jsxs("div",{className:"flex items-center justify-center gap-2",children:[_.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white tracking-widest uppercase",children:s.name}),_.jsx(IE,{className:"text-orange-500",size:24})]}),_.jsx("div",{className:"mt-2 text-stone-500 font-bold uppercase tracking-widest text-[10px]",children:""}),_.jsxs("button",{onClick:()=>r(!0),className:"mt-10 md:mt-12 flex items-center justify-center gap-2 w-full py-3 rounded-xl bg-red-900/10 text-red-500 hover:bg-red-900/20 border border-red-900/20 transition-all text-[10px] md:text-xs font-black uppercase tracking-widest",children:[_.jsx(xd,{size:14}),""]})]})}),i&&_.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md p-6",children:_.jsxs("div",{className:"bg-[#1a1c21] border-2 border-red-900/50 p-6 md:p-8 rounded-[2.5rem] max-w-sm w-full shadow-2xl animate-in zoom-in duration-300 relative",children:[_.jsx("button",{onClick:()=>r(!1),className:"absolute top-6 right-6 text-stone-600 hover:text-white",children:_.jsx(N0,{size:24})}),_.jsxs("div",{className:"flex flex-col items-center text-center",children:[_.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-red-500/10 rounded-full flex items-center justify-center mb-6 border-2 border-red-500/20",children:_.jsx(w0,{className:"text-red-500",size:32})}),_.jsx("h3",{className:"text-xl md:text-2xl font-black text-white mb-3 tracking-widest uppercase",children:""}),_.jsxs("p",{className:"text-stone-400 text-[10px] md:text-xs font-bold leading-relaxed mb-8",children:[" ",_.jsxs("span",{className:"text-red-400",children:["[",s.name,"]"]}),""]}),_.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[_.jsx("button",{onClick:()=>{e(),r(!1)},className:"w-full py-4 bg-red-600 hover:bg-red-500 text-white rounded-2xl font-black text-sm tracking-widest uppercase transition-all shadow-lg active:scale-95",children:""}),_.jsx("button",{onClick:()=>r(!1),className:"w-full py-4 bg-stone-900 text-stone-500 rounded-2xl font-black text-sm tracking-widest uppercase hover:text-white transition-all",children:""})]})]})]})})]})},Cx=({pets:s,onSetActive:e,onDeletePet:i})=>{const[r,o]=we.useState(null);return _.jsxs("div",{className:"w-full h-full bg-[#1e1e1e] p-4 md:p-8 overflow-y-auto custom-scrollbar",children:[_.jsxs("div",{className:"max-w-5xl mx-auto",children:[_.jsxs("h2",{className:"text-xl md:text-2xl font-black text-white mb-6 border-b-2 border-stone-800 pb-4 flex items-center",children:[_.jsx(cx,{className:"mr-3 text-yellow-500 fill-yellow-500",size:20})," "]}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-6",children:s.map(u=>{const d=u.level*100,m=u.level>=20?100:u.exp/d*100;return _.jsxs("div",{className:`relative rounded-2xl border-2 p-5 md:p-6 transition-all duration-300 flex flex-col ${u.isActive?"bg-stone-800/50 border-orange-500 shadow-[0_0_20px_rgba(234,88,12,0.15)] md:scale-105 z-10":"bg-stone-900 border-stone-800 hover:border-stone-600"}`,children:[!u.isStarter&&_.jsx("button",{onClick:g=>{g.stopPropagation(),o(u)},className:"absolute top-3 right-3 p-2 rounded-full bg-red-900/20 text-red-500 hover:bg-red-900/40 border border-red-800/30 transition-all z-20",title:"",children:_.jsx(xd,{size:16})}),u.isActive&&_.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-orange-500 text-white text-[10px] font-black px-3 py-1 rounded-full tracking-widest uppercase z-20",children:""}),_.jsxs("div",{className:"flex flex-col items-center flex-1",children:[_.jsxs("div",{className:"relative mb-4",children:[_.jsx("img",{src:u.image,alt:u.name,className:"w-28 h-28 md:w-32 md:h-32 object-contain drop-shadow-xl"}),u.level>=20&&_.jsx("div",{className:"absolute -bottom-2 -right-2 bg-yellow-500 text-black font-black text-[8px] px-2 py-0.5 rounded-md shadow-lg border border-yellow-300",children:"MAX LV"})]}),_.jsx("h3",{className:"text-lg md:text-xl font-bold text-white mb-1",children:u.name}),_.jsxs("p",{className:"text-xs text-stone-500 mb-4",children:[u.species," Lv. ",u.level]}),_.jsxs("div",{className:"w-full space-y-3 mb-6",children:[_.jsxs("div",{className:"space-y-1",children:[_.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[_.jsxs("span",{className:"flex items-center text-red-400 font-bold",children:[_.jsx(Nx,{size:12,className:"mr-1"})," HP"]}),_.jsxs("span",{className:"font-mono text-stone-300",children:[u.hp,"/",u.maxHp]})]}),_.jsx("div",{className:"h-1.5 bg-stone-800 rounded-full overflow-hidden",children:_.jsx("div",{className:"h-full bg-gradient-to-r from-red-600 to-orange-500",style:{width:`${u.hp/u.maxHp*100}%`}})})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[_.jsxs("span",{className:"flex items-center text-cyan-400 font-bold",children:[_.jsx(cs,{size:12,className:"mr-1"})," EXP"]}),_.jsx("span",{className:"font-mono text-stone-300 text-[10px]",children:u.level>=20?"MAXIMUM":`${u.exp} / ${d}`})]}),_.jsx("div",{className:"h-1.5 bg-stone-800 rounded-full overflow-hidden",children:_.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-600 to-blue-500",style:{width:`${m}%`}})})]}),_.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2",children:[_.jsxs("div",{className:"text-center bg-black/20 py-2 rounded-lg",children:[_.jsx("div",{className:"text-orange-400 flex justify-center mb-1",children:_.jsx(jr,{size:12})}),_.jsx("div",{className:"text-[9px] text-stone-500 font-bold uppercase",children:"ATK"}),_.jsx("div",{className:"text-xs font-black text-white",children:u.atk})]}),_.jsxs("div",{className:"text-center bg-black/20 py-2 rounded-lg",children:[_.jsx("div",{className:"text-stone-400 flex justify-center mb-1",children:_.jsx(T0,{size:12})}),_.jsx("div",{className:"text-[9px] text-stone-500 font-bold uppercase",children:"DEF"}),_.jsx("div",{className:"text-xs font-black text-white",children:u.def})]}),_.jsxs("div",{className:"text-center bg-black/20 py-2 rounded-lg",children:[_.jsx("div",{className:"text-cyan-400 flex justify-center mb-1",children:_.jsx(A0,{size:12})}),_.jsx("div",{className:"text-[9px] text-stone-500 font-bold uppercase",children:"SPD"}),_.jsx("div",{className:"text-xs font-black text-white",children:u.spd})]})]})]}),_.jsxs("div",{className:"w-full mb-6",children:[_.jsxs("div",{className:"text-[10px] text-stone-500 font-black uppercase tracking-widest mb-3 flex items-center gap-1.5",children:[_.jsx(UE,{size:12,className:"text-orange-500"})," "]}),_.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto custom-scrollbar pr-1",children:u.skills.map(g=>_.jsxs("div",{className:"bg-stone-900/80 border border-stone-800 rounded-lg p-2 group hover:border-stone-700 transition-colors",children:[_.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[_.jsx("span",{className:"text-[11px] font-black text-white",children:g.name}),_.jsxs("span",{className:"text-[9px] text-orange-500 font-mono font-bold",children:["x",g.power.toFixed(1)," Pwr"]})]}),_.jsx("p",{className:"text-[9px] text-stone-500 leading-tight italic line-clamp-1 group-hover:line-clamp-none",children:g.description})]},g.id))})]}),_.jsxs("div",{className:"mt-auto w-full flex flex-col gap-2",children:[!u.isActive&&_.jsx("button",{onClick:()=>e(u.id),className:"w-full py-2.5 rounded-xl bg-orange-600 hover:bg-orange-500 text-white text-xs font-black transition-all border-b-4 border-orange-800 active:border-b-0 active:translate-y-1 uppercase tracking-widest",children:""}),u.isStarter&&_.jsx("div",{className:"text-[9px] text-stone-600 font-black uppercase text-center tracking-widest",children:" ()"})]})]})]},u.id)})})]}),r&&_.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:_.jsxs("div",{className:"bg-[#1a1a1a] border-2 border-red-900/50 p-6 rounded-2xl max-w-sm w-full shadow-2xl animate-in fade-in zoom-in duration-200",children:[_.jsx("div",{className:"flex items-center justify-center mb-4 text-red-500",children:_.jsx(w0,{size:48,className:"animate-pulse"})}),_.jsx("h3",{className:"text-xl font-black text-white mb-2 text-center",children:""}),_.jsxs("p",{className:"text-stone-400 text-sm text-center mb-6",children:[" ",_.jsxs("span",{className:"text-red-400 font-bold",children:["[",r.name,"]"]})," ",r.isActive&&_.jsx("div",{className:"mt-2 text-xs text-orange-500 font-bold uppercase tracking-wider",children:""})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("button",{onClick:()=>o(null),className:"flex-1 py-2.5 bg-stone-800 hover:bg-stone-700 text-stone-300 rounded-xl font-bold transition-all border border-stone-700",children:""}),_.jsx("button",{onClick:()=>{i(r.id),o(null)},className:"flex-1 py-2.5 bg-red-600 hover:bg-red-500 text-white rounded-xl font-bold transition-all shadow-[0_0_15px_rgba(220,38,38,0.3)]",children:""})]})]})})]})},Nx=({size:s,className:e})=>_.jsx("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:_.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),Ax=({inventory:s,equipment:e,onEquipFairy:i,onUnequipFairy:r,onDeleteItem:o})=>{const[u,d]=we.useState(null),m=b=>{switch(b){case"epic":return"text-purple-400 border-purple-500 bg-purple-900/10";case"rare":return"text-blue-400 border-blue-500 bg-blue-900/10";case"uncommon":return"text-green-400 border-green-500 bg-green-900/10";default:return"text-stone-400 border-stone-700 bg-stone-900/30"}},g=b=>{switch(b){case"fairy":return _.jsx(cs,{size:24});default:return _.jsx(Jf,{size:24})}},p=b=>{var E;return((E=e.fairy)==null?void 0:E.id)===b};return _.jsxs("div",{className:"w-full h-full bg-[#1e1e1e] p-4 md:p-8 overflow-y-auto custom-scrollbar relative",children:[_.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col gap-6 md:gap-8",children:[_.jsxs("div",{className:"w-full",children:[_.jsxs("h2",{className:"text-lg md:text-xl font-black text-white mb-4 border-b border-stone-800 pb-2 flex items-center uppercase tracking-widest",children:[_.jsx(cs,{className:"mr-2 text-orange-500",size:18})," "]}),_.jsx("div",{className:"w-full max-w-md",children:_.jsxs("div",{onClick:()=>e.fairy&&d(e.fairy),className:"flex items-center p-4 md:p-5 bg-stone-900/50 rounded-2xl border border-stone-800 hover:border-orange-500/30 transition-all shadow-lg cursor-pointer group",children:[_.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 rounded-2xl flex items-center justify-center mr-4 md:mr-5 border-2 ${e.fairy?m(e.fairy.rarity):"bg-stone-800 border-dashed border-stone-700 text-stone-600"}`,children:e.fairy?_.jsx(cs,{size:24}):_.jsx(cs,{size:24,className:"opacity-20"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"text-[9px] text-stone-500 uppercase font-black tracking-[0.2em] mb-1",children:""}),_.jsx("div",{className:`text-sm md:text-base font-black ${e.fairy?"text-white":"text-stone-600"}`,children:e.fairy?e.fairy.name:""}),e.fairy&&_.jsx("div",{className:"text-[10px] text-orange-400 mt-0.5 font-bold uppercase tracking-tighter",children:""})]})]})})]}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("h2",{className:"text-lg md:text-xl font-black text-white mb-6 border-b border-stone-800 pb-2 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center uppercase tracking-widest",children:[_.jsx(Jf,{className:"mr-2 text-green-500",size:18}),"  ()"]}),_.jsxs("span",{className:"text-[10px] text-stone-500 font-bold",children:[s.length," / 12"]})]}),_.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-2.5",children:[s.map(b=>_.jsxs("div",{onClick:()=>d(b),className:`aspect-square rounded-xl border-2 flex items-center justify-center cursor-pointer transition-all hover:scale-105 active:scale-95 group relative ${m(b.rarity)} ${p(b.id)?"ring-2 ring-orange-500 ring-offset-2 ring-offset-[#1e1e1e]":""}`,children:[g(b.type),p(b.id)&&_.jsx("div",{className:"absolute -top-1 -right-1 bg-orange-500 rounded-full p-0.5 border border-stone-900",children:_.jsx(A0,{size:8,className:"text-white fill-white"})})]},b.id)),Array.from({length:Math.max(0,12-s.length)}).map((b,E)=>_.jsx("div",{className:"aspect-square rounded-xl border-2 border-stone-800 bg-stone-900/20 opacity-40"},E))]})]}),_.jsxs("div",{className:"bg-stone-900/40 p-4 rounded-2xl border border-white/5 flex items-start gap-4 mb-8",children:[_.jsx(ZE,{className:"text-stone-600 shrink-0 mt-1",size:16}),_.jsxs("div",{className:"text-[10px] md:text-[11px] text-stone-500 leading-loose",children:[_.jsx("p",{className:"font-bold text-stone-400 mb-1 uppercase tracking-widest",children:""}),""]})]})]}),u&&_.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-md p-6",children:_.jsxs("div",{className:"bg-[#1a1c21] border-2 border-stone-800 p-6 rounded-[2rem] max-w-sm w-full shadow-2xl animate-in zoom-in duration-300 relative overflow-hidden",children:[_.jsx("div",{className:`absolute top-0 left-0 w-full h-1 opacity-50 ${m(u.rarity).split(" ")[2]}`}),_.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 text-stone-600 hover:text-white transition-colors",children:_.jsx(N0,{size:24})}),_.jsxs("div",{className:"flex flex-col items-center text-center mt-4",children:[_.jsx("div",{className:`w-16 h-16 md:w-20 md:h-20 rounded-2xl flex items-center justify-center mb-4 border-2 shadow-2xl ${m(u.rarity)}`,children:g(u.type)}),_.jsx("h3",{className:"text-xl md:text-2xl font-black text-white mb-4 tracking-widest uppercase",children:u.name}),_.jsxs("p",{className:"text-stone-400 text-[10px] md:text-xs font-bold leading-relaxed mb-6 px-4 italic",children:['"',u.description,'"']}),_.jsxs("div",{className:"w-full flex flex-col gap-2 mb-8",children:[u.effectValue&&_.jsx("div",{className:"bg-black/40 p-3 rounded-xl border border-white/5",children:_.jsxs("div",{className:"flex items-center justify-between text-[10px] md:text-[11px] font-black uppercase tracking-widest",children:[_.jsx("span",{className:"text-stone-500",children:""}),_.jsxs("span",{className:"text-orange-500",children:["+",u.effectValue,"%"]})]})}),u.activationChance&&_.jsx("div",{className:"bg-black/40 p-3 rounded-xl border border-white/5",children:_.jsxs("div",{className:"flex items-center justify-between text-[10px] md:text-[11px] font-black uppercase tracking-widest",children:[_.jsx("span",{className:"text-stone-500",children:""}),_.jsxs("span",{className:"text-blue-500",children:[u.activationChance,"%"]})]})})]}),_.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[p(u.id)?_.jsx("button",{onClick:()=>{r(),d(null)},className:"w-full py-3.5 bg-stone-800 hover:bg-stone-700 text-white rounded-2xl font-black text-sm tracking-widest uppercase transition-all border-b-4 border-stone-950 active:translate-y-1 active:border-b-0",children:""}):_.jsxs("button",{onClick:()=>{i(u),d(null)},className:"w-full py-3.5 bg-orange-600 hover:bg-orange-50 text-white rounded-2xl font-black text-sm tracking-widest uppercase transition-all shadow-lg border-b-4 border-orange-900 active:translate-y-1 active:border-b-0 flex items-center justify-center gap-2",children:[_.jsx(S0,{size:18}),""]}),_.jsxs("button",{onClick:()=>{p(u.id)&&r(),o(u.id),d(null)},className:"w-full py-3.5 bg-red-900/10 hover:bg-red-900/20 text-red-500 border border-red-900/20 rounded-2xl font-black text-xs tracking-widest uppercase transition-all flex items-center justify-center gap-2",children:[_.jsx(xd,{size:16}),""]})]})]})]})})]})},Rx=({logs:s})=>{const e=we.useRef(null);we.useEffect(()=>{var r;(r=e.current)==null||r.scrollIntoView({behavior:"auto"})},[s]);const i=r=>{switch(r){case"pvp_me":return"text-lime-400 font-black drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)]";case"pvp_op":return"text-rose-500 font-black drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)]";case"damage":return"text-red-400 font-bold drop-shadow-sm";case"system":return"text-orange-400 font-black tracking-wide";case"info":return"text-blue-300 font-medium";default:return"text-white font-medium"}};return _.jsxs("div",{className:"h-full px-8 pt-4 pb-10 space-y-1.5 overflow-y-auto custom-scrollbar flex flex-col",children:[s.map(r=>_.jsxs("div",{className:`${i(r.type)} text-sm md:text-lg leading-relaxed tracking-tight animate-in fade-in slide-in-from-bottom-2`,children:[_.jsx("span",{className:"opacity-30 mr-3 font-mono text-xs md:text-sm tracking-tighter",children:new Date(parseInt(r.id)).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}),_.jsx("span",{className:"drop-shadow-md",children:r.text})]},r.id)),_.jsx("div",{ref:e,className:"h-4"})]})},Ox=()=>{};var l_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q=function(s,e){if(!s)throw ya(e)},ya=function(s){return new Error("Firebase Database ("+R0.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=function(s){const e=[];let i=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},kx=function(s){const e=[];let i=0,r=0;for(;i<s.length;){const o=s[i++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[i++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[i++],d=s[i++],m=s[i++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[i++],d=s[i++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Sd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,m=d?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,b=u>>2,E=(u&3)<<4|m>>4;let x=(m&15)<<2|p>>6,R=p&63;g||(R=64,d||(x=64)),r.push(i[b],i[E],i[x],i[R])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(O0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):kx(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=i[s.charAt(o++)],m=o<s.length?i[s.charAt(o)]:0;++o;const p=o<s.length?i[s.charAt(o)]:64;++o;const E=o<s.length?i[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||E==null)throw new Mx;const x=u<<2|m>>4;if(r.push(x),p!==64){const R=m<<4&240|p>>2;if(r.push(R),E!==64){const P=p<<6&192|E;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Mx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k0=function(s){const e=O0(s);return Sd.encodeByteArray(e,!0)},Do=function(s){return k0(s).replace(/\./g,"")},Io=function(s){try{return Sd.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(s){return M0(void 0,s)}function M0(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const i=e;return new Date(i.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const i in e)!e.hasOwnProperty(i)||!Ix(i)||(s[i]=M0(s[i],e[i]));return s}function Ix(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=()=>Lx().__FIREBASE_DEFAULTS__,jx=()=>{if(typeof process>"u"||typeof l_>"u")return;const s=l_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},zx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Io(s[1]);return e&&JSON.parse(e)},Td=()=>{try{return Ox()||Ux()||jx()||zx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},D0=s=>{var e,i;return(i=(e=Td())==null?void 0:e.emulatorHosts)==null?void 0:i[s]},Hx=s=>{const e=D0(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),r]:[e.substring(0,i),r]},I0=()=>{var s;return(s=Td())==null?void 0:s.config},L0=s=>{var e;return(e=Td())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function U0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Do(JSON.stringify(i)),Do(JSON.stringify(d)),""].join(".")}const Or={};function Px(){const s={prod:[],emulator:[]};for(const e of Object.keys(Or))Or[e]?s.emulator.push(e):s.prod.push(e);return s}function qx(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let o_=!1;function j0(s,e){if(typeof window>"u"||typeof document>"u"||!va(window.location.host)||Or[s]===e||Or[s]||o_)return;Or[s]=e;function i(x){return`__firebase__banner__${x}`}const r="__firebase__banner",u=Px().prod.length>0;function d(){const x=document.getElementById(r);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,R){x.setAttribute("width","24"),x.setAttribute("id",R),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{o_=!0,d()},x}function b(x,R){x.setAttribute("id",R),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function E(){const x=qx(r),R=i("text"),P=document.getElementById(R)||document.createElement("span"),J=i("learnmore"),re=document.getElementById(J)||document.createElement("a"),I=i("preprendIcon"),D=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const U=x.element;m(U),b(re,J);const H=p();g(D,I),U.append(D,P,re,H),document.body.appendChild(U)}u?(P.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function Vx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Gx(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function z0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yx(){const s=St();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Fx(){return R0.NODE_ADMIN===!0}function Qx(){try{return typeof indexedDB=="object"}catch{return!1}}function Xx(){return new Promise((s,e)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="FirebaseError";class Li extends Error{constructor(e,i,r){super(i),this.code=e,this.customData=r,this.name=Kx,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zr.prototype.create)}}class Zr{constructor(e,i,r){this.service=e,this.serviceName=i,this.errors=r}create(e,...i){const r=i[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?Wx(u,r):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Li(o,m,r)}}function Wx(s,e){return s.replace(Zx,(i,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Zx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(s){return JSON.parse(s)}function nt(s){return JSON.stringify(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=function(s){let e={},i={},r={},o="";try{const u=s.split(".");e=zr(Io(u[0])||""),i=zr(Io(u[1])||""),o=u[2],r=i.d||{},delete i.d}catch{}return{header:e,claims:i,data:r,signature:o}},$x=function(s){const e=H0(s),i=e.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},Jx=function(s){const e=H0(s).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function ua(s,e){if(Object.prototype.hasOwnProperty.call(s,e))return s[e]}function Lo(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Uo(s,e,i){const r={};for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=e.call(i,s[o],o,s));return r}function ds(s,e){if(s===e)return!0;const i=Object.keys(s),r=Object.keys(e);for(const o of i){if(!r.includes(o))return!1;const u=s[o],d=e[o];if(c_(u)&&c_(d)){if(!ds(u,d))return!1}else if(u!==d)return!1}for(const o of r)if(!i.includes(o))return!1;return!0}function c_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(s){const e=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,i){i||(i=0);const r=this.W_;if(typeof e=="string")for(let E=0;E<16;E++)r[E]=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),i+=4;else for(let E=0;E<16;E++)r[E]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i+=4;for(let E=16;E<80;E++){const x=r[E-3]^r[E-8]^r[E-14]^r[E-16];r[E]=(x<<1|x>>>31)&4294967295}let o=this.chain_[0],u=this.chain_[1],d=this.chain_[2],m=this.chain_[3],g=this.chain_[4],p,b;for(let E=0;E<80;E++){E<40?E<20?(p=m^u&(d^m),b=1518500249):(p=u^d^m,b=1859775393):E<60?(p=u&d|m&(u|d),b=2400959708):(p=u^d^m,b=3395469782);const x=(o<<5|o>>>27)+p+g+b+r[E]&4294967295;g=m,m=d,d=(u<<30|u>>>2)&4294967295,u=o,o=x}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(e,i){if(e==null)return;i===void 0&&(i=e.length);const r=i-this.blockSize;let o=0;const u=this.buf_;let d=this.inbuf_;for(;o<i;){if(d===0)for(;o<=r;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<i;)if(u[d]=e.charCodeAt(o),++d,++o,d===this.blockSize){this.compress_(u),d=0;break}}else for(;o<i;)if(u[d]=e[o],++d,++o,d===this.blockSize){this.compress_(u),d=0;break}}this.inbuf_=d,this.total_+=i}digest(){const e=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=i&255,i/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let u=24;u>=0;u-=8)e[r]=this.chain_[o]>>u&255,++r;return e}}function tS(s,e){const i=new nS(s,e);return i.subscribe.bind(i)}class nS{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,r){let o;if(e===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");iS(e,["next","error","complete"])?o=e:o={next:e,error:i,complete:r},o.next===void 0&&(o.next=zf),o.error===void 0&&(o.error=zf),o.complete===void 0&&(o.complete=zf);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{i(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iS(s,e){if(typeof s!="object"||s===null)return!1;for(const i of e)if(i in s&&typeof s[i]=="function")return!0;return!1}function zf(){}function fa(s,e){return`${s} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=function(s){const e=[];let i=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);if(o>=55296&&o<=56319){const u=o-55296;r++,q(r<s.length,"Surrogate pair missing trail surrogate.");const d=s.charCodeAt(r)-56320;o=65536+(u<<10)+d}o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):o<65536?(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},ic=function(s){let e=0;for(let i=0;i<s.length;i++){const r=s.charCodeAt(i);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,i++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(s){return s&&s._delegate?s._delegate:s}class hs{constructor(e,i,r){this.name=e,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const r=new mn;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lS(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&d.resolve(o)}return o}onInit(e,i){const r=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,i){const r=this.onInitCallbacks.get(i);if(r)for(const o of r)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rS(e),options:i}),this.instances.set(e,r),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rS(s){return s===ls?void 0:s}function lS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new aS(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Re||(Re={}));const cS={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},uS=Re.INFO,fS={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},dS=(s,e,...i)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=fS[e];if(o)console[o](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cd{constructor(e){this.name=e,this._logLevel=uS,this._logHandler=dS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const hS=(s,e)=>e.some(i=>s instanceof i);let u_,f_;function mS(){return u_||(u_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pS(){return f_||(f_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B0=new WeakMap,ed=new WeakMap,P0=new WeakMap,Hf=new WeakMap,Nd=new WeakMap;function gS(s){const e=new Promise((i,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{i(Ti(s.result)),o()},d=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&B0.set(i,s)}).catch(()=>{}),Nd.set(e,s),e}function _S(s){if(ed.has(s))return;const e=new Promise((i,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{i(),o()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});ed.set(s,e)}let td={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return ed.get(s);if(e==="objectStoreNames")return s.objectStoreNames||P0.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Ti(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function yS(s){td=s(td)}function vS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const r=s.call(Bf(this),e,...i);return P0.set(r,e.sort?e.sort():[e]),Ti(r)}:pS().includes(s)?function(...e){return s.apply(Bf(this),e),Ti(B0.get(this))}:function(...e){return Ti(s.apply(Bf(this),e))}}function bS(s){return typeof s=="function"?vS(s):(s instanceof IDBTransaction&&_S(s),hS(s,mS())?new Proxy(s,td):s)}function Ti(s){if(s instanceof IDBRequest)return gS(s);if(Hf.has(s))return Hf.get(s);const e=bS(s);return e!==s&&(Hf.set(s,e),Nd.set(e,s)),e}const Bf=s=>Nd.get(s);function ES(s,e,{blocked:i,upgrade:r,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),m=Ti(d);return r&&d.addEventListener("upgradeneeded",g=>{r(Ti(d.result),g.oldVersion,g.newVersion,Ti(d.transaction),g)}),i&&d.addEventListener("blocked",g=>i(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const xS=["get","getKey","getAll","getAllKeys","count"],SS=["put","add","delete","clear"],Pf=new Map;function d_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Pf.get(e))return Pf.get(e);const i=e.replace(/FromIndex$/,""),r=e!==i,o=SS.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(o||xS.includes(i)))return;const u=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[i](...m),o&&g.done]))[0]};return Pf.set(e,u),u}yS(s=>({...s,get:(e,i,r)=>d_(e,i)||s.get(e,i,r),has:(e,i)=>!!d_(e,i)||s.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(wS(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function wS(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nd="@firebase/app",h_="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new Cd("@firebase/app"),CS="@firebase/app-compat",NS="@firebase/analytics-compat",AS="@firebase/analytics",RS="@firebase/app-check-compat",OS="@firebase/app-check",kS="@firebase/auth",MS="@firebase/auth-compat",DS="@firebase/database",IS="@firebase/data-connect",LS="@firebase/database-compat",US="@firebase/functions",jS="@firebase/functions-compat",zS="@firebase/installations",HS="@firebase/installations-compat",BS="@firebase/messaging",PS="@firebase/messaging-compat",qS="@firebase/performance",VS="@firebase/performance-compat",GS="@firebase/remote-config",YS="@firebase/remote-config-compat",FS="@firebase/storage",QS="@firebase/storage-compat",XS="@firebase/firestore",KS="@firebase/ai",WS="@firebase/firestore-compat",ZS="firebase",$S="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="[DEFAULT]",JS={[nd]:"fire-core",[CS]:"fire-core-compat",[AS]:"fire-analytics",[NS]:"fire-analytics-compat",[OS]:"fire-app-check",[RS]:"fire-app-check-compat",[kS]:"fire-auth",[MS]:"fire-auth-compat",[DS]:"fire-rtdb",[IS]:"fire-data-connect",[LS]:"fire-rtdb-compat",[US]:"fire-fn",[jS]:"fire-fn-compat",[zS]:"fire-iid",[HS]:"fire-iid-compat",[BS]:"fire-fcm",[PS]:"fire-fcm-compat",[qS]:"fire-perf",[VS]:"fire-perf-compat",[GS]:"fire-rc",[YS]:"fire-rc-compat",[FS]:"fire-gcs",[QS]:"fire-gcs-compat",[XS]:"fire-fst",[WS]:"fire-fst-compat",[KS]:"fire-vertex","fire-js":"fire-js",[ZS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Map,eT=new Map,sd=new Map;function m_(s,e){try{s.container.addComponent(e)}catch(i){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function da(s){const e=s.name;if(sd.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;sd.set(e,s);for(const i of Hr.values())m_(i,s);for(const i of eT.values())m_(i,s);return!0}function Ad(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function tn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wi=new Zr("app","Firebase",tT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,i,r){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=$S;function q0(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const r={name:id,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw wi.create("bad-app-name",{appName:String(o)});if(i||(i=I0()),!i)throw wi.create("no-options");const u=Hr.get(o);if(u){if(ds(i,u.options)&&ds(r,u.config))return u;throw wi.create("duplicate-app",{appName:o})}const d=new oS(o);for(const g of sd.values())d.addComponent(g);const m=new nT(i,r,d);return Hr.set(o,m),m}function Rd(s=id){const e=Hr.get(s);if(!e&&s===id&&I0())return q0();if(!e)throw wi.create("no-app",{appName:s});return e}function iT(){return Array.from(Hr.values())}function Ci(s,e,i){let r=JS[s]??s;i&&(r+=`-${i}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${r}" with version "${e}":`];o&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(d.join(" "));return}da(new hs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="firebase-heartbeat-database",aT=1,Br="firebase-heartbeat-store";let qf=null;function V0(){return qf||(qf=ES(sT,aT,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Br)}catch(i){console.warn(i)}}}}).catch(s=>{throw wi.create("idb-open",{originalErrorMessage:s.message})})),qf}async function rT(s){try{const i=(await V0()).transaction(Br),r=await i.objectStore(Br).get(G0(s));return await i.done,r}catch(e){if(e instanceof Li)Bn.warn(e.message);else{const i=wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bn.warn(i.message)}}}async function p_(s,e){try{const r=(await V0()).transaction(Br,"readwrite");await r.objectStore(Br).put(e,G0(s)),await r.done}catch(i){if(i instanceof Li)Bn.warn(i.message);else{const r=wi.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Bn.warn(r.message)}}}function G0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=1024,oT=30;class cT{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new fT(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=g_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)==null?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>oT){const d=dT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Bn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=g_(),{heartbeatsToSend:r,unsentEntries:o}=uT(this._heartbeatsCache.heartbeats),u=Do(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(i){return Bn.warn(i),""}}}function g_(){return new Date().toISOString().substring(0,10)}function uT(s,e=lT){const i=[];let r=s.slice();for(const o of s){const u=i.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),__(i)>e){u.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),__(i)>e){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class fT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qx()?Xx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await rT(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return p_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return p_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function __(s){return Do(JSON.stringify({version:2,heartbeats:s})).length}function dT(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(s){da(new hs("platform-logger",e=>new TS(e),"PRIVATE")),da(new hs("heartbeat",e=>new cT(e),"PRIVATE")),Ci(nd,h_,s),Ci(nd,h_,"esm2020"),Ci("fire-js","")}hT("");var mT="firebase",pT="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ci(mT,pT,"app");var y_={};const v_="@firebase/database",b_="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y0="";function gT(s){Y0=s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,i){i==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),nt(i))}get(e){const i=this.domStorage_.getItem(this.prefixedName_(e));return i==null?null:zr(i)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,i){i==null?delete this.cache_[e]:this.cache_[e]=i}get(e){return yn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const e=window[s];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _T(e)}}catch{}return new yT},us=F0("localStorage"),vT=F0("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new Cd("@firebase/database"),bT=(function(){let s=1;return function(){return s++}})(),Q0=function(s){const e=sS(s),i=new eS;i.update(e);const r=i.digest();return Sd.encodeByteArray(r)},$r=function(...s){let e="";for(let i=0;i<s.length;i++){const r=s[i];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=$r.apply(null,r):typeof r=="object"?e+=nt(r):e+=r,e+=" "}return e};let kr=null,E_=!0;const ET=function(s,e){q(!0,"Can't turn on custom loggers persistently."),aa.logLevel=Re.VERBOSE,kr=aa.log.bind(aa)},ct=function(...s){if(E_===!0&&(E_=!1,kr===null&&vT.get("logging_enabled")===!0&&ET()),kr){const e=$r.apply(null,s);kr(e)}},Jr=function(s){return function(...e){ct(s,...e)}},ad=function(...s){const e="FIREBASE INTERNAL ERROR: "+$r(...s);aa.error(e)},Pn=function(...s){const e=`FIREBASE FATAL ERROR: ${$r(...s)}`;throw aa.error(e),new Error(e)},xt=function(...s){const e="FIREBASE WARNING: "+$r(...s);aa.warn(e)},xT=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},sc=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},ST=function(s){if(document.readyState==="complete")s();else{let e=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}e||(e=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},ha="[MIN_NAME]",ms="[MAX_NAME]",ys=function(s,e){if(s===e)return 0;if(s===ha||e===ms)return-1;if(e===ha||s===ms)return 1;{const i=x_(s),r=x_(e);return i!==null?r!==null?i-r===0?s.length-e.length:i-r:-1:r!==null?1:s<e?-1:1}},TT=function(s,e){return s===e?0:s<e?-1:1},Cr=function(s,e){if(e&&s in e)return e[s];throw new Error("Missing required key ("+s+") in object: "+nt(e))},Od=function(s){if(typeof s!="object"||s===null)return nt(s);const e=[];for(const r in s)e.push(r);e.sort();let i="{";for(let r=0;r<e.length;r++)r!==0&&(i+=","),i+=nt(e[r]),i+=":",i+=Od(s[e[r]]);return i+="}",i},X0=function(s,e){const i=s.length;if(i<=e)return[s];const r=[];for(let o=0;o<i;o+=e)o+e>i?r.push(s.substring(o,i)):r.push(s.substring(o,o+e));return r};function ut(s,e){for(const i in s)s.hasOwnProperty(i)&&e(i,s[i])}const K0=function(s){q(!sc(s),"Invalid JSON number");const e=11,i=52,r=(1<<e-1)-1;let o,u,d,m,g;s===0?(u=0,d=0,o=1/s===-1/0?1:0):(o=s<0,s=Math.abs(s),s>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(s)/Math.LN2),r),u=m+r,d=Math.round(s*Math.pow(2,i-m)-Math.pow(2,i))):(u=0,d=Math.round(s/Math.pow(2,1-r-i))));const p=[];for(g=i;g;g-=1)p.push(d%2?1:0),d=Math.floor(d/2);for(g=e;g;g-=1)p.push(u%2?1:0),u=Math.floor(u/2);p.push(o?1:0),p.reverse();const b=p.join("");let E="";for(g=0;g<64;g+=8){let x=parseInt(b.substr(g,8),2).toString(16);x.length===1&&(x="0"+x),E=E+x}return E.toLowerCase()},wT=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},CT=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function NT(s,e){let i="Unknown Error";s==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?i="Client doesn't have permission to access the desired data.":s==="unavailable"&&(i="The service is unavailable");const r=new Error(s+" at "+e._path.toString()+": "+i);return r.code=s.toUpperCase(),r}const AT=new RegExp("^-?(0*)\\d{1,10}$"),RT=-2147483648,OT=2147483647,x_=function(s){if(AT.test(s)){const e=Number(s);if(e>=RT&&e<=OT)return e}return null},xa=function(s){try{s()}catch(e){setTimeout(()=>{const i=e.stack||"";throw xt("Exception was thrown by user callback.",i),e},Math.floor(0))}},kT=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Mr=function(s,e){const i=setTimeout(s,e);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,i){this.appCheckProvider=i,this.appName=e.name,tn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((i,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(i,r):i(null)},0)})}addTokenChangeListener(e){var i;(i=this.appCheckProvider)==null||i.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){xt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,i,r){this.appName_=e,this.firebaseOptions_=i,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(i=>i&&i.code==="auth/token-not-initialized"?(ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(i,r):i(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(i=>i.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(i=>i.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xt(e)}}class No{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}No.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="5",W0="v",Z0="s",$0="r",J0="f",ey=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ty="ls",ny="p",rd="ac",iy="websocket",sy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,i,r,o,u=!1,d="",m=!1,g=!1,p=null){this.secure=i,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=d,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=g,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=us.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&us.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${i}`}}function IT(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function ry(s,e,i){q(typeof e=="string","typeof type must == string"),q(typeof i=="object","typeof params must == object");let r;if(e===iy)r=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(e===sy)r=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);IT(s)&&(i.ns=s.namespace);const o=[];return ut(i,(u,d)=>{o.push(u+"="+d)}),r+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.counters_={}}incrementCounter(e,i=1){yn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=i}get(){return Dx(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf={},Gf={};function Md(s){const e=s.toString();return Vf[e]||(Vf[e]=new LT),Vf[e]}function UT(s,e){const i=s.toString();return Gf[i]||(Gf[i]=e()),Gf[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,i){this.closeAfterResponse=e,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,i){for(this.pendingResponses[e]=i;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&xa(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="start",zT="close",HT="pLPCommand",BT="pRTLPCB",ly="id",oy="pw",cy="ser",PT="cb",qT="seg",VT="ts",GT="d",YT="dframe",uy=1870,fy=30,FT=uy-fy,QT=25e3,XT=3e4;class ia{constructor(e,i,r,o,u,d,m){this.connId=e,this.repoInfo=i,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=d,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jr(e),this.stats_=Md(i),this.urlFn=g=>(this.appCheckToken&&(g[rd]=this.appCheckToken),ry(i,sy,g))}open(e,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new jT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(XT)),ST(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Dd((...u)=>{const[d,m,g,p,b]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===S_)this.id=m,this.password=g;else if(d===zT)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...u)=>{const[d,m]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(d,m)},()=>{this.onClosed_()},this.urlFn);const r={};r[S_]="t",r[cy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[PT]=this.scriptTagHolder.uniqueCallbackIdentifier),r[W0]=kd,this.transportSessionId&&(r[Z0]=this.transportSessionId),this.lastSessionId&&(r[ty]=this.lastSessionId),this.applicationId&&(r[ny]=this.applicationId),this.appCheckToken&&(r[rd]=this.appCheckToken),typeof location<"u"&&location.hostname&&ey.test(location.hostname)&&(r[$0]=J0);const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ia.forceAllow_=!0}static forceDisallow(){ia.forceDisallow_=!0}static isAvailable(){return ia.forceAllow_?!0:!ia.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!wT()&&!CT()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const i=nt(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=k0(i),o=X0(r,FT);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(e,i){this.myDisconnFrame=document.createElement("iframe");const r={};r[YT]="t",r[ly]=e,r[oy]=i,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const i=nt(e).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Dd{constructor(e,i,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=bT(),window[HT+this.uniqueCallbackIdentifier]=e,window[BT+this.uniqueCallbackIdentifier]=i,this.myIFrame=Dd.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(m){ct("frame writing exception"),m.stack&&ct(m.stack),ct(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ct("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,i){for(this.myID=e,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ly]=this.myID,e[oy]=this.myPW,e[cy]=this.currentSerial;let i=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+fy+r.length<=uy;){const d=this.pendingSegs.shift();r=r+"&"+qT+o+"="+d.seg+"&"+VT+o+"="+d.ts+"&"+GT+o+"="+d.d,o++}return i=i+r,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(e,i,r){this.pendingSegs.push({seg:e,ts:i,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,i){this.outstandingRequests.add(i);const r=()=>{this.outstandingRequests.delete(i),this.newRequest_()},o=setTimeout(r,Math.floor(QT)),u=()=>{clearTimeout(o),r()};this.addTag(e,u)}addTag(e,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),i())},r.onerror=()=>{ct("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=16384,WT=45e3;let jo=null;typeof MozWebSocket<"u"?jo=MozWebSocket:typeof WebSocket<"u"&&(jo=WebSocket);class nn{constructor(e,i,r,o,u,d,m){this.connId=e,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jr(this.connId),this.stats_=Md(i),this.connURL=nn.connectionURL_(i,d,m,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,o,u){const d={};return d[W0]=kd,typeof location<"u"&&location.hostname&&ey.test(location.hostname)&&(d[$0]=J0),i&&(d[Z0]=i),r&&(d[ty]=r),o&&(d[rd]=o),u&&(d[ny]=u),ry(e,iy,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,us.set("previous_websocket_failure",!0);try{let r;Fx(),this.mySock=new jo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){nn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&jo!==null&&!nn.forceDisallow_}static previouslyFailed(){return us.isInMemoryStorage||us.get("previous_websocket_failure")===!0}markConnectionHealthy(){us.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=zr(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(q(this.frames===null,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=nt(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=X0(i,KT);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WT))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}nn.responsesRequiredToBeHealthy=2;nn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{static get ALL_TRANSPORTS(){return[ia,nn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const i=nn&&nn.isAvailable();let r=i&&!nn.previouslyFailed();if(e.webSocketOnly&&(i||xt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[nn];else{const o=this.transports_=[];for(const u of Pr.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);Pr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Pr.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=6e4,$T=5e3,JT=10*1024,ew=100*1024,Yf="t",T_="d",tw="s",w_="r",nw="e",C_="o",N_="a",A_="n",R_="p",iw="h";class sw{constructor(e,i,r,o,u,d,m,g,p,b){this.id=e,this.repoInfo_=i,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=d,this.onReady_=m,this.onDisconnect_=g,this.onKill_=p,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jr("c:"+this.id+":"),this.transportManager_=new Pr(i),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Mr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ew?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>JT?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return i=>{e===this.conn_?this.onConnectionLost_(i):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return i=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(i):e===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(e){const i={t:"d",d:e};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Yf in e){const i=e[Yf];i===N_?this.upgradeIfSecondaryHealthy_():i===w_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===C_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const i=Cr("t",e),r=Cr("d",e);if(i==="c")this.onSecondaryControl_(r);else if(i==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:R_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:N_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:A_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const i=Cr("t",e),r=Cr("d",e);i==="c"?this.onControl_(r):i==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const i=Cr(Yf,e);if(T_ in e){const r=e[T_];if(i===iw){const o={...r};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(i===A_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===tw?this.onConnectionShutdown_(r):i===w_?this.onReset_(r):i===nw?ad("Server Error: "+r):i===C_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ad("Unknown control packet command: "+i)}}onHandshake_(e){const i=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),kd!==r&&xt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,r),Mr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ZT))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,i){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Mr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor($T))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:R_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(us.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{put(e,i,r,o){}merge(e,i,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,i,r){}onDisconnectMerge(e,i,r){}onDisconnectCancel(e,i){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e){this.allowedEvents_=e,this.listeners_={},q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...i){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,i)}}on(e,i,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:i,context:r});const o=this.getInitialEvent(e);o&&i.apply(r,o)}off(e,i,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let u=0;u<o.length;u++)if(o[u].callback===i&&(!r||r===o[u].context)){o.splice(u,1);return}}validateEventType_(e){q(this.allowedEvents_.find(i=>i===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends hy{static getInstance(){return new zo}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!wd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=32,k_=768;class Ce{constructor(e,i){if(i===void 0){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=i}toString(){let e="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(e+="/"+this.pieces_[i]);return e||"/"}}function xe(){return new Ce("")}function fe(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function Oi(s){return s.pieces_.length-s.pieceNum_}function Me(s){let e=s.pieceNum_;return e<s.pieces_.length&&e++,new Ce(s.pieces_,e)}function Id(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function aw(s){let e="";for(let i=s.pieceNum_;i<s.pieces_.length;i++)s.pieces_[i]!==""&&(e+="/"+encodeURIComponent(String(s.pieces_[i])));return e||"/"}function qr(s,e=0){return s.pieces_.slice(s.pieceNum_+e)}function my(s){if(s.pieceNum_>=s.pieces_.length)return null;const e=[];for(let i=s.pieceNum_;i<s.pieces_.length-1;i++)e.push(s.pieces_[i]);return new Ce(e,0)}function Be(s,e){const i=[];for(let r=s.pieceNum_;r<s.pieces_.length;r++)i.push(s.pieces_[r]);if(e instanceof Ce)for(let r=e.pieceNum_;r<e.pieces_.length;r++)i.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&i.push(r[o])}return new Ce(i,0)}function he(s){return s.pieceNum_>=s.pieces_.length}function Et(s,e){const i=fe(s),r=fe(e);if(i===null)return e;if(i===r)return Et(Me(s),Me(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+s+")")}function rw(s,e){const i=qr(s,0),r=qr(e,0);for(let o=0;o<i.length&&o<r.length;o++){const u=ys(i[o],r[o]);if(u!==0)return u}return i.length===r.length?0:i.length<r.length?-1:1}function Ld(s,e){if(Oi(s)!==Oi(e))return!1;for(let i=s.pieceNum_,r=e.pieceNum_;i<=s.pieces_.length;i++,r++)if(s.pieces_[i]!==e.pieces_[r])return!1;return!0}function Kt(s,e){let i=s.pieceNum_,r=e.pieceNum_;if(Oi(s)>Oi(e))return!1;for(;i<s.pieces_.length;){if(s.pieces_[i]!==e.pieces_[r])return!1;++i,++r}return!0}class lw{constructor(e,i){this.errorPrefix_=i,this.parts_=qr(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ic(this.parts_[r]);py(this)}}function ow(s,e){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(e),s.byteLength_+=ic(e),py(s)}function cw(s){const e=s.parts_.pop();s.byteLength_-=ic(e),s.parts_.length>0&&(s.byteLength_-=1)}function py(s){if(s.byteLength_>k_)throw new Error(s.errorPrefix_+"has a key path longer than "+k_+" bytes ("+s.byteLength_+").");if(s.parts_.length>O_)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+O_+") or object contains a cycle "+os(s))}function os(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends hy{static getInstance(){return new Ud}constructor(){super(["visible"]);let e,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return q(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=1e3,uw=300*1e3,M_=30*1e3,fw=1.3,dw=3e4,hw="server_kill",D_=3;class Hn extends dy{constructor(e,i,r,o,u,d,m,g){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=m,this.authOverride_=g,this.id=Hn.nextPersistentConnectionId_++,this.log_=Jr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Nr,this.maxReconnectDelay_=uw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ud.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&zo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const o=++this.requestNumber_,u={r:o,a:e,b:i};this.log_(nt(u)),q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[o]=r)}get(e){this.initConnection_();const i=new mn,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const m=d.d;d.s==="ok"?i.resolve(m):i.reject(m)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),i.promise}listen(e,i,r,o){this.initConnection_();const u=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),q(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:i,query:e,tag:r};this.listens.get(d).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const u={p:r},d="q";e.tag&&(u.q=i._queryObject,u.t=e.tag),u.h=e.hashFn(),this.sendRequest(d,u,m=>{const g=m.d,p=m.s;Hn.warnOnListenWarnings_(g,i),(this.listens.get(r)&&this.listens.get(r).get(o))===e&&(this.log_("listen response",m),p!=="ok"&&this.removeListen_(r,o),e.onComplete&&e.onComplete(p,g))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&yn(e,"w")){const r=ua(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();xt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Jx(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=M_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=$x(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const u=o.s,d=o.d||"error";this.authToken_===e&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,e._queryObject,i)}sendUnlisten_(e,i,r,o){this.log_("Unlisten on "+e+" for "+i);const u={p:e},d="n";o&&(u.q=r,u.t=o),this.sendRequest(d,u)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,o){const u={p:i,d:r};this.log_("onDisconnect "+e,u),this.sendRequest(e,u,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(e,i,r,o){this.putInternal("p",e,i,r,o)}merge(e,i,r,o){this.putInternal("m",e,i,r,o)}putInternal(e,i,r,o,u){this.initConnection_();const d={p:i,d:r};u!==void 0&&(d.h=u),this.outstandingPuts_.push({action:e,request:d,onComplete:o}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){const u=r.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+nt(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):ad("Unrecognized action received from server: "+nt(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Nr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>dw&&(this.reconnectDelay_=Nr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Hn.nextConnectionId_++,u=this.lastSessionId;let d=!1,m=null;const g=function(){m?m.close():(d=!0,r())},p=function(E){q(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(E)};this.realtime_={close:g,sendRequest:p};const b=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[E,x]=await Promise.all([this.authTokenProvider_.getToken(b),this.appCheckTokenProvider_.getToken(b)]);d?ct("getToken() completed but was canceled"):(ct("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=x&&x.token,m=new sw(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,r,R=>{xt(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(hw)},u))}catch(E){this.log_("Failed to get token: "+E),d||(this.repoInfo_.nodeAdmin&&xt(E),g())}}}interrupt(e){ct("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ct("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Lo(this.interruptReasons_)&&(this.reconnectDelay_=Nr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;i?r=i.map(u=>Od(u)).join("$"):r="default";const o=this.removeListen_(e,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,i){const r=new Ce(e).toString();let o;if(this.listens.has(r)){const u=this.listens.get(r);o=u.get(i),u.delete(i),u.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(e,i){ct("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=D_&&(this.reconnectDelay_=M_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){ct("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=D_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";e["sdk."+i+"."+Y0.replace(/\./g,"-")]=1,wd()?e["framework.cordova"]=1:z0()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=zo.getInstance().currentlyOnline();return Lo(this.interruptReasons_)&&e}}Hn.nextPersistentConnectionId_=0;Hn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e,i){this.name=e,this.node=i}static Wrap(e,i){return new me(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,i){const r=new me(ha,e),o=new me(ha,i);return this.compare(r,o)!==0}minPost(){return me.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xo;class gy extends ac{static get __EMPTY_NODE(){return xo}static set __EMPTY_NODE(e){xo=e}compare(e,i){return ys(e.name,i.name)}isDefinedOn(e){throw ya("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,i){return!1}minPost(){return me.MIN}maxPost(){return new me(ms,xo)}makePost(e,i){return q(typeof e=="string","KeyIndex indexValue must always be a string."),new me(e,xo)}toString(){return".key"}}const ra=new gy;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,i,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=i?r(e.key,i):1,o&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(e.key,e.value):i={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ot{constructor(e,i,r,o,u){this.key=e,this.value=i,this.color=r??ot.RED,this.left=o??Rt.EMPTY_NODE,this.right=u??Rt.EMPTY_NODE}copy(e,i,r,o,u){return new ot(e??this.key,i??this.value,r??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let o=this;const u=r(e,o.key);return u<0?o=o.copy(null,null,null,o.left.insert(e,i,r),null):u===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,o;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(e,r.key)===0){if(r.right.isEmpty())return Rt.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ot.RED=!0;ot.BLACK=!1;class mw{copy(e,i,r,o,u){return this}insert(e,i,r){return new ot(e,i,null)}remove(e,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Rt{constructor(e,i=Rt.EMPTY_NODE){this.comparator_=e,this.root_=i}insert(e,i){return new Rt(this.comparator_,this.root_.insert(e,i,this.comparator_).copy(null,null,ot.BLACK,null,null))}remove(e){return new Rt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ot.BLACK,null,null))}get(e){let i,r=this.root_;for(;!r.isEmpty();){if(i=this.comparator_(e,r.key),i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}getPredecessorKey(e){let i,r=this.root_,o=null;for(;!r.isEmpty();)if(i=this.comparator_(e,r.key),i===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else i<0?r=r.left:i>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new So(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,i){return new So(this.root_,e,this.comparator_,!1,i)}getReverseIteratorFrom(e,i){return new So(this.root_,e,this.comparator_,!0,i)}getReverseIterator(e){return new So(this.root_,null,this.comparator_,!0,e)}}Rt.EMPTY_NODE=new mw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(s,e){return ys(s.name,e.name)}function jd(s,e){return ys(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld;function gw(s){ld=s}const _y=function(s){return typeof s=="number"?"number:"+K0(s):"string:"+s},yy=function(s){if(s.isLeafNode()){const e=s.val();q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&yn(e,".sv"),"Priority must be a string or number.")}else q(s===ld||s.isEmpty(),"priority of unexpected type.");q(s===ld||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I_;class lt{static set __childrenNodeConstructor(e){I_=e}static get __childrenNodeConstructor(){return I_}constructor(e,i=lt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yy(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new lt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:lt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return he(e)?this:fe(e)===".priority"?this.priorityNode_:lt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:lt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=fe(e);return r===null?i:i.isEmpty()&&r!==".priority"?this:(q(r!==".priority"||Oi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,lt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Me(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+_y(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",i==="number"?e+=K0(this.value_):e+=this.value_,this.lazyHash_=Q0(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===lt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof lt.__childrenNodeConstructor?-1:(q(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,o=lt.VALUE_TYPE_ORDER.indexOf(i),u=lt.VALUE_TYPE_ORDER.indexOf(r);return q(o>=0,"Unknown leaf type: "+i),q(u>=0,"Unknown leaf type: "+r),o===u?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}lt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vy,by;function _w(s){vy=s}function yw(s){by=s}class vw extends ac{compare(e,i){const r=e.node.getPriority(),o=i.node.getPriority(),u=r.compareTo(o);return u===0?ys(e.name,i.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,i){return!e.getPriority().equals(i.getPriority())}minPost(){return me.MIN}maxPost(){return new me(ms,new lt("[PRIORITY-POST]",by))}makePost(e,i){const r=vy(e);return new me(i,new lt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Pe=new vw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=Math.log(2);class Ew{constructor(e){const i=u=>parseInt(Math.log(u)/bw,10),r=u=>parseInt(Array(u+1).join("1"),2);this.count=i(e+1),this.current_=this.count-1;const o=r(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ho=function(s,e,i,r){s.sort(e);const o=function(g,p){const b=p-g;let E,x;if(b===0)return null;if(b===1)return E=s[g],x=i?i(E):E,new ot(x,E.node,ot.BLACK,null,null);{const R=parseInt(b/2,10)+g,P=o(g,R),J=o(R+1,p);return E=s[R],x=i?i(E):E,new ot(x,E.node,ot.BLACK,P,J)}},u=function(g){let p=null,b=null,E=s.length;const x=function(P,J){const re=E-P,I=E;E-=P;const D=o(re+1,I),U=s[re],H=i?i(U):U;R(new ot(H,U.node,J,null,D))},R=function(P){p?(p.left=P,p=P):(b=P,p=P)};for(let P=0;P<g.count;++P){const J=g.nextBitIsOne(),re=Math.pow(2,g.count-(P+1));J?x(re,ot.BLACK):(x(re,ot.BLACK),x(re,ot.RED))}return b},d=new Ew(s.length),m=u(d);return new Rt(r||e,m)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff;const na={};class Un{static get Default(){return q(na&&Pe,"ChildrenNode.ts has not been loaded"),Ff=Ff||new Un({".priority":na},{".priority":Pe}),Ff}constructor(e,i){this.indexes_=e,this.indexSet_=i}get(e){const i=ua(this.indexes_,e);if(!i)throw new Error("No index defined for "+e);return i instanceof Rt?i:null}hasIndex(e){return yn(this.indexSet_,e.toString())}addIndex(e,i){q(e!==ra,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=i.getIterator(me.Wrap);let d=u.getNext();for(;d;)o=o||e.isDefinedOn(d.node),r.push(d),d=u.getNext();let m;o?m=Ho(r,e.getCompare()):m=na;const g=e.toString(),p={...this.indexSet_};p[g]=e;const b={...this.indexes_};return b[g]=m,new Un(b,p)}addToIndexes(e,i){const r=Uo(this.indexes_,(o,u)=>{const d=ua(this.indexSet_,u);if(q(d,"Missing index implementation for "+u),o===na)if(d.isDefinedOn(e.node)){const m=[],g=i.getIterator(me.Wrap);let p=g.getNext();for(;p;)p.name!==e.name&&m.push(p),p=g.getNext();return m.push(e),Ho(m,d.getCompare())}else return na;else{const m=i.get(e.name);let g=o;return m&&(g=g.remove(new me(e.name,m))),g.insert(e,e.node)}});return new Un(r,this.indexSet_)}removeFromIndexes(e,i){const r=Uo(this.indexes_,o=>{if(o===na)return o;{const u=i.get(e.name);return u?o.remove(new me(e.name,u)):o}});return new Un(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ar;class ie{static get EMPTY_NODE(){return Ar||(Ar=new ie(new Rt(jd),null,Un.Default))}constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&yy(this.priorityNode_),this.children_.isEmpty()&&q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ar}updatePriority(e){return this.children_.isEmpty()?this:new ie(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const i=this.children_.get(e);return i===null?Ar:i}}getChild(e){const i=fe(e);return i===null?this:this.getImmediateChild(i).getChild(Me(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(q(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{const r=new me(e,i);let o,u;i.isEmpty()?(o=this.children_.remove(e),u=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,i),u=this.indexMap_.addToIndexes(r,this.children_));const d=o.isEmpty()?Ar:this.priorityNode_;return new ie(o,d,u)}}updateChild(e,i){const r=fe(e);if(r===null)return i;{q(fe(e)!==".priority"||Oi(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(Me(e),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,o=0,u=!0;if(this.forEachChild(Pe,(d,m)=>{i[d]=m.val(e),r++,u&&ie.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):u=!1}),!e&&u&&o<2*r){const d=[];for(const m in i)d[m]=i[m];return d}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+_y(this.getPriority().val())+":"),this.forEachChild(Pe,(i,r)=>{const o=r.hash();o!==""&&(e+=":"+i+":"+o)}),this.lazyHash_=e===""?"":Q0(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const o=this.resolveIndex_(r);if(o){const u=o.getPredecessorKey(new me(e,i));return u?u.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new me(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new me(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,me.Wrap);let u=o.peek();for(;u!=null&&i.compare(u,e)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,me.Wrap);let u=o.peek();for(;u!=null&&i.compare(u,e)>0;)o.getNext(),u=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===el?-1:0}withIndex(e){if(e===ra||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new ie(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===ra||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const r=this.getIterator(Pe),o=i.getIterator(Pe);let u=r.getNext(),d=o.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=r.getNext(),d=o.getNext()}return u===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===ra?null:this.indexMap_.get(e.toString())}}ie.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class xw extends ie{constructor(){super(new Rt(jd),ie.EMPTY_NODE,Un.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ie.EMPTY_NODE}isEmpty(){return!1}}const el=new xw;Object.defineProperties(me,{MIN:{value:new me(ha,ie.EMPTY_NODE)},MAX:{value:new me(ms,el)}});gy.__EMPTY_NODE=ie.EMPTY_NODE;lt.__childrenNodeConstructor=ie;gw(el);yw(el);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=!0;function Ye(s,e=null){if(s===null)return ie.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(e=s[".priority"]),q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const i=s;return new lt(i,Ye(e))}if(!(s instanceof Array)&&Sw){const i=[];let r=!1;if(ut(s,(d,m)=>{if(d.substring(0,1)!=="."){const g=Ye(m);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),i.push(new me(d,g)))}}),i.length===0)return ie.EMPTY_NODE;const u=Ho(i,pw,d=>d.name,jd);if(r){const d=Ho(i,Pe.getCompare());return new ie(u,Ye(e),new Un({".priority":d},{".priority":Pe}))}else return new ie(u,Ye(e),Un.Default)}else{let i=ie.EMPTY_NODE;return ut(s,(r,o)=>{if(yn(s,r)&&r.substring(0,1)!=="."){const u=Ye(o);(u.isLeafNode()||!u.isEmpty())&&(i=i.updateImmediateChild(r,u))}}),i.updatePriority(Ye(e))}}_w(Ye);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw extends ac{constructor(e){super(),this.indexPath_=e,q(!he(e)&&fe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,i){const r=this.extractChild(e.node),o=this.extractChild(i.node),u=r.compareTo(o);return u===0?ys(e.name,i.name):u}makePost(e,i){const r=Ye(e),o=ie.EMPTY_NODE.updateChild(this.indexPath_,r);return new me(i,o)}maxPost(){const e=ie.EMPTY_NODE.updateChild(this.indexPath_,el);return new me(ms,e)}toString(){return qr(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww extends ac{compare(e,i){const r=e.node.compareTo(i.node);return r===0?ys(e.name,i.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,i){return!e.equals(i)}minPost(){return me.MIN}maxPost(){return me.MAX}makePost(e,i){const r=Ye(e);return new me(i,r)}toString(){return".value"}}const Cw=new ww;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(s){return{type:"value",snapshotNode:s}}function ma(s,e){return{type:"child_added",snapshotNode:e,childName:s}}function Vr(s,e){return{type:"child_removed",snapshotNode:e,childName:s}}function Gr(s,e,i){return{type:"child_changed",snapshotNode:e,childName:s,oldSnap:i}}function Nw(s,e){return{type:"child_moved",snapshotNode:e,childName:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e){this.index_=e}updateChild(e,i,r,o,u,d){q(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(i);return m.getChild(o).equals(r.getChild(o))&&m.isEmpty()===r.isEmpty()||(d!=null&&(r.isEmpty()?e.hasChild(i)?d.trackChildChange(Vr(i,m)):q(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?d.trackChildChange(ma(i,r)):d.trackChildChange(Gr(i,r,m))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(i,r).withIndex(this.index_)}updateFullNode(e,i,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Pe,(o,u)=>{i.hasChild(o)||r.trackChildChange(Vr(o,u))}),i.isLeafNode()||i.forEachChild(Pe,(o,u)=>{if(e.hasChild(o)){const d=e.getImmediateChild(o);d.equals(u)||r.trackChildChange(Gr(o,u,d))}else r.trackChildChange(ma(o,u))})),i.withIndex(this.index_)}updatePriority(e,i){return e.isEmpty()?ie.EMPTY_NODE:e.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.indexedFilter_=new zd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Yr.getStartPost_(e),this.endPost_=Yr.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return i&&r}updateChild(e,i,r,o,u,d){return this.matches(new me(i,r))||(r=ie.EMPTY_NODE),this.indexedFilter_.updateChild(e,i,r,o,u,d)}updateFullNode(e,i,r){i.isLeafNode()&&(i=ie.EMPTY_NODE);let o=i.withIndex(this.index_);o=o.updatePriority(ie.EMPTY_NODE);const u=this;return i.forEachChild(Pe,(d,m)=>{u.matches(new me(d,m))||(o=o.updateImmediateChild(d,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const i=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),i)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const i=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),i)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=i=>{const r=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Yr(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,i,r,o,u,d){return this.rangedFilter_.matches(new me(i,r))||(r=ie.EMPTY_NODE),e.getImmediateChild(i).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,i,r,o,u,d):this.fullLimitUpdateChild_(e,i,r,u,d)}updateFullNode(e,i,r){let o;if(i.isLeafNode()||i.isEmpty())o=ie.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){o=ie.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;u.hasNext()&&d<this.limit_;){const m=u.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))o=o.updateImmediateChild(m.name,m.node),d++;else break;else continue}}else{o=i.withIndex(this.index_),o=o.updatePriority(ie.EMPTY_NODE);let u;this.reverse_?u=o.getReverseIterator(this.index_):u=o.getIterator(this.index_);let d=0;for(;u.hasNext();){const m=u.getNext();d<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?d++:o=o.updateImmediateChild(m.name,ie.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,i,r,o,u){let d;if(this.reverse_){const E=this.index_.getCompare();d=(x,R)=>E(R,x)}else d=this.index_.getCompare();const m=e;q(m.numChildren()===this.limit_,"");const g=new me(i,r),p=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),b=this.rangedFilter_.matches(g);if(m.hasChild(i)){const E=m.getImmediateChild(i);let x=o.getChildAfterChild(this.index_,p,this.reverse_);for(;x!=null&&(x.name===i||m.hasChild(x.name));)x=o.getChildAfterChild(this.index_,x,this.reverse_);const R=x==null?1:d(x,g);if(b&&!r.isEmpty()&&R>=0)return u!=null&&u.trackChildChange(Gr(i,r,E)),m.updateImmediateChild(i,r);{u!=null&&u.trackChildChange(Vr(i,E));const J=m.updateImmediateChild(i,ie.EMPTY_NODE);return x!=null&&this.rangedFilter_.matches(x)?(u!=null&&u.trackChildChange(ma(x.name,x.node)),J.updateImmediateChild(x.name,x.node)):J}}else return r.isEmpty()?e:b&&d(p,g)>=0?(u!=null&&(u.trackChildChange(Vr(p.name,p.node)),u.trackChildChange(ma(i,r))),m.updateImmediateChild(i,r).updateImmediateChild(p.name,ie.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ha}hasEnd(){return this.endSet_}getIndexEndValue(){return q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ms}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pe}copy(){const e=new Hd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Rw(s){return s.loadsAllData()?new zd(s.getIndex()):s.hasLimit()?new Aw(s):new Yr(s)}function L_(s){const e={};if(s.isDefault())return e;let i;if(s.index_===Pe?i="$priority":s.index_===Cw?i="$value":s.index_===ra?i="$key":(q(s.index_ instanceof Tw,"Unrecognized index type!"),i=s.index_.toString()),e.orderBy=nt(i),s.startSet_){const r=s.startAfterSet_?"startAfter":"startAt";e[r]=nt(s.indexStartValue_),s.startNameSet_&&(e[r]+=","+nt(s.indexStartName_))}if(s.endSet_){const r=s.endBeforeSet_?"endBefore":"endAt";e[r]=nt(s.indexEndValue_),s.endNameSet_&&(e[r]+=","+nt(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?e.limitToFirst=s.limit_:e.limitToLast=s.limit_),e}function U_(s){const e={};if(s.startSet_&&(e.sp=s.indexStartValue_,s.startNameSet_&&(e.sn=s.indexStartName_),e.sin=!s.startAfterSet_),s.endSet_&&(e.ep=s.indexEndValue_,s.endNameSet_&&(e.en=s.indexEndName_),e.ein=!s.endBeforeSet_),s.limitSet_){e.l=s.limit_;let i=s.viewFrom_;i===""&&(s.isViewFromLeft()?i="l":i="r"),e.vf=i}return s.index_!==Pe&&(e.i=s.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends dy{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,i){return i!==void 0?"tag$"+i:(q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,i,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=i,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=Jr("p:rest:"),this.listens_={}}listen(e,i,r,o){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const d=Bo.getListenId_(e,r),m={};this.listens_[d]=m;const g=L_(e._queryParams);this.restRequest_(u+".json",g,(p,b)=>{let E=b;if(p===404&&(E=null,p=null),p===null&&this.onDataUpdate_(u,E,!1,r),ua(this.listens_,d)===m){let x;p?p===401?x="permission_denied":x="rest_error:"+p:x="ok",o(x,null)}})}unlisten(e,i){const r=Bo.getListenId_(e,i);delete this.listens_[r]}get(e){const i=L_(e._queryParams),r=e._path.toString(),o=new mn;return this.restRequest_(r+".json",i,(u,d)=>{let m=d;u===404&&(m=null,u=null),u===null?(this.onDataUpdate_(r,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(e){}restRequest_(e,i={},r){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(i.auth=o.accessToken),u&&u.token&&(i.ac=u.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ba(i);this.log_("Sending REST request for "+d);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&m.readyState===4){this.log_("REST Response for "+d+" received. status:",m.status,"response:",m.responseText);let g=null;if(m.status>=200&&m.status<300){try{g=zr(m.responseText)}catch{xt("Failed to parse JSON response for "+d+": "+m.responseText)}r(null,g)}else m.status!==401&&m.status!==404&&xt("Got unsuccessful REST response for "+d+" Status: "+m.status),r(m.status);r=null}},m.open("GET",d,!0),m.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.rootNode_=ie.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,i){this.rootNode_=this.rootNode_.updateChild(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(){return{value:null,children:new Map}}function Sa(s,e,i){if(he(e))s.value=i,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(e,i);else{const r=fe(e);s.children.has(r)||s.children.set(r,Po());const o=s.children.get(r);e=Me(e),Sa(o,e,i)}}function od(s,e){if(he(e))return s.value=null,s.children.clear(),!0;if(s.value!==null){if(s.value.isLeafNode())return!1;{const i=s.value;return s.value=null,i.forEachChild(Pe,(r,o)=>{Sa(s,new Ce(r),o)}),od(s,e)}}else if(s.children.size>0){const i=fe(e);return e=Me(e),s.children.has(i)&&od(s.children.get(i),e)&&s.children.delete(i),s.children.size===0}else return!0}function cd(s,e,i){s.value!==null?i(e,s.value):kw(s,(r,o)=>{const u=new Ce(e.toString()+"/"+r);cd(o,u,i)})}function kw(s,e){s.children.forEach((i,r)=>{e(r,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),i={...e};return this.last_&&ut(this.last_,(r,o)=>{i[r]=i[r]-o}),this.last_=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=10*1e3,Dw=30*1e3,Iw=300*1e3;class Lw{constructor(e,i){this.server_=i,this.statsToReport_={},this.statsListener_=new Mw(e);const r=j_+(Dw-j_)*Math.random();Mr(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),i={};let r=!1;ut(e,(o,u)=>{u>0&&yn(this.statsToReport_,o)&&(i[o]=u,r=!0)}),r&&this.server_.reportStats(i),Mr(this.reportStats_.bind(this),Math.floor(Math.random()*2*Iw))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(sn||(sn={}));function Bd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Pd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function qd(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,i,r){this.path=e,this.affectedTree=i,this.revert=r,this.type=sn.ACK_USER_WRITE,this.source=Bd()}operationForChild(e){if(he(this.path)){if(this.affectedTree.value!=null)return q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new Ce(e));return new qo(xe(),i,this.revert)}}else return q(fe(this.path)===e,"operationForChild called for unrelated child."),new qo(Me(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,i){this.source=e,this.path=i,this.type=sn.LISTEN_COMPLETE}operationForChild(e){return he(this.path)?new Fr(this.source,xe()):new Fr(this.source,Me(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,i,r){this.source=e,this.path=i,this.snap=r,this.type=sn.OVERWRITE}operationForChild(e){return he(this.path)?new ps(this.source,xe(),this.snap.getImmediateChild(e)):new ps(this.source,Me(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,i,r){this.source=e,this.path=i,this.children=r,this.type=sn.MERGE}operationForChild(e){if(he(this.path)){const i=this.children.subtree(new Ce(e));return i.isEmpty()?null:i.value?new ps(this.source,xe(),i.value):new pa(this.source,xe(),i)}else return q(fe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pa(this.source,Me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,i,r){this.node_=e,this.fullyInitialized_=i,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(he(e))return this.isFullyInitialized()&&!this.filtered_;const i=fe(e);return this.isCompleteForChild(i)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function jw(s,e,i,r){const o=[],u=[];return e.forEach(d=>{d.type==="child_changed"&&s.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&u.push(Nw(d.childName,d.snapshotNode))}),Rr(s,o,"child_removed",e,r,i),Rr(s,o,"child_added",e,r,i),Rr(s,o,"child_moved",u,r,i),Rr(s,o,"child_changed",e,r,i),Rr(s,o,"value",e,r,i),o}function Rr(s,e,i,r,o,u){const d=r.filter(m=>m.type===i);d.sort((m,g)=>Hw(s,m,g)),d.forEach(m=>{const g=zw(s,m,u);o.forEach(p=>{p.respondsTo(m.type)&&e.push(p.createEvent(g,s.query_))})})}function zw(s,e,i){return e.type==="value"||e.type==="child_removed"||(e.prevName=i.getPredecessorChildName(e.childName,e.snapshotNode,s.index_)),e}function Hw(s,e,i){if(e.childName==null||i.childName==null)throw ya("Should only compare child_ events.");const r=new me(e.childName,e.snapshotNode),o=new me(i.childName,i.snapshotNode);return s.index_.compare(r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(s,e){return{eventCache:s,serverCache:e}}function Dr(s,e,i,r){return rc(new ki(e,i,r),s.serverCache)}function xy(s,e,i,r){return rc(s.eventCache,new ki(e,i,r))}function Vo(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function gs(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qf;const Bw=()=>(Qf||(Qf=new Rt(TT)),Qf);class Le{static fromObject(e){let i=new Le(null);return ut(e,(r,o)=>{i=i.set(new Ce(r),o)}),i}constructor(e,i=Bw()){this.value=e,this.children=i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,i){if(this.value!=null&&i(this.value))return{path:xe(),value:this.value};if(he(e))return null;{const r=fe(e),o=this.children.get(r);if(o!==null){const u=o.findRootMostMatchingPathAndValue(Me(e),i);return u!=null?{path:Be(new Ce(r),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(he(e))return this;{const i=fe(e),r=this.children.get(i);return r!==null?r.subtree(Me(e)):new Le(null)}}set(e,i){if(he(e))return new Le(i,this.children);{const r=fe(e),u=(this.children.get(r)||new Le(null)).set(Me(e),i),d=this.children.insert(r,u);return new Le(this.value,d)}}remove(e){if(he(e))return this.children.isEmpty()?new Le(null):new Le(null,this.children);{const i=fe(e),r=this.children.get(i);if(r){const o=r.remove(Me(e));let u;return o.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,o),this.value===null&&u.isEmpty()?new Le(null):new Le(this.value,u)}else return this}}get(e){if(he(e))return this.value;{const i=fe(e),r=this.children.get(i);return r?r.get(Me(e)):null}}setTree(e,i){if(he(e))return i;{const r=fe(e),u=(this.children.get(r)||new Le(null)).setTree(Me(e),i);let d;return u.isEmpty()?d=this.children.remove(r):d=this.children.insert(r,u),new Le(this.value,d)}}fold(e){return this.fold_(xe(),e)}fold_(e,i){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(Be(e,o),i)}),i(e,this.value,r)}findOnPath(e,i){return this.findOnPath_(e,xe(),i)}findOnPath_(e,i,r){const o=this.value?r(i,this.value):!1;if(o)return o;if(he(e))return null;{const u=fe(e),d=this.children.get(u);return d?d.findOnPath_(Me(e),Be(i,u),r):null}}foreachOnPath(e,i){return this.foreachOnPath_(e,xe(),i)}foreachOnPath_(e,i,r){if(he(e))return this;{this.value&&r(i,this.value);const o=fe(e),u=this.children.get(o);return u?u.foreachOnPath_(Me(e),Be(i,o),r):new Le(null)}}foreach(e){this.foreach_(xe(),e)}foreach_(e,i){this.children.inorderTraversal((r,o)=>{o.foreach_(Be(e,r),i)}),this.value&&i(e,this.value)}foreachChild(e){this.children.inorderTraversal((i,r)=>{r.value&&e(i,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.writeTree_=e}static empty(){return new rn(new Le(null))}}function Ir(s,e,i){if(he(e))return new rn(new Le(i));{const r=s.writeTree_.findRootMostValueAndPath(e);if(r!=null){const o=r.path;let u=r.value;const d=Et(o,e);return u=u.updateChild(d,i),new rn(s.writeTree_.set(o,u))}else{const o=new Le(i),u=s.writeTree_.setTree(e,o);return new rn(u)}}}function ud(s,e,i){let r=s;return ut(i,(o,u)=>{r=Ir(r,Be(e,o),u)}),r}function z_(s,e){if(he(e))return rn.empty();{const i=s.writeTree_.setTree(e,new Le(null));return new rn(i)}}function fd(s,e){return vs(s,e)!=null}function vs(s,e){const i=s.writeTree_.findRootMostValueAndPath(e);return i!=null?s.writeTree_.get(i.path).getChild(Et(i.path,e)):null}function H_(s){const e=[],i=s.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Pe,(r,o)=>{e.push(new me(r,o))}):s.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&e.push(new me(r,o.value))}),e}function Ni(s,e){if(he(e))return s;{const i=vs(s,e);return i!=null?new rn(new Le(i)):new rn(s.writeTree_.subtree(e))}}function dd(s){return s.writeTree_.isEmpty()}function ga(s,e){return Sy(xe(),s.writeTree_,e)}function Sy(s,e,i){if(e.value!=null)return i.updateChild(s,e.value);{let r=null;return e.children.inorderTraversal((o,u)=>{o===".priority"?(q(u.value!==null,"Priority writes must always be leaf nodes"),r=u.value):i=Sy(Be(s,o),u,i)}),!i.getChild(s).isEmpty()&&r!==null&&(i=i.updateChild(Be(s,".priority"),r)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(s,e){return Ny(e,s)}function Pw(s,e,i,r,o){q(r>s.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),s.allWrites.push({path:e,snap:i,writeId:r,visible:o}),o&&(s.visibleWrites=Ir(s.visibleWrites,e,i)),s.lastWriteId=r}function qw(s,e,i,r){q(r>s.lastWriteId,"Stacking an older merge on top of newer ones"),s.allWrites.push({path:e,children:i,writeId:r,visible:!0}),s.visibleWrites=ud(s.visibleWrites,e,i),s.lastWriteId=r}function Vw(s,e){for(let i=0;i<s.allWrites.length;i++){const r=s.allWrites[i];if(r.writeId===e)return r}return null}function Gw(s,e){const i=s.allWrites.findIndex(m=>m.writeId===e);q(i>=0,"removeWrite called with nonexistent writeId.");const r=s.allWrites[i];s.allWrites.splice(i,1);let o=r.visible,u=!1,d=s.allWrites.length-1;for(;o&&d>=0;){const m=s.allWrites[d];m.visible&&(d>=i&&Yw(m,r.path)?o=!1:Kt(r.path,m.path)&&(u=!0)),d--}if(o){if(u)return Fw(s),!0;if(r.snap)s.visibleWrites=z_(s.visibleWrites,r.path);else{const m=r.children;ut(m,g=>{s.visibleWrites=z_(s.visibleWrites,Be(r.path,g))})}return!0}else return!1}function Yw(s,e){if(s.snap)return Kt(s.path,e);for(const i in s.children)if(s.children.hasOwnProperty(i)&&Kt(Be(s.path,i),e))return!0;return!1}function Fw(s){s.visibleWrites=Ty(s.allWrites,Qw,xe()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function Qw(s){return s.visible}function Ty(s,e,i){let r=rn.empty();for(let o=0;o<s.length;++o){const u=s[o];if(e(u)){const d=u.path;let m;if(u.snap)Kt(i,d)?(m=Et(i,d),r=Ir(r,m,u.snap)):Kt(d,i)&&(m=Et(d,i),r=Ir(r,xe(),u.snap.getChild(m)));else if(u.children){if(Kt(i,d))m=Et(i,d),r=ud(r,m,u.children);else if(Kt(d,i))if(m=Et(d,i),he(m))r=ud(r,xe(),u.children);else{const g=ua(u.children,fe(m));if(g){const p=g.getChild(Me(m));r=Ir(r,xe(),p)}}}else throw ya("WriteRecord should have .snap or .children")}}return r}function wy(s,e,i,r,o){if(!r&&!o){const u=vs(s.visibleWrites,e);if(u!=null)return u;{const d=Ni(s.visibleWrites,e);if(dd(d))return i;if(i==null&&!fd(d,xe()))return null;{const m=i||ie.EMPTY_NODE;return ga(d,m)}}}else{const u=Ni(s.visibleWrites,e);if(!o&&dd(u))return i;if(!o&&i==null&&!fd(u,xe()))return null;{const d=function(p){return(p.visible||o)&&(!r||!~r.indexOf(p.writeId))&&(Kt(p.path,e)||Kt(e,p.path))},m=Ty(s.allWrites,d,e),g=i||ie.EMPTY_NODE;return ga(m,g)}}}function Xw(s,e,i){let r=ie.EMPTY_NODE;const o=vs(s.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Pe,(u,d)=>{r=r.updateImmediateChild(u,d)}),r;if(i){const u=Ni(s.visibleWrites,e);return i.forEachChild(Pe,(d,m)=>{const g=ga(Ni(u,new Ce(d)),m);r=r.updateImmediateChild(d,g)}),H_(u).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}else{const u=Ni(s.visibleWrites,e);return H_(u).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}}function Kw(s,e,i,r,o){q(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=Be(e,i);if(fd(s.visibleWrites,u))return null;{const d=Ni(s.visibleWrites,u);return dd(d)?o.getChild(i):ga(d,o.getChild(i))}}function Ww(s,e,i,r){const o=Be(e,i),u=vs(s.visibleWrites,o);if(u!=null)return u;if(r.isCompleteForChild(i)){const d=Ni(s.visibleWrites,o);return ga(d,r.getNode().getImmediateChild(i))}else return null}function Zw(s,e){return vs(s.visibleWrites,e)}function $w(s,e,i,r,o,u,d){let m;const g=Ni(s.visibleWrites,e),p=vs(g,xe());if(p!=null)m=p;else if(i!=null)m=ga(g,i);else return[];if(m=m.withIndex(d),!m.isEmpty()&&!m.isLeafNode()){const b=[],E=d.getCompare(),x=u?m.getReverseIteratorFrom(r,d):m.getIteratorFrom(r,d);let R=x.getNext();for(;R&&b.length<o;)E(R,r)!==0&&b.push(R),R=x.getNext();return b}else return[]}function Jw(){return{visibleWrites:rn.empty(),allWrites:[],lastWriteId:-1}}function Go(s,e,i,r){return wy(s.writeTree,s.treePath,e,i,r)}function Vd(s,e){return Xw(s.writeTree,s.treePath,e)}function B_(s,e,i,r){return Kw(s.writeTree,s.treePath,e,i,r)}function Yo(s,e){return Zw(s.writeTree,Be(s.treePath,e))}function eC(s,e,i,r,o,u){return $w(s.writeTree,s.treePath,e,i,r,o,u)}function Gd(s,e,i){return Ww(s.writeTree,s.treePath,e,i)}function Cy(s,e){return Ny(Be(s.treePath,e),s.writeTree)}function Ny(s,e){return{treePath:s,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.changeMap=new Map}trackChildChange(e){const i=e.type,r=e.childName;q(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),q(r!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if(i==="child_added"&&u==="child_removed")this.changeMap.set(r,Gr(r,e.snapshotNode,o.snapshotNode));else if(i==="child_removed"&&u==="child_added")this.changeMap.delete(r);else if(i==="child_removed"&&u==="child_changed")this.changeMap.set(r,Vr(r,o.oldSnap));else if(i==="child_changed"&&u==="child_added")this.changeMap.set(r,ma(r,e.snapshotNode));else if(i==="child_changed"&&u==="child_changed")this.changeMap.set(r,Gr(r,e.snapshotNode,o.oldSnap));else throw ya("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{getCompleteChild(e){return null}getChildAfterChild(e,i,r){return null}}const Ay=new nC;class Yd{constructor(e,i,r=null){this.writes_=e,this.viewCache_=i,this.optCompleteServerCache_=r}getCompleteChild(e){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(e))return i.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new ki(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gd(this.writes_,e,r)}}getChildAfterChild(e,i,r){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:gs(this.viewCache_),u=eC(this.writes_,o,i,1,r,e);return u.length===0?null:u[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(s){return{filter:s}}function sC(s,e){q(e.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),q(e.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function aC(s,e,i,r,o){const u=new tC;let d,m;if(i.type===sn.OVERWRITE){const p=i;p.source.fromUser?d=hd(s,e,p.path,p.snap,r,o,u):(q(p.source.fromServer,"Unknown source."),m=p.source.tagged||e.serverCache.isFiltered()&&!he(p.path),d=Fo(s,e,p.path,p.snap,r,o,m,u))}else if(i.type===sn.MERGE){const p=i;p.source.fromUser?d=lC(s,e,p.path,p.children,r,o,u):(q(p.source.fromServer,"Unknown source."),m=p.source.tagged||e.serverCache.isFiltered(),d=md(s,e,p.path,p.children,r,o,m,u))}else if(i.type===sn.ACK_USER_WRITE){const p=i;p.revert?d=uC(s,e,p.path,r,o,u):d=oC(s,e,p.path,p.affectedTree,r,o,u)}else if(i.type===sn.LISTEN_COMPLETE)d=cC(s,e,i.path,r,u);else throw ya("Unknown operation type: "+i.type);const g=u.getChanges();return rC(e,d,g),{viewCache:d,changes:g}}function rC(s,e,i){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=Vo(s);(i.length>0||!s.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&i.push(Ey(Vo(e)))}}function Ry(s,e,i,r,o,u){const d=e.eventCache;if(Yo(r,i)!=null)return e;{let m,g;if(he(i))if(q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=gs(e),b=p instanceof ie?p:ie.EMPTY_NODE,E=Vd(r,b);m=s.filter.updateFullNode(e.eventCache.getNode(),E,u)}else{const p=Go(r,gs(e));m=s.filter.updateFullNode(e.eventCache.getNode(),p,u)}else{const p=fe(i);if(p===".priority"){q(Oi(i)===1,"Can't have a priority with additional path components");const b=d.getNode();g=e.serverCache.getNode();const E=B_(r,i,b,g);E!=null?m=s.filter.updatePriority(b,E):m=d.getNode()}else{const b=Me(i);let E;if(d.isCompleteForChild(p)){g=e.serverCache.getNode();const x=B_(r,i,d.getNode(),g);x!=null?E=d.getNode().getImmediateChild(p).updateChild(b,x):E=d.getNode().getImmediateChild(p)}else E=Gd(r,p,e.serverCache);E!=null?m=s.filter.updateChild(d.getNode(),p,E,b,o,u):m=d.getNode()}}return Dr(e,m,d.isFullyInitialized()||he(i),s.filter.filtersNodes())}}function Fo(s,e,i,r,o,u,d,m){const g=e.serverCache;let p;const b=d?s.filter:s.filter.getIndexedFilter();if(he(i))p=b.updateFullNode(g.getNode(),r,null);else if(b.filtersNodes()&&!g.isFiltered()){const R=g.getNode().updateChild(i,r);p=b.updateFullNode(g.getNode(),R,null)}else{const R=fe(i);if(!g.isCompleteForPath(i)&&Oi(i)>1)return e;const P=Me(i),re=g.getNode().getImmediateChild(R).updateChild(P,r);R===".priority"?p=b.updatePriority(g.getNode(),re):p=b.updateChild(g.getNode(),R,re,P,Ay,null)}const E=xy(e,p,g.isFullyInitialized()||he(i),b.filtersNodes()),x=new Yd(o,E,u);return Ry(s,E,i,o,x,m)}function hd(s,e,i,r,o,u,d){const m=e.eventCache;let g,p;const b=new Yd(o,e,u);if(he(i))p=s.filter.updateFullNode(e.eventCache.getNode(),r,d),g=Dr(e,p,!0,s.filter.filtersNodes());else{const E=fe(i);if(E===".priority")p=s.filter.updatePriority(e.eventCache.getNode(),r),g=Dr(e,p,m.isFullyInitialized(),m.isFiltered());else{const x=Me(i),R=m.getNode().getImmediateChild(E);let P;if(he(x))P=r;else{const J=b.getCompleteChild(E);J!=null?Id(x)===".priority"&&J.getChild(my(x)).isEmpty()?P=J:P=J.updateChild(x,r):P=ie.EMPTY_NODE}if(R.equals(P))g=e;else{const J=s.filter.updateChild(m.getNode(),E,P,x,b,d);g=Dr(e,J,m.isFullyInitialized(),s.filter.filtersNodes())}}}return g}function P_(s,e){return s.eventCache.isCompleteForChild(e)}function lC(s,e,i,r,o,u,d){let m=e;return r.foreach((g,p)=>{const b=Be(i,g);P_(e,fe(b))&&(m=hd(s,m,b,p,o,u,d))}),r.foreach((g,p)=>{const b=Be(i,g);P_(e,fe(b))||(m=hd(s,m,b,p,o,u,d))}),m}function q_(s,e,i){return i.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function md(s,e,i,r,o,u,d,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let g=e,p;he(i)?p=r:p=new Le(null).setTree(i,r);const b=e.serverCache.getNode();return p.children.inorderTraversal((E,x)=>{if(b.hasChild(E)){const R=e.serverCache.getNode().getImmediateChild(E),P=q_(s,R,x);g=Fo(s,g,new Ce(E),P,o,u,d,m)}}),p.children.inorderTraversal((E,x)=>{const R=!e.serverCache.isCompleteForChild(E)&&x.value===null;if(!b.hasChild(E)&&!R){const P=e.serverCache.getNode().getImmediateChild(E),J=q_(s,P,x);g=Fo(s,g,new Ce(E),J,o,u,d,m)}}),g}function oC(s,e,i,r,o,u,d){if(Yo(o,i)!=null)return e;const m=e.serverCache.isFiltered(),g=e.serverCache;if(r.value!=null){if(he(i)&&g.isFullyInitialized()||g.isCompleteForPath(i))return Fo(s,e,i,g.getNode().getChild(i),o,u,m,d);if(he(i)){let p=new Le(null);return g.getNode().forEachChild(ra,(b,E)=>{p=p.set(new Ce(b),E)}),md(s,e,i,p,o,u,m,d)}else return e}else{let p=new Le(null);return r.foreach((b,E)=>{const x=Be(i,b);g.isCompleteForPath(x)&&(p=p.set(b,g.getNode().getChild(x)))}),md(s,e,i,p,o,u,m,d)}}function cC(s,e,i,r,o){const u=e.serverCache,d=xy(e,u.getNode(),u.isFullyInitialized()||he(i),u.isFiltered());return Ry(s,d,i,r,Ay,o)}function uC(s,e,i,r,o,u){let d;if(Yo(r,i)!=null)return e;{const m=new Yd(r,e,o),g=e.eventCache.getNode();let p;if(he(i)||fe(i)===".priority"){let b;if(e.serverCache.isFullyInitialized())b=Go(r,gs(e));else{const E=e.serverCache.getNode();q(E instanceof ie,"serverChildren would be complete if leaf node"),b=Vd(r,E)}b=b,p=s.filter.updateFullNode(g,b,u)}else{const b=fe(i);let E=Gd(r,b,e.serverCache);E==null&&e.serverCache.isCompleteForChild(b)&&(E=g.getImmediateChild(b)),E!=null?p=s.filter.updateChild(g,b,E,Me(i),m,u):e.eventCache.getNode().hasChild(b)?p=s.filter.updateChild(g,b,ie.EMPTY_NODE,Me(i),m,u):p=g,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=Go(r,gs(e)),d.isLeafNode()&&(p=s.filter.updateFullNode(p,d,u)))}return d=e.serverCache.isFullyInitialized()||Yo(r,xe())!=null,Dr(e,p,d,s.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,i){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new zd(r.getIndex()),u=Rw(r);this.processor_=iC(u);const d=i.serverCache,m=i.eventCache,g=o.updateFullNode(ie.EMPTY_NODE,d.getNode(),null),p=u.updateFullNode(ie.EMPTY_NODE,m.getNode(),null),b=new ki(g,d.isFullyInitialized(),o.filtersNodes()),E=new ki(p,m.isFullyInitialized(),u.filtersNodes());this.viewCache_=rc(E,b),this.eventGenerator_=new Uw(this.query_)}get query(){return this.query_}}function dC(s){return s.viewCache_.serverCache.getNode()}function hC(s){return Vo(s.viewCache_)}function mC(s,e){const i=gs(s.viewCache_);return i&&(s.query._queryParams.loadsAllData()||!he(e)&&!i.getImmediateChild(fe(e)).isEmpty())?i.getChild(e):null}function V_(s){return s.eventRegistrations_.length===0}function pC(s,e){s.eventRegistrations_.push(e)}function G_(s,e,i){const r=[];if(i){q(e==null,"A cancel should cancel all event registrations.");const o=s.query._path;s.eventRegistrations_.forEach(u=>{const d=u.createCancelEvent(i,o);d&&r.push(d)})}if(e){let o=[];for(let u=0;u<s.eventRegistrations_.length;++u){const d=s.eventRegistrations_[u];if(!d.matches(e))o.push(d);else if(e.hasAnyCallback()){o=o.concat(s.eventRegistrations_.slice(u+1));break}}s.eventRegistrations_=o}else s.eventRegistrations_=[];return r}function Y_(s,e,i,r){e.type===sn.MERGE&&e.source.queryId!==null&&(q(gs(s.viewCache_),"We should always have a full cache before handling merges"),q(Vo(s.viewCache_),"Missing event cache, even though we have a server cache"));const o=s.viewCache_,u=aC(s.processor_,o,e,i,r);return sC(s.processor_,u.viewCache),q(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=u.viewCache,Oy(s,u.changes,u.viewCache.eventCache.getNode(),null)}function gC(s,e){const i=s.viewCache_.eventCache,r=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Pe,(u,d)=>{r.push(ma(u,d))}),i.isFullyInitialized()&&r.push(Ey(i.getNode())),Oy(s,r,i.getNode(),e)}function Oy(s,e,i,r){const o=r?[r]:s.eventRegistrations_;return jw(s.eventGenerator_,e,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo;class ky{constructor(){this.views=new Map}}function _C(s){q(!Qo,"__referenceConstructor has already been defined"),Qo=s}function yC(){return q(Qo,"Reference.ts has not been loaded"),Qo}function vC(s){return s.views.size===0}function Fd(s,e,i,r){const o=e.source.queryId;if(o!==null){const u=s.views.get(o);return q(u!=null,"SyncTree gave us an op for an invalid query."),Y_(u,e,i,r)}else{let u=[];for(const d of s.views.values())u=u.concat(Y_(d,e,i,r));return u}}function My(s,e,i,r,o){const u=e._queryIdentifier,d=s.views.get(u);if(!d){let m=Go(i,o?r:null),g=!1;m?g=!0:r instanceof ie?(m=Vd(i,r),g=!1):(m=ie.EMPTY_NODE,g=!1);const p=rc(new ki(m,g,!1),new ki(r,o,!1));return new fC(e,p)}return d}function bC(s,e,i,r,o,u){const d=My(s,e,r,o,u);return s.views.has(e._queryIdentifier)||s.views.set(e._queryIdentifier,d),pC(d,i),gC(d,i)}function EC(s,e,i,r){const o=e._queryIdentifier,u=[];let d=[];const m=Mi(s);if(o==="default")for(const[g,p]of s.views.entries())d=d.concat(G_(p,i,r)),V_(p)&&(s.views.delete(g),p.query._queryParams.loadsAllData()||u.push(p.query));else{const g=s.views.get(o);g&&(d=d.concat(G_(g,i,r)),V_(g)&&(s.views.delete(o),g.query._queryParams.loadsAllData()||u.push(g.query)))}return m&&!Mi(s)&&u.push(new(yC())(e._repo,e._path)),{removed:u,events:d}}function Dy(s){const e=[];for(const i of s.views.values())i.query._queryParams.loadsAllData()||e.push(i);return e}function Ai(s,e){let i=null;for(const r of s.views.values())i=i||mC(r,e);return i}function Iy(s,e){if(e._queryParams.loadsAllData())return oc(s);{const r=e._queryIdentifier;return s.views.get(r)}}function Ly(s,e){return Iy(s,e)!=null}function Mi(s){return oc(s)!=null}function oc(s){for(const e of s.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo;function xC(s){q(!Xo,"__referenceConstructor has already been defined"),Xo=s}function SC(){return q(Xo,"Reference.ts has not been loaded"),Xo}let TC=1;class F_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Le(null),this.pendingWriteTree_=Jw(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Uy(s,e,i,r,o){return Pw(s.pendingWriteTree_,e,i,r,o),o?Ta(s,new ps(Bd(),e,i)):[]}function wC(s,e,i,r){qw(s.pendingWriteTree_,e,i,r);const o=Le.fromObject(i);return Ta(s,new pa(Bd(),e,o))}function Ei(s,e,i=!1){const r=Vw(s.pendingWriteTree_,e);if(Gw(s.pendingWriteTree_,e)){let u=new Le(null);return r.snap!=null?u=u.set(xe(),!0):ut(r.children,d=>{u=u.set(new Ce(d),!0)}),Ta(s,new qo(r.path,u,i))}else return[]}function tl(s,e,i){return Ta(s,new ps(Pd(),e,i))}function CC(s,e,i){const r=Le.fromObject(i);return Ta(s,new pa(Pd(),e,r))}function NC(s,e){return Ta(s,new Fr(Pd(),e))}function AC(s,e,i){const r=Xd(s,i);if(r){const o=Kd(r),u=o.path,d=o.queryId,m=Et(u,e),g=new Fr(qd(d),m);return Wd(s,u,g)}else return[]}function Ko(s,e,i,r,o=!1){const u=e._path,d=s.syncPointTree_.get(u);let m=[];if(d&&(e._queryIdentifier==="default"||Ly(d,e))){const g=EC(d,e,i,r);vC(d)&&(s.syncPointTree_=s.syncPointTree_.remove(u));const p=g.removed;if(m=g.events,!o){const b=p.findIndex(x=>x._queryParams.loadsAllData())!==-1,E=s.syncPointTree_.findOnPath(u,(x,R)=>Mi(R));if(b&&!E){const x=s.syncPointTree_.subtree(u);if(!x.isEmpty()){const R=kC(x);for(let P=0;P<R.length;++P){const J=R[P],re=J.query,I=By(s,J);s.listenProvider_.startListening(Lr(re),Qr(s,re),I.hashFn,I.onComplete)}}}!E&&p.length>0&&!r&&(b?s.listenProvider_.stopListening(Lr(e),null):p.forEach(x=>{const R=s.queryToTagMap.get(cc(x));s.listenProvider_.stopListening(Lr(x),R)}))}MC(s,p)}return m}function jy(s,e,i,r){const o=Xd(s,r);if(o!=null){const u=Kd(o),d=u.path,m=u.queryId,g=Et(d,e),p=new ps(qd(m),g,i);return Wd(s,d,p)}else return[]}function RC(s,e,i,r){const o=Xd(s,r);if(o){const u=Kd(o),d=u.path,m=u.queryId,g=Et(d,e),p=Le.fromObject(i),b=new pa(qd(m),g,p);return Wd(s,d,b)}else return[]}function pd(s,e,i,r=!1){const o=e._path;let u=null,d=!1;s.syncPointTree_.foreachOnPath(o,(x,R)=>{const P=Et(x,o);u=u||Ai(R,P),d=d||Mi(R)});let m=s.syncPointTree_.get(o);m?(d=d||Mi(m),u=u||Ai(m,xe())):(m=new ky,s.syncPointTree_=s.syncPointTree_.set(o,m));let g;u!=null?g=!0:(g=!1,u=ie.EMPTY_NODE,s.syncPointTree_.subtree(o).foreachChild((R,P)=>{const J=Ai(P,xe());J&&(u=u.updateImmediateChild(R,J))}));const p=Ly(m,e);if(!p&&!e._queryParams.loadsAllData()){const x=cc(e);q(!s.queryToTagMap.has(x),"View does not exist, but we have a tag");const R=DC();s.queryToTagMap.set(x,R),s.tagToQueryMap.set(R,x)}const b=lc(s.pendingWriteTree_,o);let E=bC(m,e,i,b,u,g);if(!p&&!d&&!r){const x=Iy(m,e);E=E.concat(IC(s,e,x))}return E}function Qd(s,e,i){const o=s.pendingWriteTree_,u=s.syncPointTree_.findOnPath(e,(d,m)=>{const g=Et(d,e),p=Ai(m,g);if(p)return p});return wy(o,e,u,i,!0)}function OC(s,e){const i=e._path;let r=null;s.syncPointTree_.foreachOnPath(i,(p,b)=>{const E=Et(p,i);r=r||Ai(b,E)});let o=s.syncPointTree_.get(i);o?r=r||Ai(o,xe()):(o=new ky,s.syncPointTree_=s.syncPointTree_.set(i,o));const u=r!=null,d=u?new ki(r,!0,!1):null,m=lc(s.pendingWriteTree_,e._path),g=My(o,e,m,u?d.getNode():ie.EMPTY_NODE,u);return hC(g)}function Ta(s,e){return zy(e,s.syncPointTree_,null,lc(s.pendingWriteTree_,xe()))}function zy(s,e,i,r){if(he(s.path))return Hy(s,e,i,r);{const o=e.get(xe());i==null&&o!=null&&(i=Ai(o,xe()));let u=[];const d=fe(s.path),m=s.operationForChild(d),g=e.children.get(d);if(g&&m){const p=i?i.getImmediateChild(d):null,b=Cy(r,d);u=u.concat(zy(m,g,p,b))}return o&&(u=u.concat(Fd(o,s,r,i))),u}}function Hy(s,e,i,r){const o=e.get(xe());i==null&&o!=null&&(i=Ai(o,xe()));let u=[];return e.children.inorderTraversal((d,m)=>{const g=i?i.getImmediateChild(d):null,p=Cy(r,d),b=s.operationForChild(d);b&&(u=u.concat(Hy(b,m,g,p)))}),o&&(u=u.concat(Fd(o,s,r,i))),u}function By(s,e){const i=e.query,r=Qr(s,i);return{hashFn:()=>(dC(e)||ie.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?AC(s,i._path,r):NC(s,i._path);{const u=NT(o,i);return Ko(s,i,null,u)}}}}function Qr(s,e){const i=cc(e);return s.queryToTagMap.get(i)}function cc(s){return s._path.toString()+"$"+s._queryIdentifier}function Xd(s,e){return s.tagToQueryMap.get(e)}function Kd(s){const e=s.indexOf("$");return q(e!==-1&&e<s.length-1,"Bad queryKey."),{queryId:s.substr(e+1),path:new Ce(s.substr(0,e))}}function Wd(s,e,i){const r=s.syncPointTree_.get(e);q(r,"Missing sync point for query tag that we're tracking");const o=lc(s.pendingWriteTree_,e);return Fd(r,i,o,null)}function kC(s){return s.fold((e,i,r)=>{if(i&&Mi(i))return[oc(i)];{let o=[];return i&&(o=Dy(i)),ut(r,(u,d)=>{o=o.concat(d)}),o}})}function Lr(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(SC())(s._repo,s._path):s}function MC(s,e){for(let i=0;i<e.length;++i){const r=e[i];if(!r._queryParams.loadsAllData()){const o=cc(r),u=s.queryToTagMap.get(o);s.queryToTagMap.delete(o),s.tagToQueryMap.delete(u)}}}function DC(){return TC++}function IC(s,e,i){const r=e._path,o=Qr(s,e),u=By(s,i),d=s.listenProvider_.startListening(Lr(e),o,u.hashFn,u.onComplete),m=s.syncPointTree_.subtree(r);if(o)q(!Mi(m.value),"If we're adding a query, it shouldn't be shadowed");else{const g=m.fold((p,b,E)=>{if(!he(p)&&b&&Mi(b))return[oc(b).query];{let x=[];return b&&(x=x.concat(Dy(b).map(R=>R.query))),ut(E,(R,P)=>{x=x.concat(P)}),x}});for(let p=0;p<g.length;++p){const b=g[p];s.listenProvider_.stopListening(Lr(b),Qr(s,b))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e){this.node_=e}getImmediateChild(e){const i=this.node_.getImmediateChild(e);return new Zd(i)}node(){return this.node_}}class $d{constructor(e,i){this.syncTree_=e,this.path_=i}getImmediateChild(e){const i=Be(this.path_,e);return new $d(this.syncTree_,i)}node(){return Qd(this.syncTree_,this.path_)}}const LC=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},Q_=function(s,e,i){if(!s||typeof s!="object")return s;if(q(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return UC(s[".sv"],e,i);if(typeof s[".sv"]=="object")return jC(s[".sv"],e);q(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},UC=function(s,e,i){switch(s){case"timestamp":return i.timestamp;default:q(!1,"Unexpected server value: "+s)}},jC=function(s,e,i){s.hasOwnProperty("increment")||q(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const r=s.increment;typeof r!="number"&&q(!1,"Unexpected increment value: "+r);const o=e.node();if(q(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const d=o.getValue();return typeof d!="number"?r:d+r},Py=function(s,e,i,r){return Jd(e,new $d(i,s),r)},qy=function(s,e,i){return Jd(s,new Zd(e),i)};function Jd(s,e,i){const r=s.getPriority().val(),o=Q_(r,e.getImmediateChild(".priority"),i);let u;if(s.isLeafNode()){const d=s,m=Q_(d.getValue(),e,i);return m!==d.getValue()||o!==d.getPriority().val()?new lt(m,Ye(o)):s}else{const d=s;return u=d,o!==d.getPriority().val()&&(u=u.updatePriority(new lt(o))),d.forEachChild(Pe,(m,g)=>{const p=Jd(g,e.getImmediateChild(m),i);p!==g&&(u=u.updateImmediateChild(m,p))}),u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e="",i=null,r={children:{},childCount:0}){this.name=e,this.parent=i,this.node=r}}function th(s,e){let i=e instanceof Ce?e:new Ce(e),r=s,o=fe(i);for(;o!==null;){const u=ua(r.node.children,o)||{children:{},childCount:0};r=new eh(o,r,u),i=Me(i),o=fe(i)}return r}function wa(s){return s.node.value}function Vy(s,e){s.node.value=e,gd(s)}function Gy(s){return s.node.childCount>0}function zC(s){return wa(s)===void 0&&!Gy(s)}function uc(s,e){ut(s.node.children,(i,r)=>{e(new eh(i,s,r))})}function Yy(s,e,i,r){i&&e(s),uc(s,o=>{Yy(o,e,!0)})}function HC(s,e,i){let r=s.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function nl(s){return new Ce(s.parent===null?s.name:nl(s.parent)+"/"+s.name)}function gd(s){s.parent!==null&&BC(s.parent,s.name,s)}function BC(s,e,i){const r=zC(i),o=yn(s.node.children,e);r&&o?(delete s.node.children[e],s.node.childCount--,gd(s)):!r&&!o&&(s.node.children[e]=i.node,s.node.childCount++,gd(s))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=/[\[\].#$\/\u0000-\u001F\u007F]/,qC=/[\[\].#$\u0000-\u001F\u007F]/,Xf=10*1024*1024,nh=function(s){return typeof s=="string"&&s.length!==0&&!PC.test(s)},Fy=function(s){return typeof s=="string"&&s.length!==0&&!qC.test(s)},VC=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),Fy(s)},Qy=function(s){return s===null||typeof s=="string"||typeof s=="number"&&!sc(s)||s&&typeof s=="object"&&yn(s,".sv")},Wo=function(s,e,i,r){r&&e===void 0||fc(fa(s,"value"),e,i)},fc=function(s,e,i){const r=i instanceof Ce?new lw(i,s):i;if(e===void 0)throw new Error(s+"contains undefined "+os(r));if(typeof e=="function")throw new Error(s+"contains a function "+os(r)+" with contents = "+e.toString());if(sc(e))throw new Error(s+"contains "+e.toString()+" "+os(r));if(typeof e=="string"&&e.length>Xf/3&&ic(e)>Xf)throw new Error(s+"contains a string greater than "+Xf+" utf8 bytes "+os(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,u=!1;if(ut(e,(d,m)=>{if(d===".value")o=!0;else if(d!==".priority"&&d!==".sv"&&(u=!0,!nh(d)))throw new Error(s+" contains an invalid key ("+d+") "+os(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ow(r,d),fc(s,m,r),cw(r)}),o&&u)throw new Error(s+' contains ".value" child '+os(r)+" in addition to actual children.")}},GC=function(s,e){let i,r;for(i=0;i<e.length;i++){r=e[i];const u=qr(r);for(let d=0;d<u.length;d++)if(!(u[d]===".priority"&&d===u.length-1)){if(!nh(u[d]))throw new Error(s+"contains an invalid key ("+u[d]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(rw);let o=null;for(i=0;i<e.length;i++){if(r=e[i],o!==null&&Kt(o,r))throw new Error(s+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}},Xy=function(s,e,i,r){const o=fa(s,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const u=[];ut(e,(d,m)=>{const g=new Ce(d);if(fc(o,m,Be(i,g)),Id(g)===".priority"&&!Qy(m))throw new Error(o+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(g)}),GC(o,u)},YC=function(s,e,i){if(sc(e))throw new Error(fa(s,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Qy(e))throw new Error(fa(s,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Ky=function(s,e,i,r){if(!Fy(i))throw new Error(fa(s,e)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},FC=function(s,e,i,r){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Ky(s,e,i)},fs=function(s,e){if(fe(e)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},QC=function(s,e){const i=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!nh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!VC(i))throw new Error(fa(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function dc(s,e){let i=null;for(let r=0;r<e.length;r++){const o=e[r],u=o.getPath();i!==null&&!Ld(u,i.path)&&(s.eventLists_.push(i),i=null),i===null&&(i={events:[],path:u}),i.events.push(o)}i&&s.eventLists_.push(i)}function Wy(s,e,i){dc(s,i),Zy(s,r=>Ld(r,e))}function Wt(s,e,i){dc(s,i),Zy(s,r=>Kt(r,e)||Kt(e,r))}function Zy(s,e){s.recursionDepth_++;let i=!0;for(let r=0;r<s.eventLists_.length;r++){const o=s.eventLists_[r];if(o){const u=o.path;e(u)?(KC(s.eventLists_[r]),s.eventLists_[r]=null):i=!1}}i&&(s.eventLists_=[]),s.recursionDepth_--}function KC(s){for(let e=0;e<s.events.length;e++){const i=s.events[e];if(i!==null){s.events[e]=null;const r=i.getEventRunner();kr&&ct("event: "+i.toString()),xa(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="repo_interrupt",ZC=25;class $C{constructor(e,i,r,o){this.repoInfo_=e,this.forceRestClient_=i,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new XC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Po(),this.transactionQueueTree_=new eh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function JC(s,e,i){if(s.stats_=Md(s.repoInfo_),s.forceRestClient_||kT())s.server_=new Bo(s.repoInfo_,(r,o,u,d)=>{X_(s,r,o,u,d)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>K_(s,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{nt(i)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}s.persistentConnection_=new Hn(s.repoInfo_,e,(r,o,u,d)=>{X_(s,r,o,u,d)},r=>{K_(s,r)},r=>{e2(s,r)},s.authTokenProvider_,s.appCheckProvider_,i),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(r=>{s.server_.refreshAuthToken(r)}),s.appCheckProvider_.addTokenChangeListener(r=>{s.server_.refreshAppCheckToken(r.token)}),s.statsReporter_=UT(s.repoInfo_,()=>new Lw(s.stats_,s.server_)),s.infoData_=new Ow,s.infoSyncTree_=new F_({startListening:(r,o,u,d)=>{let m=[];const g=s.infoData_.getNode(r._path);return g.isEmpty()||(m=tl(s.infoSyncTree_,r._path,g),setTimeout(()=>{d("ok")},0)),m},stopListening:()=>{}}),ih(s,"connected",!1),s.serverSyncTree_=new F_({startListening:(r,o,u,d)=>(s.server_.listen(r,u,o,(m,g)=>{const p=d(m,g);Wt(s.eventQueue_,r._path,p)}),[]),stopListening:(r,o)=>{s.server_.unlisten(r,o)}})}function $y(s){const i=s.infoData_.getNode(new Ce(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function hc(s){return LC({timestamp:$y(s)})}function X_(s,e,i,r,o){s.dataUpdateCount++;const u=new Ce(e);i=s.interceptServerDataCallback_?s.interceptServerDataCallback_(e,i):i;let d=[];if(o)if(r){const g=Uo(i,p=>Ye(p));d=RC(s.serverSyncTree_,u,g,o)}else{const g=Ye(i);d=jy(s.serverSyncTree_,u,g,o)}else if(r){const g=Uo(i,p=>Ye(p));d=CC(s.serverSyncTree_,u,g)}else{const g=Ye(i);d=tl(s.serverSyncTree_,u,g)}let m=u;d.length>0&&(m=_a(s,u)),Wt(s.eventQueue_,m,d)}function K_(s,e){ih(s,"connected",e),e===!1&&s2(s)}function e2(s,e){ut(e,(i,r)=>{ih(s,i,r)})}function ih(s,e,i){const r=new Ce("/.info/"+e),o=Ye(i);s.infoData_.updateSnapshot(r,o);const u=tl(s.infoSyncTree_,r,o);Wt(s.eventQueue_,r,u)}function sh(s){return s.nextWriteId_++}function t2(s,e,i){const r=OC(s.serverSyncTree_,e);return r!=null?Promise.resolve(r):s.server_.get(e).then(o=>{const u=Ye(o).withIndex(e._queryParams.getIndex());pd(s.serverSyncTree_,e,i,!0);let d;if(e._queryParams.loadsAllData())d=tl(s.serverSyncTree_,e._path,u);else{const m=Qr(s.serverSyncTree_,e);d=jy(s.serverSyncTree_,e._path,u,m)}return Wt(s.eventQueue_,e._path,d),Ko(s.serverSyncTree_,e,i,null,!0),u},o=>(il(s,"get for query "+nt(e)+" failed: "+o),Promise.reject(new Error(o))))}function n2(s,e,i,r,o){il(s,"set",{path:e.toString(),value:i,priority:r});const u=hc(s),d=Ye(i,r),m=Qd(s.serverSyncTree_,e),g=qy(d,m,u),p=sh(s),b=Uy(s.serverSyncTree_,e,g,p,!0);dc(s.eventQueue_,b),s.server_.put(e.toString(),d.val(!0),(x,R)=>{const P=x==="ok";P||xt("set at "+e+" failed: "+x);const J=Ei(s.serverSyncTree_,p,!P);Wt(s.eventQueue_,e,J),Di(s,o,x,R)});const E=rh(s,e);_a(s,E),Wt(s.eventQueue_,E,[])}function i2(s,e,i,r){il(s,"update",{path:e.toString(),value:i});let o=!0;const u=hc(s),d={};if(ut(i,(m,g)=>{o=!1,d[m]=Py(Be(e,m),Ye(g),s.serverSyncTree_,u)}),o)ct("update() called with empty data.  Don't do anything."),Di(s,r,"ok",void 0);else{const m=sh(s),g=wC(s.serverSyncTree_,e,d,m);dc(s.eventQueue_,g),s.server_.merge(e.toString(),i,(p,b)=>{const E=p==="ok";E||xt("update at "+e+" failed: "+p);const x=Ei(s.serverSyncTree_,m,!E),R=x.length>0?_a(s,e):e;Wt(s.eventQueue_,R,x),Di(s,r,p,b)}),ut(i,p=>{const b=rh(s,Be(e,p));_a(s,b)}),Wt(s.eventQueue_,e,[])}}function s2(s){il(s,"onDisconnectEvents");const e=hc(s),i=Po();cd(s.onDisconnect_,xe(),(o,u)=>{const d=Py(o,u,s.serverSyncTree_,e);Sa(i,o,d)});let r=[];cd(i,xe(),(o,u)=>{r=r.concat(tl(s.serverSyncTree_,o,u));const d=rh(s,o);_a(s,d)}),s.onDisconnect_=Po(),Wt(s.eventQueue_,xe(),r)}function a2(s,e,i){s.server_.onDisconnectCancel(e.toString(),(r,o)=>{r==="ok"&&od(s.onDisconnect_,e),Di(s,i,r,o)})}function W_(s,e,i,r){const o=Ye(i);s.server_.onDisconnectPut(e.toString(),o.val(!0),(u,d)=>{u==="ok"&&Sa(s.onDisconnect_,e,o),Di(s,r,u,d)})}function r2(s,e,i,r,o){const u=Ye(i,r);s.server_.onDisconnectPut(e.toString(),u.val(!0),(d,m)=>{d==="ok"&&Sa(s.onDisconnect_,e,u),Di(s,o,d,m)})}function l2(s,e,i,r){if(Lo(i)){ct("onDisconnect().update() called with empty data.  Don't do anything."),Di(s,r,"ok",void 0);return}s.server_.onDisconnectMerge(e.toString(),i,(o,u)=>{o==="ok"&&ut(i,(d,m)=>{const g=Ye(m);Sa(s.onDisconnect_,Be(e,d),g)}),Di(s,r,o,u)})}function o2(s,e,i){let r;fe(e._path)===".info"?r=pd(s.infoSyncTree_,e,i):r=pd(s.serverSyncTree_,e,i),Wy(s.eventQueue_,e._path,r)}function c2(s,e,i){let r;fe(e._path)===".info"?r=Ko(s.infoSyncTree_,e,i):r=Ko(s.serverSyncTree_,e,i),Wy(s.eventQueue_,e._path,r)}function u2(s){s.persistentConnection_&&s.persistentConnection_.interrupt(WC)}function il(s,...e){let i="";s.persistentConnection_&&(i=s.persistentConnection_.id+":"),ct(i,...e)}function Di(s,e,i,r){e&&xa(()=>{if(i==="ok")e(null);else{const o=(i||"error").toUpperCase();let u=o;r&&(u+=": "+r);const d=new Error(u);d.code=o,e(d)}})}function Jy(s,e,i){return Qd(s.serverSyncTree_,e,i)||ie.EMPTY_NODE}function ah(s,e=s.transactionQueueTree_){if(e||mc(s,e),wa(e)){const i=tv(s,e);q(i.length>0,"Sending zero length transaction queue"),i.every(o=>o.status===0)&&f2(s,nl(e),i)}else Gy(e)&&uc(e,i=>{ah(s,i)})}function f2(s,e,i){const r=i.map(p=>p.currentWriteId),o=Jy(s,e,r);let u=o;const d=o.hash();for(let p=0;p<i.length;p++){const b=i[p];q(b.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const E=Et(e,b.path);u=u.updateChild(E,b.currentOutputSnapshotRaw)}const m=u.val(!0),g=e;s.server_.put(g.toString(),m,p=>{il(s,"transaction put response",{path:g.toString(),status:p});let b=[];if(p==="ok"){const E=[];for(let x=0;x<i.length;x++)i[x].status=2,b=b.concat(Ei(s.serverSyncTree_,i[x].currentWriteId)),i[x].onComplete&&E.push(()=>i[x].onComplete(null,!0,i[x].currentOutputSnapshotResolved)),i[x].unwatcher();mc(s,th(s.transactionQueueTree_,e)),ah(s,s.transactionQueueTree_),Wt(s.eventQueue_,e,b);for(let x=0;x<E.length;x++)xa(E[x])}else{if(p==="datastale")for(let E=0;E<i.length;E++)i[E].status===3?i[E].status=4:i[E].status=0;else{xt("transaction at "+g.toString()+" failed: "+p);for(let E=0;E<i.length;E++)i[E].status=4,i[E].abortReason=p}_a(s,e)}},d)}function _a(s,e){const i=ev(s,e),r=nl(i),o=tv(s,i);return d2(s,o,r),r}function d2(s,e,i){if(e.length===0)return;const r=[];let o=[];const d=e.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const g=e[m],p=Et(i,g.path);let b=!1,E;if(q(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)b=!0,E=g.abortReason,o=o.concat(Ei(s.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=ZC)b=!0,E="maxretry",o=o.concat(Ei(s.serverSyncTree_,g.currentWriteId,!0));else{const x=Jy(s,g.path,d);g.currentInputSnapshot=x;const R=e[m].update(x.val());if(R!==void 0){fc("transaction failed: Data returned ",R,g.path);let P=Ye(R);typeof R=="object"&&R!=null&&yn(R,".priority")||(P=P.updatePriority(x.getPriority()));const re=g.currentWriteId,I=hc(s),D=qy(P,x,I);g.currentOutputSnapshotRaw=P,g.currentOutputSnapshotResolved=D,g.currentWriteId=sh(s),d.splice(d.indexOf(re),1),o=o.concat(Uy(s.serverSyncTree_,g.path,D,g.currentWriteId,g.applyLocally)),o=o.concat(Ei(s.serverSyncTree_,re,!0))}else b=!0,E="nodata",o=o.concat(Ei(s.serverSyncTree_,g.currentWriteId,!0))}Wt(s.eventQueue_,i,o),o=[],b&&(e[m].status=2,(function(x){setTimeout(x,Math.floor(0))})(e[m].unwatcher),e[m].onComplete&&(E==="nodata"?r.push(()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot)):r.push(()=>e[m].onComplete(new Error(E),!1,null))))}mc(s,s.transactionQueueTree_);for(let m=0;m<r.length;m++)xa(r[m]);ah(s,s.transactionQueueTree_)}function ev(s,e){let i,r=s.transactionQueueTree_;for(i=fe(e);i!==null&&wa(r)===void 0;)r=th(r,i),e=Me(e),i=fe(e);return r}function tv(s,e){const i=[];return nv(s,e,i),i.sort((r,o)=>r.order-o.order),i}function nv(s,e,i){const r=wa(e);if(r)for(let o=0;o<r.length;o++)i.push(r[o]);uc(e,o=>{nv(s,o,i)})}function mc(s,e){const i=wa(e);if(i){let r=0;for(let o=0;o<i.length;o++)i[o].status!==2&&(i[r]=i[o],r++);i.length=r,Vy(e,i.length>0?i:void 0)}uc(e,r=>{mc(s,r)})}function rh(s,e){const i=nl(ev(s,e)),r=th(s.transactionQueueTree_,e);return HC(r,o=>{Kf(s,o)}),Kf(s,r),Yy(r,o=>{Kf(s,o)}),i}function Kf(s,e){const i=wa(e);if(i){const r=[];let o=[],u=-1;for(let d=0;d<i.length;d++)i[d].status===3||(i[d].status===1?(q(u===d-1,"All SENT items should be at beginning of queue."),u=d,i[d].status=3,i[d].abortReason="set"):(q(i[d].status===0,"Unexpected transaction status in abort"),i[d].unwatcher(),o=o.concat(Ei(s.serverSyncTree_,i[d].currentWriteId,!0)),i[d].onComplete&&r.push(i[d].onComplete.bind(null,new Error("set"),!1,null))));u===-1?Vy(e,void 0):i.length=u+1,Wt(s.eventQueue_,nl(e),o);for(let d=0;d<r.length;d++)xa(r[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(s){let e="";const i=s.split("/");for(let r=0;r<i.length;r++)if(i[r].length>0){let o=i[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function m2(s){const e={};s.charAt(0)==="?"&&(s=s.substring(1));for(const i of s.split("&")){if(i.length===0)continue;const r=i.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xt(`Invalid query segment '${i}' in query '${s}'`)}return e}const Z_=function(s,e){const i=p2(s),r=i.namespace;i.domain==="firebase.com"&&Pn(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&i.domain!=="localhost"&&Pn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||xT();const o=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new ay(i.host,i.secure,r,o,e,"",r!==i.subdomain),path:new Ce(i.pathString)}},p2=function(s){let e="",i="",r="",o="",u="",d=!0,m="https",g=443;if(typeof s=="string"){let p=s.indexOf("//");p>=0&&(m=s.substring(0,p-1),s=s.substring(p+2));let b=s.indexOf("/");b===-1&&(b=s.length);let E=s.indexOf("?");E===-1&&(E=s.length),e=s.substring(0,Math.min(b,E)),b<E&&(o=h2(s.substring(b,E)));const x=m2(s.substring(Math.min(s.length,E)));p=e.indexOf(":"),p>=0?(d=m==="https"||m==="wss",g=parseInt(e.substring(p+1),10)):p=e.length;const R=e.slice(0,p);if(R.toLowerCase()==="localhost")i="localhost";else if(R.split(".").length<=2)i=R;else{const P=e.indexOf(".");r=e.substring(0,P).toLowerCase(),i=e.substring(P+1),u=r}"ns"in x&&(u=x.ns)}return{host:e,port:g,domain:i,subdomain:r,secure:d,scheme:m,pathString:o,namespace:u}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",g2=(function(){let s=0;const e=[];return function(i){const r=i===s;s=i;let o;const u=new Array(8);for(o=7;o>=0;o--)u[o]=$_.charAt(i%64),i=Math.floor(i/64);q(i===0,"Cannot push at time == 0");let d=u.join("");if(r){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)d+=$_.charAt(e[o]);return q(d.length===20,"nextPushId: Length should be 20."),d}})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,i,r,o){this.eventType=e,this.eventRegistration=i,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+nt(this.snapshot.exportVal())}}class y2{constructor(e,i,r){this.eventRegistration=e,this.error=i,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,i){this.snapshotCallback=e,this.cancelCallback=i}onValue(e,i){this.snapshotCallback.call(null,e,i)}onCancel(e){return q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,i){this._repo=e,this._path=i}cancel(){const e=new mn;return a2(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){fs("OnDisconnect.remove",this._path);const e=new mn;return W_(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){fs("OnDisconnect.set",this._path),Wo("OnDisconnect.set",e,this._path,!1);const i=new mn;return W_(this._repo,this._path,e,i.wrapCallback(()=>{})),i.promise}setWithPriority(e,i){fs("OnDisconnect.setWithPriority",this._path),Wo("OnDisconnect.setWithPriority",e,this._path,!1),YC("OnDisconnect.setWithPriority",i);const r=new mn;return r2(this._repo,this._path,e,i,r.wrapCallback(()=>{})),r.promise}update(e){fs("OnDisconnect.update",this._path),Xy("OnDisconnect.update",e,this._path);const i=new mn;return l2(this._repo,this._path,e,i.wrapCallback(()=>{})),i.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,i,r,o){this._repo=e,this._path=i,this._queryParams=r,this._orderByCalled=o}get key(){return he(this._path)?null:Id(this._path)}get ref(){return new Gn(this._repo,this._path)}get _queryIdentifier(){const e=U_(this._queryParams),i=Od(e);return i==="{}"?"default":i}get _queryObject(){return U_(this._queryParams)}isEqual(e){if(e=Tt(e),!(e instanceof lh))return!1;const i=this._repo===e._repo,r=Ld(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return i&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+aw(this._path)}}class Gn extends lh{constructor(e,i){super(e,i,new Hd,!1)}get parent(){const e=my(this._path);return e===null?null:new Gn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Xr{constructor(e,i,r){this._node=e,this.ref=i,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const i=new Ce(e),r=Kr(this.ref,e);return new Xr(this._node.getChild(i),r,Pe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,o)=>e(new Xr(o,Kr(this.ref,r),Pe)))}hasChild(e){const i=new Ce(e);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xi(s,e){return s=Tt(s),s._checkNotDeleted("ref"),e!==void 0?Kr(s._root,e):s._root}function Kr(s,e){return s=Tt(s),fe(s._path)===null?FC("child","path",e):Ky("child","path",e),new Gn(s._repo,Be(s._path,e))}function b2(s){return s=Tt(s),new v2(s._repo,s._path)}function E2(s,e){s=Tt(s),fs("push",s._path),Wo("push",e,s._path,!0);const i=$y(s._repo),r=g2(i),o=Kr(s,r),u=Kr(s,r);let d;return d=Promise.resolve(u),o.then=d.then.bind(d),o.catch=d.then.bind(d,void 0),o}function x2(s){return fs("remove",s._path),sv(s,null)}function sv(s,e){s=Tt(s),fs("set",s._path),Wo("set",e,s._path,!1);const i=new mn;return n2(s._repo,s._path,e,null,i.wrapCallback(()=>{})),i.promise}function Ao(s,e){Xy("update",e,s._path);const i=new mn;return i2(s._repo,s._path,e,i.wrapCallback(()=>{})),i.promise}function S2(s){s=Tt(s);const e=new iv(()=>{}),i=new pc(e);return t2(s._repo,s,i).then(r=>new Xr(r,new Gn(s._repo,s._path),s._queryParams.getIndex()))}class pc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,i){const r=i._queryParams.getIndex();return new _2("value",this,new Xr(e.snapshotNode,new Gn(i._repo,i._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,i){return this.callbackContext.hasCancelCallback?new y2(this,e,i):null}matches(e){return e instanceof pc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function T2(s,e,i,r,o){const u=new iv(i,void 0),d=new pc(u);return o2(s._repo,s,d),()=>c2(s._repo,s,d)}function av(s,e,i,r){return T2(s,"value",e)}_C(Gn);xC(Gn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="FIREBASE_DATABASE_EMULATOR_HOST",_d={};let C2=!1;function N2(s,e,i,r){const o=e.lastIndexOf(":"),u=e.substring(0,o),d=va(u);s.repoInfo_=new ay(e,d,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,i),r&&(s.authTokenProvider_=r)}function A2(s,e,i,r,o){let u=r||s.options.databaseURL;u===void 0&&(s.options.projectId||Pn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ct("Using default host for project ",s.options.projectId),u=`${s.options.projectId}-default-rtdb.firebaseio.com`);let d=Z_(u,o),m=d.repoInfo,g;typeof process<"u"&&y_&&(g=y_[w2]),g?(u=`http://${g}?ns=${m.namespace}`,d=Z_(u,o),m=d.repoInfo):d.repoInfo.secure;const p=new DT(s.name,s.options,e);QC("Invalid Firebase Database URL",d),he(d.path)||Pn("Database URL must point to the root of a Firebase Database (not including a child path).");const b=O2(m,s,p,new MT(s,i));return new k2(b,s)}function R2(s,e){const i=_d[e];(!i||i[s.key]!==s)&&Pn(`Database ${e}(${s.repoInfo_}) has already been deleted.`),u2(s),delete i[s.key]}function O2(s,e,i,r){let o=_d[e.name];o||(o={},_d[e.name]=o);let u=o[s.toURLString()];return u&&Pn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new $C(s,C2,i,r),o[s.toURLString()]=u,u}class k2{constructor(e,i){this._repoInternal=e,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(JC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gn(this._repo,xe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(R2(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Pn("Cannot call "+e+" on a deleted database.")}}function M2(s=Rd(),e){const i=Ad(s,"database").getImmediate({identifier:e});if(!i._instanceStarted){const r=Hx("database");r&&D2(i,...r)}return i}function D2(s,e,i,r={}){s=Tt(s),s._checkNotDeleted("useEmulator");const o=`${e}:${i}`,u=s._repoInternal;if(s._instanceStarted){if(o===s._repoInternal.repoInfo_.host&&ds(r,u.repoInfo_.emulatorOptions))return;Pn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(u.repoInfo_.nodeAdmin)r.mockUserToken&&Pn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new No(No.OWNER);else if(r.mockUserToken){const m=typeof r.mockUserToken=="string"?r.mockUserToken:Bx(r.mockUserToken,s.app.options.projectId);d=new No(m)}va(e)&&(U0(e),j0("Database",!0)),N2(u,o,r,d)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(s){gT(Ea),da(new hs("database",(e,{instanceIdentifier:i})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),u=e.getProvider("app-check-internal");return A2(r,o,u,i)},"PUBLIC").setMultipleInstances(!0)),Ci(v_,b_,s),Ci(v_,b_,"esm2020")}Hn.prototype.simpleListen=function(s,e){this.sendRequest("q",{p:s},e)};Hn.prototype.echo=function(s,e){this.sendRequest("echo",{d:s},e)};I2();function rv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L2=rv,lv=new Zr("auth","Firebase",rv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=new Cd("@firebase/auth");function U2(s,...e){Zo.logLevel<=Re.WARN&&Zo.warn(`Auth (${Ea}): ${s}`,...e)}function Ro(s,...e){Zo.logLevel<=Re.ERROR&&Zo.error(`Auth (${Ea}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(s,...e){throw oh(s,...e)}function pn(s,...e){return oh(s,...e)}function ov(s,e,i){const r={...L2(),[e]:i};return new Zr("auth","Firebase",r).create(e,{appName:s.name})}function Ri(s){return ov(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oh(s,...e){if(typeof s!="string"){const i=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return lv.create(s,...e)}function se(s,e,...i){if(!s)throw oh(e,...i)}function jn(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Ro(e),new Error(e)}function Vn(s,e){s||jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function j2(){return J_()==="http:"||J_()==="https:"}function J_(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j2()||Gx()||"connection"in navigator)?navigator.onLine:!0}function H2(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,i){this.shortDelay=e,this.longDelay=i,Vn(i>e,"Short delay should be less than long delay!"),this.isMobile=wd()||z0()}get(){return z2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(s,e){Vn(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{static initialize(e,i,r){this.fetchImpl=e,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],q2=new sl(3e4,6e4);function gc(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ca(s,e,i,r,o={}){return uv(s,o,async()=>{let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});const m=ba({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:g,...u};return Vx()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&va(s.emulatorConfig.host)&&(p.credentials="include"),cv.fetch()(await dv(s,s.config.apiHost,i,m),p)})}async function uv(s,e,i){s._canInitEmulator=!1;const r={...B2,...e};try{const o=new V2(s),u=await Promise.race([i(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw To(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw To(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw To(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw To(s,"user-disabled",d);const b=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw ov(s,b,p);qn(s,b)}}catch(o){if(o instanceof Li)throw o;qn(s,"network-request-failed",{message:String(o)})}}async function fv(s,e,i,r,o={}){const u=await Ca(s,e,i,r,o);return"mfaPendingCredential"in u&&qn(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function dv(s,e,i,r){const o=`${e}${i}?${r}`,u=s,d=u.config.emulator?ch(s.config,o):`${s.config.apiScheme}://${o}`;return P2.includes(i)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}class V2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(pn(this.auth,"network-request-failed")),q2.get())})}}function To(s,e,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const o=pn(s,e,r);return o.customData._tokenResponse=i,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(s,e){return Ca(s,"POST","/v1/accounts:delete",e)}async function $o(s,e){return Ca(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Y2(s,e=!1){const i=Tt(s),r=await i.getIdToken(e),o=uh(r);se(o&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Ur(Wf(o.auth_time)),issuedAtTime:Ur(Wf(o.iat)),expirationTime:Ur(Wf(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Wf(s){return Number(s)*1e3}function uh(s){const[e,i,r]=s.split(".");if(e===void 0||i===void 0||r===void 0)return Ro("JWT malformed, contained fewer than 3 sections"),null;try{const o=Io(i);return o?JSON.parse(o):(Ro("Failed to decode base64 JWT payload"),null)}catch(o){return Ro("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function e0(s){const e=uh(s);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wr(s,e,i=!1){if(i)return e;try{return await e}catch(r){throw r instanceof Li&&F2(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function F2({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ur(this.lastLoginAt),this.creationTime=Ur(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(s){var E;const e=s.auth,i=await s.getIdToken(),r=await Wr(s,$o(e,{idToken:i}));se(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(E=o.providerUserInfo)!=null&&E.length?hv(o.providerUserInfo):[],d=K2(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(d!=null&&d.length),p=m?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new vd(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,b)}async function X2(s){const e=Tt(s);await Jo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function K2(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function hv(s){return s.map(({providerId:e,...i})=>({providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(s,e){const i=await uv(s,{},async()=>{const r=ba({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await dv(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&va(s.emulatorConfig.host)&&(g.credentials="include"),cv.fetch()(d,g)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function Z2(s,e){return Ca(s,"POST","/v2/accounts:revokeToken",gc(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const i="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}updateFromIdToken(e){se(e.length!==0,"internal-error");const i=e0(e);this.updateTokensAndExpiration(e,null,i)}async getToken(e,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){const{accessToken:r,refreshToken:o,expiresIn:u}=await W2(e,i);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,i,r){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,i){const{refreshToken:r,accessToken:o,expirationTime:u}=i,d=new la;return r&&(se(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),o&&(se(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(se(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new la,this.toJSON())}_performRefresh(){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(s,e){se(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class an{constructor({uid:e,auth:i,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new Q2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new vd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const i=await Wr(this,this.stsTokenManager.getToken(this.auth,e));return se(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return Y2(this,e)}reload(){return X2(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(i=>({...i})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const i=new an({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),i&&await Jo(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await Wr(this,G2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){const r=i.displayName??void 0,o=i.email??void 0,u=i.phoneNumber??void 0,d=i.photoURL??void 0,m=i.tenantId??void 0,g=i._redirectEventId??void 0,p=i.createdAt??void 0,b=i.lastLoginAt??void 0,{uid:E,emailVerified:x,isAnonymous:R,providerData:P,stsTokenManager:J}=i;se(E&&J,e,"internal-error");const re=la.fromJSON(this.name,J);se(typeof E=="string",e,"internal-error"),gi(r,e.name),gi(o,e.name),se(typeof x=="boolean",e,"internal-error"),se(typeof R=="boolean",e,"internal-error"),gi(u,e.name),gi(d,e.name),gi(m,e.name),gi(g,e.name),gi(p,e.name),gi(b,e.name);const I=new an({uid:E,auth:e,email:o,emailVerified:x,displayName:r,isAnonymous:R,photoURL:d,phoneNumber:u,tenantId:m,stsTokenManager:re,createdAt:p,lastLoginAt:b});return P&&Array.isArray(P)&&(I.providerData=P.map(D=>({...D}))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(e,i,r=!1){const o=new la;o.updateFromServerResponse(i);const u=new an({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Jo(u),u}static async _fromGetAccountInfoResponse(e,i,r){const o=i.users[0];se(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?hv(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new la;m.updateFromIdToken(r);const g=new an({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new vd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Map;function zn(s){Vn(s instanceof Function,"Expected a class definition");let e=t0.get(s);return e?(Vn(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,t0.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){const i=this.storage[e];return i===void 0?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}}mv.type="NONE";const n0=mv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(s,e,i){return`firebase:${s}:${e}:${i}`}class oa{constructor(e,i,r){this.persistence=e,this.auth=i,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Oo(this.userKey,o.apiKey,u),this.fullPersistenceKey=Oo("persistence",o.apiKey,u),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const i=await $o(this.auth,{idToken:e}).catch(()=>{});return i?an._fromGetAccountInfoResponse(this.auth,i,e):null}return an._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,r="authUser"){if(!i.length)return new oa(zn(n0),e,r);const o=(await Promise.all(i.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||zn(n0);const d=Oo(r,e.config.apiKey,e.name);let m=null;for(const p of i)try{const b=await p._get(d);if(b){let E;if(typeof b=="string"){const x=await $o(e,{idToken:b}).catch(()=>{});if(!x)break;E=await an._fromGetAccountInfoResponse(e,x,b)}else E=an._fromJSON(e,b);p!==u&&(m=E),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new oa(u,e,r):(u=g[0],m&&await u._set(d,m.toJSON()),await Promise.all(i.map(async p=>{if(p!==u)try{await p._remove(d)}catch{}})),new oa(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bv(e))return"Blackberry";if(Ev(e))return"Webos";if(gv(e))return"Safari";if((e.includes("chrome/")||_v(e))&&!e.includes("edge/"))return"Chrome";if(vv(e))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pv(s=St()){return/firefox\//i.test(s)}function gv(s=St()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _v(s=St()){return/crios\//i.test(s)}function yv(s=St()){return/iemobile/i.test(s)}function vv(s=St()){return/android/i.test(s)}function bv(s=St()){return/blackberry/i.test(s)}function Ev(s=St()){return/webos/i.test(s)}function fh(s=St()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function $2(s=St()){var e;return fh(s)&&!!((e=window.navigator)!=null&&e.standalone)}function J2(){return Yx()&&document.documentMode===10}function xv(s=St()){return fh(s)||vv(s)||Ev(s)||bv(s)||/windows phone/i.test(s)||yv(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(s,e=[]){let i;switch(s){case"Browser":i=i0(St());break;case"Worker":i=`${i0(St())}-${s}`;break;default:i=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${Ea}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,i){const r=u=>new Promise((d,m)=>{try{const g=e(u);d(g)}catch(g){m(g)}});r.onAbort=i,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const i=[];try{for(const r of this.queue)await r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const o of i)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(s,e={}){return Ca(s,"GET","/v2/passwordPolicy",gc(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=6;class iN{constructor(e){var r;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??nN,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,i),this.validatePasswordCharacterOptions(e,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(e,i){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=e.length>=r),o&&(i.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,i,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,i,r,o){this.app=e,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new s0(this),this.idTokenSubscription=new s0(this),this.beforeStateQueue=new eN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=zn(i)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await oa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const i=await $o(this,{idToken:e}),r=await an._fromGetAccountInfoResponse(this,i,e);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(tn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&(g!=null&&g.user)&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(d){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await Jo(e)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=H2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(Ri(this));const i=e?Tt(e):null;return i&&se(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e,i=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tN(this),i=new iN(e);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zr("auth","Firebase",e())}onAuthStateChanged(e,i,r){return this.registerStateListener(this.authStateSubscription,e,i,r)}beforeAuthStateChanged(e,i){return this.beforeStateQueue.pushCallback(e,i)}onIdTokenChanged(e,i,r){return this.registerStateListener(this.idTokenSubscription,e,i,r)}authStateReady(){return new Promise((e,i)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},i)}})}async revokeAccessToken(e){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await Z2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,i){const r=await this.getOrInitRedirectPersistenceManager(i);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const i=e&&zn(e)||this._popupRedirectResolver;se(i,this,"argument-error"),this.redirectPersistenceManager=await oa.create(this,[zn(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var i,r;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)==null?void 0:i._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((i=this.currentUser)==null?void 0:i.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,r,o){if(this._deleted)return()=>{};const u=typeof i=="function"?i:i.next.bind(i);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof i=="function"){const g=e.addObserver(i,r,o);return()=>{d=!0,g()}}else{const g=e.addObserver(i);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var i;if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((i=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getToken());return e!=null&&e.error&&U2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function _c(s){return Tt(s)}class s0{constructor(e){this.auth=e,this.observer=null,this.addObserver=tS(i=>this.observer=i)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aN(s){dh=s}function rN(s){return dh.loadJS(s)}function lN(){return dh.gapiScript}function oN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(s,e){const i=Ad(s,"auth");if(i.isInitialized()){const o=i.getImmediate(),u=i.getOptions();if(ds(u,e??{}))return o;qn(o,"already-initialized")}return i.initialize({options:e})}function uN(s,e){const i=(e==null?void 0:e.persistence)||[],r=(Array.isArray(i)?i:[i]).map(zn);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fN(s,e,i){const r=_c(s);se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=Tv(e),{host:d,port:m}=dN(e),g=m===null?"":`:${m}`,p={url:`${u}//${d}${g}/`},b=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),se(ds(p,r.config.emulator)&&ds(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,va(d)?(U0(`${u}//${d}${g}`),j0("Auth",!0)):hN()}function Tv(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function dN(s){const e=Tv(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:a0(r.substr(u.length+1))}}else{const[u,d]=r.split(":");return{host:u,port:a0(d)}}}function a0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function hN(){function s(){const e=document.createElement("p"),i=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return jn("not implemented")}_getIdTokenResponse(e){return jn("not implemented")}_linkToIdToken(e,i){return jn("not implemented")}_getReauthenticationResolver(e){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(s,e){return fv(s,"POST","/v1/accounts:signInWithIdp",gc(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="http://localhost";class _s extends wv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const i=new _s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):qn("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=i;if(!r||!o)return null;const d=new _s(r,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const i=this.buildRequest();return ca(e,i)}_linkToIdToken(e,i){const r=this.buildRequest();return r.idToken=i,ca(e,r)}_getReauthenticationResolver(e){const i=this.buildRequest();return i.autoCreate=!1,ca(e,i)}buildRequest(){const e={requestUri:mN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=ba(i)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends Cv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends al{constructor(){super("facebook.com")}static credential(e){return _s._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return _s._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:i,oauthAccessToken:r}=e;if(!i&&!r)return null;try{return yi.credential(i,r)}catch{return null}}}yi.GOOGLE_SIGN_IN_METHOD="google.com";yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends al{constructor(){super("github.com")}static credential(e){return _s._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.GITHUB_SIGN_IN_METHOD="github.com";vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends al{constructor(){super("twitter.com")}static credential(e,i){return _s._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=e;if(!i||!r)return null;try{return bi.credential(i,r)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(s,e){return fv(s,"POST","/v1/accounts:signUp",gc(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,r,o=!1){const u=await an._fromIdTokenResponse(e,r,o),d=r0(r);return new Ii({user:u,providerId:d,_tokenResponse:r,operationType:i})}static async _forOperation(e,i,r){await e._updateTokensIfNecessary(r,!0);const o=r0(r);return new Ii({user:e,providerId:o,_tokenResponse:r,operationType:i})}}function r0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(s){var o;if(tn(s.app))return Promise.reject(Ri(s));const e=_c(s);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new Ii({user:e.currentUser,providerId:null,operationType:"signIn"});const i=await pN(e,{returnSecureToken:!0}),r=await Ii._fromIdTokenResponse(e,"signIn",i,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends Li{constructor(e,i,r,o){super(i.code,i.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,ec.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,i,r,o){return new ec(e,i,r,o)}}function Nv(s,e,i,r){return(e==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?ec._fromErrorAndOperation(s,u,e,r):u})}async function _N(s,e,i=!1){const r=await Wr(s,e._linkToIdToken(s.auth,await s.getIdToken()),i);return Ii._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(s,e,i=!1){const{auth:r}=s;if(tn(r.app))return Promise.reject(Ri(r));const o="reauthenticate";try{const u=await Wr(s,Nv(r,o,e,s),i);se(u.idToken,r,"internal-error");const d=uh(u.idToken);se(d,r,"internal-error");const{sub:m}=d;return se(s.uid===m,r,"user-mismatch"),Ii._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&qn(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(s,e,i=!1){if(tn(s.app))return Promise.reject(Ri(s));const r="signIn",o=await Nv(s,r,e),u=await Ii._fromIdTokenResponse(s,r,o);return i||await s._updateCurrentUser(u.user),u}function bN(s,e,i,r){return Tt(s).onIdTokenChanged(e,i,r)}function EN(s,e,i){return Tt(s).beforeAuthStateChanged(e,i)}function xN(s,e,i,r){return Tt(s).onAuthStateChanged(e,i,r)}const tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(tc,"1"),this.storage.removeItem(tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){const i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=1e3,TN=10;class Rv extends Av{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),o=this.localCache[i];r!==o&&e(i,o,r)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const r=e.key;i?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(r);!i&&this.localCache[r]===d||this.notifyListeners(r,d)},u=this.storage.getItem(r);J2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,TN):o()}notifyListeners(e,i){this.localCache[e]=i;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:r}),!0)})},SN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){const i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rv.type="LOCAL";const wN=Rv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov extends Av{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}Ov.type="SESSION";const kv=Ov;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const i=this.receivers.find(o=>o.isListeningto(e));if(i)return i;const r=new yc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const i=e,{eventId:r,eventType:o,data:u}=i.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(d).map(async p=>p(i.origin,u)),g=await CN(m);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(s="",e=10){let i="";for(let r=0;r<e;r++)i+=Math.floor(Math.random()*10);return s+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,g)=>{const p=hh("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(E){const x=E;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:i},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return window}function AN(s){gn().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(){return typeof gn().WorkerGlobalScope<"u"&&typeof gn().importScripts=="function"}async function RN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ON(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function kN(){return Mv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="firebaseLocalStorageDb",MN=1,nc="firebaseLocalStorage",Iv="fbase_key";class rl{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function vc(s,e){return s.transaction([nc],e?"readwrite":"readonly").objectStore(nc)}function DN(){const s=indexedDB.deleteDatabase(Dv);return new rl(s).toPromise()}function bd(){const s=indexedDB.open(Dv,MN);return new Promise((e,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(nc,{keyPath:Iv})}catch(o){i(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(nc)?e(r):(r.close(),await DN(),e(await bd()))})})}async function l0(s,e,i){const r=vc(s,!0).put({[Iv]:e,value:i});return new rl(r).toPromise()}async function IN(s,e){const i=vc(s,!1).get(e),r=await new rl(i).toPromise();return r===void 0?null:r.value}function o0(s,e){const i=vc(s,!0).delete(e);return new rl(i).toPromise()}const LN=800,UN=3;class Lv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bd(),this.db)}async _withRetries(e){let i=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(i++>UN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yc._getInstance(kN()),this.receiver._subscribe("keyChanged",async(e,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){var i,r;if(this.activeServiceWorker=await RN(),!this.activeServiceWorker)return;this.sender=new NN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(i=e[0])!=null&&i.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ON()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bd();return await l0(e,tc,"1"),await o0(e,tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>l0(r,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){const i=await this._withRetries(r=>IN(r,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>o0(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=vc(o,!1).getAll();return new rl(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),i.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i}notifyListeners(e,i){this.localCache[e]=i;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lv.type="LOCAL";const jN=Lv;new sl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(s,e){return e?zn(e):(se(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends wv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ca(e,this._buildIdpRequest())}_linkToIdToken(e,i){return ca(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}}function HN(s){return vN(s.auth,new mh(s),s.bypassAuthState)}function BN(s){const{auth:e,user:i}=s;return se(i,e,"internal-error"),yN(i,new mh(s),s.bypassAuthState)}async function PN(s){const{auth:e,user:i}=s;return se(i,e,"internal-error"),_N(i,new mh(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,i,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:i,sessionId:r,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:i,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HN;case"linkViaPopup":case"linkViaRedirect":return PN;case"reauthViaPopup":case"reauthViaRedirect":return BN;default:qn(this.auth,"internal-error")}}resolve(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=new sl(2e3,1e4);class sa extends Uv{constructor(e,i,r,o,u){super(e,i,o,u),this.provider=r,this.authWindow=null,this.pollId=null,sa.currentPopupAction&&sa.currentPopupAction.cancel(),sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Vn(this.filter.length===1,"Popup operations only handle one event");const e=hh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var i,r;if((r=(i=this.authWindow)==null?void 0:i.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qN.get())};e()}}sa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="pendingRedirect",ko=new Map;class GN extends Uv{constructor(e,i,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let e=ko.get(this.auth._key());if(!e){try{const r=await YN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(i){e=()=>Promise.reject(i)}ko.set(this.auth._key(),e)}return this.bypassAuthState||ko.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YN(s,e){const i=XN(e),r=QN(s);if(!await r._isAvailable())return!1;const o=await r._get(i)==="true";return await r._remove(i),o}function FN(s,e){ko.set(s._key(),e)}function QN(s){return zn(s._redirectPersistence)}function XN(s){return Oo(VN,s.config.apiKey,s.name)}async function KN(s,e,i=!1){if(tn(s.app))return Promise.reject(Ri(s));const r=_c(s),o=zN(r,e),d=await new GN(r,o,i).execute();return d&&!i&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=600*1e3;class ZN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(i=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$N(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){var r;if(e.error&&!jv(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";i.onError(pn(this.auth,o))}else i.onAuthEvent(e)}isEventForConsumer(e,i){const r=i.eventId===null||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WN&&this.cachedEventUids.clear(),this.cachedEventUids.has(c0(e))}saveEventToCache(e){this.cachedEventUids.add(c0(e)),this.lastProcessedEventTime=Date.now()}}function c0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function jv({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $N(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jv(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(s,e={}){return Ca(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tA=/^https?/;async function nA(s){if(s.config.emulator)return;const{authorizedDomains:e}=await JN(s);for(const i of e)try{if(iA(i))return}catch{}qn(s,"unauthorized-domain")}function iA(s){const e=yd(),{protocol:i,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===r}if(!tA.test(i))return!1;if(eA.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=new sl(3e4,6e4);function u0(){const s=gn().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function aA(s){return new Promise((e,i)=>{var o,u,d;function r(){u0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{u0(),i(pn(s,"network-request-failed"))},timeout:sA.get()})}if((u=(o=gn().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((d=gn().gapi)!=null&&d.load)r();else{const m=oN("iframefcb");return gn()[m]=()=>{gapi.load?r():i(pn(s,"network-request-failed"))},rN(`${lN()}?onload=${m}`).catch(g=>i(g))}}).catch(e=>{throw Mo=null,e})}let Mo=null;function rA(s){return Mo=Mo||aA(s),Mo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=new sl(5e3,15e3),oA="__/auth/iframe",cA="emulator/auth/iframe",uA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dA(s){const e=s.config;se(e.authDomain,s,"auth-domain-config-required");const i=e.emulator?ch(e,cA):`https://${s.config.authDomain}/${oA}`,r={apiKey:e.apiKey,appName:s.name,v:Ea},o=fA.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${i}?${ba(r).slice(1)}`}async function hA(s){const e=await rA(s),i=gn().gapi;return se(i,s,"internal-error"),e.open({where:document.body,url:dA(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uA,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const d=pn(s,"network-request-failed"),m=gn().setTimeout(()=>{u(d)},lA.get());function g(){gn().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pA=500,gA=600,_A="_blank",yA="http://localhost";class f0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vA(s,e,i,r=pA,o=gA){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...mA,width:r.toString(),height:o.toString(),top:u,left:d},p=St().toLowerCase();i&&(m=_v(p)?_A:i),pv(p)&&(e=e||yA,g.scrollbars="yes");const b=Object.entries(g).reduce((x,[R,P])=>`${x}${R}=${P},`,"");if($2(p)&&m!=="_self")return bA(e||"",m),new f0(null);const E=window.open(e||"",m,b);se(E,s,"popup-blocked");try{E.focus()}catch{}return new f0(E)}function bA(s,e){const i=document.createElement("a");i.href=s,i.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="__/auth/handler",xA="emulator/auth/handler",SA=encodeURIComponent("fac");async function d0(s,e,i,r,o,u){se(s.config.authDomain,s,"auth-domain-config-required"),se(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:Ea,eventId:o};if(e instanceof Cv){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",Lo(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))d[b]=E}if(e instanceof al){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const m=d;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const g=await s._getAppCheckToken(),p=g?`#${SA}=${encodeURIComponent(g)}`:"";return`${TA(s)}?${ba(m).slice(1)}${p}`}function TA({config:s}){return s.emulator?ch(s,xA):`https://${s.authDomain}/${EA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="webStorageSupport";class wA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kv,this._completeRedirectFn=KN,this._overrideRedirectResult=FN}async _openPopup(e,i,r,o){var d;Vn((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const u=await d0(e,i,r,yd(),o);return vA(e,u,hh())}async _openRedirect(e,i,r,o){await this._originValidation(e);const u=await d0(e,i,r,yd(),o);return AN(u),new Promise(()=>{})}_initialize(e){const i=e._key();if(this.eventManagers[i]){const{manager:o,promise:u}=this.eventManagers[i];return o?Promise.resolve(o):(Vn(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(e){const i=await hA(e),r=new ZN(e);return i.register("authEvent",o=>(se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=i,r}_isIframeWebStorageSupported(e,i){this.iframes[e._key()].send(Zf,{type:Zf},o=>{var d;const u=(d=o==null?void 0:o[0])==null?void 0:d[Zf];u!==void 0&&i(!!u),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=nA(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return xv()||gv()||fh()}}const CA=wA;var h0="@firebase/auth",m0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const i=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RA(s){da(new hs("auth",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;se(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:d,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sv(s)},p=new sN(r,o,u,g);return uN(p,i),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,r)=>{e.getProvider("auth-internal").initialize()})),da(new hs("auth-internal",e=>{const i=_c(e.getProvider("auth").getImmediate());return(r=>new NA(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ci(h0,m0,AA(s)),Ci(h0,m0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=300,kA=L0("authIdTokenMaxAge")||OA;let p0=null;const MA=s=>async e=>{const i=e&&await e.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>kA)return;const o=i==null?void 0:i.token;p0!==o&&(p0=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function DA(s=Rd()){const e=Ad(s,"auth");if(e.isInitialized())return e.getImmediate();const i=cN(s,{popupRedirectResolver:CA,persistence:[jN,wN,kv]}),r=L0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const d=MA(u.toString());EN(i,d,()=>d(i.currentUser)),bN(i,m=>d(m))}}const o=D0("auth");return o&&fN(i,`http://${o}`),i}function IA(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}aN({loadJS(s){return new Promise((e,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=pn("internal-error");u.customData=o,i(u)},r.type="text/javascript",r.charset="UTF-8",IA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RA("Browser");const zv={apiKey:"AIzaSyBwlKETZ97CNxuDeq-8vfDP7LiZHhNPdRs",authDomain:"mobile-monster-4a17a.firebaseapp.com",databaseURL:"https://mobile-monster-4a17a-default-rtdb.firebaseio.com",projectId:"mobile-monster-4a17a",storageBucket:"mobile-monster-4a17a.firebasestorage.app",messagingSenderId:"91346929391",appId:"1:91346929391:web:a142e839db7ca795fc7d1a",measurementId:"G-N0E3MS5PV2"},Hv=iT().length?Rd():q0(zv),Si=M2(Hv,zv.databaseURL),g0=DA(Hv),LA=({player:s,activePet:e,pvpWins:i,pvpLosses:r,onJoinRoom:o})=>{const[u,d]=we.useState([]),[m,g]=we.useState(!1),[p,b]=we.useState(null),[E,x]=we.useState(0),R=we.useRef(!1);we.useEffect(()=>{const I=xi(Si,"pvp_rooms"),D=av(I,U=>{const H=U.val();if(H){const z=Object.entries(H).map(([Se,je])=>({id:Se,...je})).filter(Se=>Se.status==="waiting");d(z),!z.find(Se=>Se.host.id===s.id)&&p&&(b(null),x(0))}else d([]),b(null),x(0)});return()=>D()},[s.id,p]);const P=async I=>{if(!(!I||R.current)){R.current=!0;try{const D=xi(Si,`pvp_rooms/${I}`),U=await S2(D);U.exists()&&U.val().status==="waiting"&&await x2(D)}catch(D){console.error("Cancel room failed:",D)}finally{b(null),x(0),R.current=!1}}};we.useEffect(()=>{let I;return p&&E>0?I=setInterval(()=>{x(D=>D-1)},1e3):p&&E===0&&P(p),()=>{I&&clearInterval(I)}},[E,p]);const J=async()=>{if(!e||m||p)return;const I=u.find(D=>D.host.id===s.id);if(I){b(I.id),x(10),o(I.id,!0);return}g(!0);try{const D=xi(Si,"pvp_rooms"),U=E2(D),H=U.key,z={status:"waiting",createdAt:Date.now(),host:{id:s.id,name:s.name,fairy:s.equipment.fairy,pet:{name:e.name,hp:e.maxHp,maxHp:e.maxHp,atk:e.atk,def:e.def,spd:e.spd,image:e.image,skills:e.skills}},turn:1};await sv(U,z),b2(U).remove(),b(H),x(10),o(H,!0)}catch(D){console.error("Create room failed:",D)}finally{g(!1)}},re=async I=>{if(!(!e||I.host.id===s.id||m)){g(!0);try{const D=xi(Si,`pvp_rooms/${I.id}`);await Ao(D,{status:"fighting",guest:{id:s.id,name:s.name,fairy:s.equipment.fairy,pet:{name:e.name,hp:e.maxHp,maxHp:e.maxHp,atk:e.atk,def:e.def,spd:e.spd,image:e.image,skills:e.skills}}}),o(I.id,!1)}catch(D){console.error("Join room failed:",D)}finally{g(!1)}}};return _.jsxs("div",{className:"flex flex-col h-full bg-[#121212] p-6 animate-in fade-in duration-500 overflow-y-auto",children:[_.jsxs("div",{className:"max-w-md mx-auto w-full flex flex-col h-full",children:[_.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[_.jsxs("div",{className:"bg-stone-900/50 border border-lime-500/20 rounded-2xl p-4 flex flex-col items-center justify-center shadow-lg",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[_.jsx(C0,{size:16,className:"text-lime-500"}),_.jsx("span",{className:"text-[10px] font-black text-lime-500 uppercase tracking-widest",children:""})]}),_.jsx("div",{className:"text-2xl font-black text-white",children:i})]}),_.jsxs("div",{className:"bg-stone-900/50 border border-rose-500/20 rounded-2xl p-4 flex flex-col items-center justify-center shadow-lg",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[_.jsx(x0,{size:16,className:"text-rose-500"}),_.jsx("span",{className:"text-[10px] font-black text-rose-500 uppercase tracking-widest",children:""})]}),_.jsx("div",{className:"text-2xl font-black text-white",children:r})]})]}),_.jsxs("div",{className:"flex flex-col items-center text-center mb-10",children:[_.jsx("div",{className:"w-16 h-16 bg-orange-500/10 rounded-full flex items-center justify-center mb-4 border border-orange-500/20",children:_.jsx(jr,{size:32,className:"text-orange-500"})}),_.jsx("h2",{className:"text-2xl font-black text-white tracking-widest uppercase",children:""}),_.jsx("p",{className:"text-[10px] text-stone-500 font-bold uppercase tracking-tighter mb-6",children:""}),p?_.jsxs("div",{className:"flex flex-col items-center gap-4 w-full",children:[_.jsx("div",{className:"flex flex-col items-center gap-2 bg-stone-900 px-8 py-5 rounded-[2rem] border border-orange-500/50 shadow-[0_0_30px_rgba(234,88,12,0.15)] w-full",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs("div",{className:"relative",children:[_.jsx(mx,{size:20,className:"text-orange-500 animate-spin-slow"}),_.jsx("div",{className:"absolute inset-0 bg-orange-500 blur-md opacity-20"})]}),_.jsxs("span",{className:"text-white font-black text-sm uppercase tracking-widest",children:["... ",E,""]})]})}),_.jsx("button",{onClick:()=>p&&P(p),className:"text-[10px] text-stone-500 hover:text-red-500 font-black uppercase tracking-widest transition-colors flex items-center gap-1.5",children:""})]}):_.jsxs("button",{onClick:J,disabled:m||!e,className:"flex items-center gap-3 bg-orange-600 hover:bg-orange-500 text-white px-8 py-4 rounded-2xl font-black text-sm uppercase tracking-widest shadow-[0_8px_30px_rgba(234,88,12,0.4)] active:scale-95 transition-all disabled:opacity-50 disabled:shadow-none",children:[m?_.jsx(JE,{className:"animate-spin",size:18}):_.jsx(sx,{size:18}),""]})]}),!e&&!p&&_.jsxs("div",{className:"bg-red-900/10 border border-red-900/20 p-4 rounded-2xl mb-8 text-red-400 text-[10px] font-black text-center uppercase tracking-widest flex items-center justify-center gap-2",children:[_.jsx(BE,{size:14}),""]}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-6 opacity-40",children:[_.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-transparent to-stone-700"}),_.jsxs("span",{className:"text-[10px] font-black text-stone-500 uppercase tracking-widest",children:[" (",u.length,")"]}),_.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-l from-transparent to-stone-700"})]}),_.jsx("div",{className:"grid grid-cols-1 gap-4 pb-12",children:u.length===0?_.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-stone-900/10 rounded-[2.5rem] border-2 border-dashed border-stone-800/30",children:[_.jsx(vx,{size:48,className:"text-stone-800 mb-4 opacity-50"}),_.jsx("span",{className:"text-stone-700 text-[10px] font-black uppercase tracking-[0.2em]",children:""})]}):u.map(I=>_.jsxs("div",{className:`bg-[#1a1a1a] border ${I.host.id===s.id?"border-orange-500/30 bg-orange-500/5":"border-stone-800"} p-5 rounded-2xl flex items-center justify-between group transition-all duration-300 shadow-xl`,children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"w-14 h-14 bg-stone-800/80 rounded-xl p-2 border border-stone-700 shadow-inner overflow-hidden flex items-center justify-center",children:_.jsx("img",{src:I.host.pet.image,className:"w-full h-full object-contain group-hover:scale-110 transition-transform duration-500",alt:"Pet"})}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[_.jsx("span",{className:"text-white font-black text-sm tracking-tight",children:I.host.name}),I.host.id===s.id&&_.jsx("span",{className:"text-[8px] bg-orange-500/20 text-orange-500 px-1.5 py-0.5 rounded font-black uppercase tracking-tighter",children:""})]}),_.jsx("div",{className:"text-[10px] text-orange-500 font-bold uppercase tracking-tighter",children:I.host.pet.name})]})]}),_.jsx("button",{onClick:()=>re(I),disabled:m||p===I.id||I.host.id===s.id,className:`px-5 py-2.5 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all active:scale-90 border shadow-lg disabled:opacity-30 ${I.host.id===s.id?"bg-transparent border-stone-700 text-stone-600 cursor-default":"bg-stone-800 hover:bg-white text-white hover:text-black border-stone-700 hover:border-white"}`,children:I.host.id===s.id?"":""})]},I.id))})]})]}),_.jsx("style",{children:`
        .animate-spin-slow {
          animation: spin 3s linear infinite;
        }
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})},wo={listenToRoom:(s,e)=>{const i=xi(Si,`pvp_rooms/${s}`);return av(i,r=>{e(r.val())})},sendAction:async(s,e,i,r)=>{const o=xi(Si,`pvp_rooms/${s}/actions/${e}/${i}`);await Ao(o,r)},updateBattleState:async(s,e)=>{const i=xi(Si),r={};Object.keys(e).forEach(o=>{r[`pvp_rooms/${s}/${o}`]=e[o]}),await Ao(i,r)},finishBattle:async(s,e)=>{await Ao(xi(Si,`pvp_rooms/${s}`),{status:"finished",winnerId:e})}},UA=async(s,e,i,r,o,u,d,m,g)=>{let p=1,b=1,E=!1,x=!1,R=1,P=1,J=!1,re=!1;const I=[...s].sort((D,U)=>U.spd-D.spd||D.id.localeCompare(U.id));for(const D of I){if(e.hp<=0||i.hp<=0)break;if(await new Promise(U=>setTimeout(U,450)),D.type==="player"){const U=D.side==="host"?r:u;if(D.action===""&&U)if(d()*100<=(U.activationChance||100)){m(`${D.name}  [${U.name}]`,D.side==="host"?"pvp_me":"pvp_op");const H=1.5;if(D.side==="host")switch(U.effectType){case"ATK_BOOST":p=H;break;case"DEF_BOOST":b=H;break;case"ABSORB":E=!0;break;case"REFLECT":x=!0;break}else switch(U.effectType){case"ATK_BOOST":R=H;break;case"DEF_BOOST":P=H;break;case"ABSORB":J=!0;break;case"REFLECT":re=!0;break}}else m(`${D.name} ...`,"info");else if(D.action===""){m(`${D.name} ...`,"info");const H=1+(1-i.hp/i.maxHp),z=(i.captureRate||.1)*H*100;if(d()*100<=z)return m(`  ${i.name}...`,"system"),{hostPet:e,guestPetOrEnemy:i,captured:!0};m(`${i.name} `,"damage")}else if(D.action===""){if(m(`${D.name} `,"info"),d()<.7)return m("","system"),{hostPet:e,guestPetOrEnemy:i,escaped:!0};m("...","damage")}}else{const U=D.side==="host",H=U?e:i,z=U?i:e,ee=U?p:R,Se=U?P:b,je=U?re:x,W=U?J:E;if(D.action==="")U?b*=2:P*=2,m(`${D.name} `,"info");else{const oe=H.skills&&H.skills.length>0?H.skills:[_n[0]],ve=oe[Math.floor(d()*oe.length)];g(e.hp,i.hp,ve.name),await new Promise(Qe=>setTimeout(Qe,550));const Fe=Math.floor(H.atk*ve.power*ee*(.9+d()*.2));if(je)m(`${D.name}  ${Fe} `,"damage"),H.hp=Math.max(0,H.hp-Fe);else if(W)m(`${z.name}  ${Fe} HP`,"info"),z.hp=Math.min(z.maxHp,z.hp+Fe);else{const Qe=Math.max(1,Fe-z.def*Se/2);z.hp=Math.max(0,z.hp-Qe),m(`${D.name}  ${ve.name} ${Math.floor(Qe)} `,D.side==="host"?"pvp_me":"pvp_op")}}}g(e.hp,i.hp)}return{hostPet:e,guestPetOrEnemy:i}},jA=s=>{let e=0;for(let i=0;i<s.length;i++)e=Math.imul(31,e)+s.charCodeAt(i)|0;return()=>(e=Math.imul(e^e>>>16,2246822507)|0,e=Math.imul(e^e>>>13,3266489909)|0,((e^=e>>>16)>>>0)/4294967296)},zA=s=>{let e={...s};const i=[],r=20;for(;e.level<r&&e.exp>=e.level*100;){e.exp-=e.level*100,e.level+=1;const o=Math.floor(Math.random()*11)+10,u=Math.floor(Math.random()*4)+2,d=Math.floor(Math.random()*3)+2,m=Math.floor(Math.random()*3)+1;e.maxHp+=o,e.atk+=u,e.def+=d,e.spd+=m,e.hp=e.maxHp,i.push(` ${e.name}  Lv.${e.level}`),i.push(`HP+${o}, ATK+${u}, DEF+${d}, SPD+${m}`)}return e.level>=r&&(e.exp=0),{pet:e,logs:i}},$f="stone_age_origins_save_v4",HA=()=>{var re;const[s,e]=we.useState(!1),i=we.useRef(0),r=we.useRef(null),[o,u]=we.useState(()=>{const I=localStorage.getItem($f);if(I)try{return{pvpWins:0,pvpLosses:0,pvpPoints:0,lastProcessedRoomId:null,...JSON.parse(I),view:Ke.EXPLORE,battle:null}}catch(D){console.error("Load fail",D)}return{player:{...NE,id:"p-"+Math.random().toString(36).substr(2,9)},activePet:null,pets:[],inventory:CE.map(D=>({...D,id:`${D.id}-${Math.random().toString(36).substr(2,9)}`})),view:Ke.EXPLORE,currentMap:rs[0].name,isAuto:!1,battle:null,combatLogs:[{id:Date.now().toString(),text:"",type:"system"}],hasCreatedCharacter:!1,mapBattleCounts:{},pvpWins:0,pvpLosses:0,pvpPoints:0,lastProcessedRoomId:null}}),d=(I,D="info")=>{u(U=>({...U,combatLogs:[...U.combatLogs.slice(-49),{id:Date.now().toString(),text:I,type:D}]}))};we.useEffect(()=>{const I=xN(g0,D=>{D?e(!0):gN(g0).catch(U=>console.error("Auth error",U))});return()=>I()},[]),we.useEffect(()=>{const I=setTimeout(()=>{localStorage.setItem($f,JSON.stringify(o))},500);return()=>clearTimeout(I)},[o.player,o.pets,o.inventory,o.hasCreatedCharacter,o.currentMap,o.mapBattleCounts,o.pvpWins,o.pvpLosses]);const m=(I,D)=>{r.current&&r.current();const U=wo.listenToRoom(I,H=>{H&&(H.status==="fighting"&&u(z=>{var W,oe,ve,Fe,Qe,_t,X,B,Q,F;const ee=H.turn||1,Se=(W=H.actions)==null?void 0:W[ee],je=!!(Se!=null&&Se.host&&(Se!=null&&Se.guest));if(z.view!==Ke.BATTLE||((oe=z.battle)==null?void 0:oe.roomId)!==I){const V=D?H.guest:H.host,S={id:((V==null?void 0:V.id)||"opponent")+"-pet",name:(((ve=V==null?void 0:V.pet)==null?void 0:ve.name)||"")+" ()",level:1,hp:((Fe=V==null?void 0:V.pet)==null?void 0:Fe.hp)??0,maxHp:((Qe=V==null?void 0:V.pet)==null?void 0:Qe.maxHp)??100,atk:((_t=V==null?void 0:V.pet)==null?void 0:_t.atk)??10,def:((X=V==null?void 0:V.pet)==null?void 0:X.def)??10,spd:((B=V==null?void 0:V.pet)==null?void 0:B.spd)??10,image:((Q=V==null?void 0:V.pet)==null?void 0:Q.image)||"",captureRate:0,skills:((F=V==null?void 0:V.pet)==null?void 0:F.skills)||[_n[0]],spawnMaps:[]};return i.current=0,{...z,view:Ke.BATTLE,battle:{enemies:[S],turnCount:ee,phase:"PLAYER_CHOICE",playerAction:null,petAction:null,countdown:30,isPvP:!0,roomId:I,isHost:D,opponentId:V==null?void 0:V.id,opponentName:V==null?void 0:V.name,opponentPet:V==null?void 0:V.pet,opponentFairy:V==null?void 0:V.fairy}}}if(z.battle){if(ee>z.battle.turnCount){const V=D?H.host.pet.hp:H.guest.pet.hp,S=D?H.guest.pet.hp:H.host.pet.hp,j=[...z.battle.enemies];return j[0]&&(j[0].hp=S),{...z,activePet:z.activePet?{...z.activePet,hp:V}:null,battle:{...z.battle,enemies:j,phase:"PLAYER_CHOICE",turnCount:ee,playerAction:null,petAction:null}}}if(je&&i.current<ee)return{...z,battle:{...z.battle,phase:"EXECUTION"}}}return z}),H.status==="finished"&&u(z=>{var je;if((je=z.battle)!=null&&je.winnerId||z.lastProcessedRoomId===I)return z;const ee=H.winnerId===z.player.id,Se=z.activePet?{...z.activePet,hp:z.activePet.maxHp}:null;return{...z,pvpWins:ee?z.pvpWins+1:z.pvpWins,pvpLosses:ee?z.pvpLosses:z.pvpLosses+1,activePet:Se,lastProcessedRoomId:I,battle:z.battle?{...z.battle,winnerId:ee?"player":"opponent",phase:"EXECUTION"}:null}}))});return r.current=U,U},g=we.useCallback(()=>{if(!o.activePet||o.activePet.hp<=0){d("","damage");return}const D=(o.mapBattleCounts[o.currentMap]||0)%10;let U;const H=ee=>ee.filter(Se=>Se.spawnMaps.includes(o.currentMap));if(D===4){const ee=H(AE);U=ee.length>0?ee[Math.floor(Math.random()*ee.length)]:H(jf)[0],d(` ${U.name}`,"system")}else if(D===9){const ee=H(RE);U=ee.length>0?ee[Math.floor(Math.random()*ee.length)]:H(jf)[0],d(` ${U.name} `,"damage")}else{const ee=H(jf);U=ee[Math.floor(Math.random()*ee.length)]}if(!U){d("","info");return}const z=[{...U,id:"enemy-"+Math.random()}];u(ee=>({...ee,view:Ke.BATTLE,battle:{enemies:z,turnCount:1,phase:"PLAYER_CHOICE",playerAction:null,petAction:null,countdown:10,isPvP:!1}}))},[o.currentMap,o.activePet,o.mapBattleCounts]),p=(I,D)=>{u(U=>{if(!U.battle)return U;const H={...U.battle};return I==="player"?(H.playerAction=D,H.phase="PET_CHOICE"):(H.petAction=D,H.isPvP?(H.phase="WAITING_FOR_OPPONENT",wo.sendAction(H.roomId,H.turnCount,H.isHost?"host":"guest",{player:H.playerAction,pet:D})):H.phase="EXECUTION"),{...U,battle:H}})};we.useEffect(()=>{var I;o.view===Ke.BATTLE&&((I=o.battle)==null?void 0:I.phase)==="EXECUTION"&&!o.battle.winnerId&&(async()=>{var _t;let U=null;if(u(X=>(U=X.battle,X)),!U)return;const H=U.isPvP;if(H&&i.current>=U.turnCount)return;H&&(i.current=U.turnCount);let z=null,ee=null;if(H&&(await wo.listenToRoom(U.roomId,X=>z=X),await new Promise(X=>setTimeout(X,200)),ee=(_t=z==null?void 0:z.actions)==null?void 0:_t[U.turnCount],!z||!(ee!=null&&ee.host)||!(ee!=null&&ee.guest))){i.current=U.turnCount-1;return}let Se=H?{...z.host.pet}:{...o.activePet},je=H?{...z.guest.pet}:{...U.enemies[0]};const W=H?jA(`${U.roomId}-${U.turnCount}`):()=>Math.random(),oe=[{side:"host",type:"player",spd:999,id:"host-p",name:H?z.host.name:o.player.name,action:H?ee.host.player:U.playerAction},{side:"guest",type:"player",spd:998,id:"guest-p",name:H?z.guest.name:"",action:H?ee.guest.player:""},{side:"host",type:"pet",spd:Se.spd||1,id:"host-pet",name:Se.name,action:H?ee.host.pet:U.petAction},{side:"guest",type:"pet",spd:je.spd||1,id:"guest-pet",name:je.name,action:H?ee.guest.pet:""}],ve=await UA(oe,Se,je,H?z.host.fairy:o.player.equipment.fairy,o.player.id,H?z.guest.fairy:null,W,d,(X,B,Q)=>{u(F=>({...F,activePet:H?U.isHost?{...F.activePet,hp:X}:{...F.activePet,hp:B}:{...F.activePet,hp:X},battle:F.battle?{...F.battle,executingSkillName:Q,enemies:[{...F.battle.enemies[0],hp:H?U.isHost?B:X:B}]}:null}))});if(H){const X=ve.hostPet.hp<=0?z.guest.id:ve.guestPetOrEnemy.hp<=0?z.host.id:null,B={"host/pet/hp":ve.hostPet.hp,"guest/pet/hp":ve.guestPetOrEnemy.hp};X?(B.status="finished",B.winnerId=X):U.isHost&&(B.turn=U.turnCount+1),await wo.updateBattleState(U.roomId,B)}if(ve.captured||ve.escaped){if(ve.captured){const X=je,B={id:"captured-"+Date.now(),name:X.name,species:X.name,level:X.level,exp:0,hp:X.hp,maxHp:X.maxHp,atk:X.atk,def:X.def,spd:X.spd,image:X.image,skills:X.skills,isActive:!1};u(Q=>{const V=Q.pets.some(S=>S.species===B.species&&S.level===B.level)?Q.pets:[...Q.pets,B];return{...Q,pets:V,mapBattleCounts:{...Q.mapBattleCounts,[Q.currentMap]:(Q.mapBattleCounts[Q.currentMap]||0)+1}}}),await new Promise(Q=>setTimeout(Q,1200))}u(X=>({...X,view:Ke.EXPLORE,battle:null}));return}const Fe=H?U.isHost?ve.guestPetOrEnemy.hp<=0:ve.hostPet.hp<=0:ve.guestPetOrEnemy.hp<=0,Qe=H?U.isHost?ve.hostPet.hp<=0:ve.guestPetOrEnemy.hp<=0:ve.hostPet.hp<=0;if(Fe||Qe)if(await new Promise(X=>setTimeout(X,700)),!H&&Fe){const X=je,B=Math.floor(X.level*35),Q=[];X.drops&&X.drops.length>0&&X.drops.forEach(S=>{if(Math.random()*100<=S.chance){const te=wE.find($=>$.id===S.itemId);if(te){const $={...te,id:`${te.id}-${Math.random().toString(36).substr(2,9)}`};Q.push($),d(` ${te.name}`,"system")}}});let F={...o.activePet,hp:o.activePet.maxHp,exp:o.activePet.exp+B};const V=zA(F);V.logs.forEach(S=>d(S,"system")),u(S=>({...S,view:Ke.EXPLORE,battle:null,activePet:V.pet,pets:S.pets.map(j=>j.id===V.pet.id?V.pet:j),inventory:[...S.inventory,...Q],mapBattleCounts:{...S.mapBattleCounts,[S.currentMap]:(S.mapBattleCounts[S.currentMap]||0)+1}}))}else!H&&Qe&&u(X=>({...X,view:Ke.EXPLORE,battle:null,activePet:{...X.activePet,hp:X.activePet.maxHp}}));else H||u(X=>({...X,battle:X.battle?{...X.battle,phase:"PLAYER_CHOICE",turnCount:X.battle.turnCount+1}:null}))})()},[(re=o.battle)==null?void 0:re.phase,o.view]);const b=I=>{const D=rs.findIndex(H=>H.name===o.currentMap),U=I==="next"?(D+1)%rs.length:(D-1+rs.length)%rs.length;u(H=>({...H,currentMap:rs[U].name}))},E=o.mapBattleCounts[o.currentMap]||0,x=E%10,R=x<4?"":"",P=x<4?4-x:9-x,J=rs.find(I=>I.name===o.currentMap);return o.hasCreatedCharacter?_.jsxs("div",{className:"flex flex-col h-[100dvh] w-full bg-[#121212] text-[#d4d4d4] overflow-hidden",children:[_.jsxs("div",{className:"h-16 md:h-20 flex items-center justify-between px-6 bg-[#1a1a1a] border-b border-[#333] z-50 shadow-md flex-none",children:[_.jsx(Sx,{player:o.player,onClick:()=>u(I=>({...I,view:Ke.CHARACTER})),disabled:!!o.battle&&!o.battle.winnerId}),_.jsx("div",{className:"text-xs md:text-sm font-black text-stone-500 uppercase tracking-widest",children:"Sigma Monster"})]}),_.jsxs("div",{className:"flex-1 relative flex flex-col min-h-0",children:[_.jsx("div",{className:"flex-1 min-h-0 relative",children:o.view===Ke.BATTLE&&o.battle?_.jsx(Tx,{battle:o.battle,player:o.player,pet:o.activePet,currentMap:o.currentMap,onAction:p,onExit:()=>u(I=>({...I,view:Ke.EXPLORE,battle:null}))}):o.view===Ke.CHARACTER?_.jsx(wx,{player:o.player,onDeleteCharacter:()=>{localStorage.removeItem($f),window.location.reload()}}):o.view===Ke.PETS?_.jsx(Cx,{pets:o.pets,onSetActive:I=>u(D=>({...D,pets:D.pets.map(U=>({...U,isActive:U.id===I})),activePet:D.pets.find(U=>U.id===I)||null})),onDeletePet:I=>u(D=>({...D,pets:D.pets.filter(U=>U.id!==I)}))}):o.view===Ke.BAG?_.jsx(Ax,{inventory:o.inventory,equipment:o.player.equipment,onEquipFairy:I=>{u(D=>({...D,player:{...D.player,equipment:{...D.player.equipment,fairy:I}}})),d(`${I.name}`,"info")},onUnequipFairy:()=>u(I=>({...I,player:{...I.player,equipment:{...I.player.equipment,fairy:null}}})),onDeleteItem:I=>u(D=>({...D,inventory:D.inventory.filter(U=>U.id!==I)}))}):o.view===Ke.ARENA?_.jsx(LA,{player:o.player,activePet:o.activePet,pvpWins:o.pvpWins,pvpLosses:o.pvpLosses,onJoinRoom:m}):_.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 bg-gradient-to-b from-stone-900 to-[#121212]",children:[o.activePet&&_.jsxs("div",{className:"relative animate-in fade-in zoom-in duration-700 flex flex-col items-center mb-10",children:[_.jsx("img",{src:o.activePet.image,className:"w-48 h-48 md:w-64 md:h-64 object-contain mb-8 drop-shadow-0_20px_60px_rgba(234,88,12,0.4)",alt:"Pet"}),_.jsxs("div",{className:"bg-black/40 px-6 py-2 rounded-full border border-white/10 text-xs md:text-sm font-black uppercase text-orange-400 tracking-widest",children:[o.activePet.name," (Lv.",o.activePet.level,")"]})]}),_.jsxs("div",{className:"w-full max-w-lg bg-[#1a1a1a]/90 backdrop-blur-2xl p-8 md:p-10 rounded-[2.5rem] border border-white/5 shadow-2xl flex flex-col items-center z-10",children:[_.jsxs("div",{className:"flex flex-col items-center w-full mb-8",children:[_.jsxs("div",{className:"flex items-center justify-between w-full mb-2",children:[_.jsx("button",{onClick:()=>b("prev"),className:"p-4 text-stone-500 hover:text-white transform hover:scale-110 active:scale-90 transition-transform",children:_.jsx(b0,{size:32})}),_.jsx("h3",{className:"text-2xl md:text-3xl font-black text-white tracking-widest animate-in fade-in slide-in-from-bottom-1 duration-300",children:o.currentMap},o.currentMap),_.jsx("button",{onClick:()=>b("next"),className:"p-4 text-stone-500 hover:text-white transform hover:scale-110 active:scale-90 transition-transform",children:_.jsx(E0,{size:32})})]}),J&&_.jsx("p",{className:"text-xs md:text-sm text-stone-500 italic font-medium text-center px-4 leading-relaxed animate-in fade-in duration-700",children:J.description},`desc-${o.currentMap}`)]}),_.jsxs("div",{className:"w-full flex items-center justify-between px-6 py-3 bg-black/30 rounded-2xl border border-white/5 mb-6 text-[10px] md:text-xs font-black uppercase tracking-widest",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-stone-500",children:":"}),_.jsx("span",{className:"text-white",children:E})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("span",{className:"text-stone-500",children:["",R,":"]}),_.jsx("span",{className:P===0?"text-red-500 animate-pulse font-black":"text-orange-500",children:P===0?" ":`${P} `})]})]}),_.jsxs("button",{onClick:g,className:"w-full group bg-orange-600 text-white py-5 md:py-6 rounded-3xl font-black text-xl shadow-[0_10px_30px_rgba(234,88,12,0.3)] hover:shadow-[0_15px_40px_rgba(234,88,12,0.5)] hover:bg-orange-500 active:scale-95 transition-all flex items-center justify-center gap-4",children:[_.jsx(jr,{size:24,className:"group-hover:rotate-12 transition-transform"}),_.jsx("span",{children:"   "})]})]})]})}),_.jsx("div",{className:"absolute top-0 left-0 w-full h-32 pointer-events-none z-[70] bg-gradient-to-b from-black/90 via-black/40 to-transparent",children:_.jsx("div",{className:"pointer-events-auto h-full",children:_.jsx(Rx,{logs:o.combatLogs})})})]}),_.jsx("div",{className:"flex justify-around items-center h-20 bg-[#1a1a1a] border-t border-[#333] px-4 shadow-2xl flex-none",children:[{id:Ke.EXPLORE,icon:VE,label:""},{id:Ke.PETS,icon:YE,label:""},{id:Ke.BAG,icon:Jf,label:""},{id:Ke.ARENA,icon:jr,label:""}].map(I=>_.jsxs("button",{onClick:()=>u(D=>({...D,view:I.id})),disabled:o.battle&&!o.battle.winnerId,className:`flex flex-col items-center justify-center flex-1 h-full transition-all ${o.view===I.id?"text-orange-500 font-black scale-110":"text-stone-500 opacity-60 hover:opacity-100"}`,children:[_.jsx(I.icon,{size:28}),_.jsx("span",{className:"text-[11px] mt-2 font-bold uppercase tracking-widest",children:I.label})]},I.id))})]}):_.jsx(xx,{onComplete:(I,D)=>{const H={...Co.find(z=>z.id===D),id:"pet-"+Date.now(),isActive:!0,isStarter:!0};u(z=>({...z,player:{...z.player,name:I},activePet:H,pets:[H],hasCreatedCharacter:!0}))}})},Bv=document.getElementById("root");if(!Bv)throw new Error("Could not find root element to mount to");const BA=bE.createRoot(Bv);BA.render(_.jsx(dE.StrictMode,{children:_.jsx(HA,{})}));
